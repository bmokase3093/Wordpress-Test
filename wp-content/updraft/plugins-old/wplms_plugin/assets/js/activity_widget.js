!function(e){var t={};function s(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t){const{createElement:s,render:a,useState:n,useEffect:i,Fragment:r}=wp.element,{select:l,dispatch:o}=wp.data,d=e=>{const t=window.student_dash_activity,[a,d]=n(!0),[c,u]=n({}),[m,g]=n(()=>e.settings.messages?t.translations.unread_messages:e.settings.activity?t.translations.recent_activity:e.settings.friends?t.translations.friends_online:void 0),[v,p]=n(()=>{let s=[];return e.settings.messages&&s.push(t.translations.unread_messages),e.settings.activity&&s.push(t.translations.recent_activity),e.settings.friends&&s.push(t.translations.friends_online),s});i(()=>{_()},[]);const _=()=>{let s=[];return e.settings.messages&&s.push("messages"),e.settings.activity&&s.push("activity"),e.settings.friends&&s.push("friends"),fetch(t.api+"/activity",{method:"post",body:JSON.stringify({user_id:t.user_id,num:e.settings.number,token:l("vibebp").getToken(),type:s})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{if(e&&(console.log(e),Object.keys(e).length)){let t={};Object.keys(e).map((s,a)=>{console.log(s),e[s].status&&e[s].data&&e[s].data.length&&(t[s]=e[s].data)}),u(t)}d(!1)}).catch(e=>{console.error("Uh oh, an error!",e),o("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})};return s("div",{className:"activity_widget"},a?s("div",null,s("div",{className:"widget_loader"},s("div",null),s("div",null),s("div",null),s("div",null))):s(r,null,v&&v.length?s("div",{className:"tabs dash_tabs"},v.map((e,t)=>s("div",{className:e===m?"dash_tab active":"dash_tab",onClick:()=>{g(e)}},e))):"",s("div",{id:"",className:"tab_content"},e.settings.friends&&m==t.translations.friends_online?s("div",{id:"tab-friends",className:"tab-pane"},s("ul",{className:"dash-user-friends"},c.friends&&c.friends.length?c.friends.map((e,t)=>s("li",null,s("span",{dangerouslySetInnerHTML:{__html:e.avatar+" "+e.name}}),s("span",null,e.last_active))):s("div",{className:"message error"},t.translations.no_friends))):"",e.settings.messages&&m==t.translations.unread_messages?s("div",{id:"tab-messages",className:"tab-pane"},s("ul",{className:"dash-unread-messages"},c.messages&&c.messages.length?c.messages.map((e,t)=>s("li",null,s("span",{dangerouslySetInnerHTML:{__html:e.avatar}}),s("a",{href:e.link},e.subject,s("span",{dangerouslySetInnerHTML:{__html:e.subject_form}})))):s("div",{className:"message error"},t.translations.no_messages))):"",e.settings.activity&&m==t.translations.recent_activity?s("div",{id:"tab-activity",className:"tab-pane student_activity"},s("ul",{className:"dash-activities"},c.activity&&c.activity.length?c.activity.map((e,a)=>s("li",{class:e.component+" "+e.type},s("div",{class:"dash-activity"},s("span",{class:"dash-activity-time"},e.time+" "+t.translations.ago),s("strong",{dangerouslySetInnerHTML:{__html:e.action}})))):s("div",{className:"message error"},t.translations.no_activity))):"")))};document.addEventListener("wplms_dash_activity",e=>{e.target.removeEventListener(e.type,arguments.callee),document.querySelectorAll(".wplms_dash_activity").forEach(t=>{a(s(d,{settings:e.detail.widget.options}),t)})})}]);