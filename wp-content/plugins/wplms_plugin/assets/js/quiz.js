!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const{createElement:s,useState:r,useEffect:i,Fragment:a,render:o}=wp.element;var u=({progress:e,size:t})=>{let n,r;switch(t){case"xs":n=10,r=1;break;case"s":n=12,r=1.2;break;case"sm":n=25,r=2.5;break;case"med":n=50,r=5;break;case"lg":n=75,r=7.5;break;case"xl":n=100,r=10;break;default:n=50,r=5}const i=n-2*r,a=2*i*Math.PI,o=a-e/100*a;return s("div",{className:"react-progress-circle"},s("svg",{height:2*n,width:2*n},s("circle",{className:"ReactProgressCircle_circleBackground",strokeWidth:r,style:{strokeDashoffset:o},r:i,cx:n,cy:n}),s("circle",{className:"ReactProgressCircle_circle",strokeWidth:r,strokeDasharray:a+" "+a,style:{strokeDashoffset:o},r:i,cx:n,cy:n})))};const{Component:c,createElement:l,render:d,useState:_,useEffect:m,Fragment:p}=wp.element;var h=e=>{const[t,n]=_(e.duration),[s,r]=_({d:0,h:0,m:0,s:0});m(()=>{if(e.start){setTimeout(()=>{let s=t-1;s<=-1?e.update(e.quiz_id,"expired"):s>=0&&(n(s),i())},1e3)}else n(e.duration),i()},[t,e.start,e.duration]);const i=()=>{let e={...s},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};let a=0;return t>-1&&(a=Math.floor((e.duration-t)/e.duration*100),a<=0&&(a=1)),l("div",{className:"quiztimer"},l("div",{className:"circle_timer"},a?l(u,{size:window.innerWidth<480?"xs":"sm",progress:a}):"",l("span",null,l("span",{className:"timer_amount"},s.d?l(p,null,l("span",null,s.d),l("span",null,":")):"",s.h?l(p,null,l("span",null,s.h),l("span",null,":")):"",s.m?l(p,null,l("span",null,s.m),l("span",null,":")):"",l("span",null,s.s)),l("span",{className:"timer_unit"},s.d?l(p,null,l("span",null,window.wplms_course_data.translations.days),l("span",null)):"",s.h?l(p,null,l("span",null,window.wplms_course_data.translations.hours),l("span",null)):"",s.m?l(p,null,l("span",null,window.wplms_course_data.translations.minutes),l("span",null)):"",l("span",null,window.wplms_course_data.translations.seconds)))))};const{createElement:g,render:f,useState:w,useEffect:q,useContext:y,Fragment:v,RawHTML:b}=wp.element,{dispatch:k,select:x}=wp.data;const{createElement:z,render:N,useState:S,useEffect:O,Fragment:P}=wp.element;var E=e=>{const[t,n]=S({});O(()=>{n(e.question)},[e.question]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),z(P,null,z("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),z("input",{type:"text",className:r,value:s,onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")}}))};const{createElement:I,render:M,useState:C,useEffect:F,Fragment:B}=wp.element;var D=e=>{const[t,n]=C({}),[s,r]=C([]);F(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&i(t),r(t)}},[e.question.correct_indexes]);const i=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}};let a="";return t.hasOwnProperty("marked_answer")&&(a=t.marked_answer),I(B,null,I("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?I(B,null,(t=>s.map((function(s,r){let i=t.options.findIndex(e=>e==s);return I("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(i)?"question_correct":"question_incorrect":"")},I("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:i,id:e.quiz_id+"_"+t.id+i,checked:parseInt(t.marked_answer)===i,onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")}}),I("label",{for:e.quiz_id+"_"+t.id+i,dangerouslySetInnerHTML:{__html:s}}))})))(t),t.attempted?"":I("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s),e.update(s,e.index,"changed")}},I("i",{class:"vicon vicon-trash"}))):"")};const{createElement:T,render:A,useState:L,useEffect:j,Fragment:H}=wp.element;var R=e=>{const[t,n]=L({}),[s,r]=L(-1);j(()=>{n(e.question)},[e.question]);const i=(t,s)=>{let i={...e.question};i.marked_answer&&i.marked_answer.length||(i.marked_answer=[]),i.marked_answer[s]=t,n(i),e.update(i,e.index,"changed"),r(-1)},a=(e,t)=>e.options.map((function(n,s){return e.hasOwnProperty("options_arr")&&e.options_arr&&e.options_arr.length&&e.options_arr[t]&&e.options_arr[t].length?e.options_arr[t].includes((s+1).toString())||e.options_arr[t].includes(s+1)?T("option",{value:s,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===s,dangerouslySetInnerHTML:{__html:n}}):void 0:T("option",{value:s,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===s,dangerouslySetInnerHTML:{__html:n}})}));return T(H,null,t&&t.extra_content&&Array.isArray(t.extra_content)?T("div",{className:"question_content"},t.extra_content.map((function(n,o){return T(H,null,T("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:n}}),t.options&&t.options.length&&o<t.extra_content.length-1?T(H,null,((t,n)=>T(H,null,T("span",{className:t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":""},s===n?T("select",{name:e.quiz_id+"_"+t.id,id:e.quiz_id+"_"+t.id,onChange:e=>{i(e.target.value,n)}},T("option",null,window.wplms_course_data.translations.select_option),a(t,n)):t.options.length&&t.hasOwnProperty("marked_answer")&&t.marked_answer.length&&t.marked_answer[n]?T("span",{className:"selectimitate ",dangerouslySetInnerHTML:{__html:t.options[t.marked_answer[n]]},onClick:()=>{r(n)}}):T("span",{className:"selectimitate no_value",onClick:()=>{r(n)}})),t.attempted?"":T("span",{className:"resetq_answer button",onClick:e=>{i(null,n)}},T("i",{class:"vicon vicon-trash"}))))(t,o)):"")}))):"")};const{createElement:J,render:X,useState:W,useEffect:U,Fragment:Q}=wp.element;var Y=e=>{const[t,n]=W({}),[s,r]=W([]);"undefined"!=e.question.marked_answer&&null!=e.question.marked_answer||(e.question.marked_answer=[]),U(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&i(t),r(t)}},[e.question.correct_indexes]);const i=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}};return J(Q,null,J("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?J(Q,null,(t=>{if(s&&s.length)return s.map((function(s,r){let i=t.options.findIndex(e=>e==s);return J("div",{className:"question_option checkbox "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(i)?"question_correct":"question_incorrect":"")},J("input",{type:"checkbox",name:e.quiz_id+"_"+t.id,value:i,id:e.quiz_id+"_"+t.id+i,checked:e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.includes(i),onChange:t=>{let s={...e.question};if(s.marked_answer.includes(i)){let e=s.marked_answer.indexOf(i);e>-1&&s.marked_answer.splice(e,1)}else s.marked_answer.push(i);n(s),e.update(s,e.index,"changed")}}),J("label",{for:e.quiz_id+"_"+t.id+i,dangerouslySetInnerHTML:{__html:s}}))}))})(t),t.attempted?"":J("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s),e.update(s,e.index,"changed")}},J("i",{class:"vicon vicon-trash"}))):"")};const{createElement:$,render:K,useState:V,useEffect:G,Fragment:Z}=wp.element;var ee=e=>{const[t,n]=V("120"),[s,r]=V(()=>{let t="";return e.marked_answer&&e.marked_answer.length&&(t=e.marked_answer[e.index]),t});G(()=>{void 0!==s&&s&&s.length>15&&n(8*s.length)},[s]);let i="";s&&(i=s);return $(Z,null,$("div",{className:"fillblank_area"},$("input",{type:"text",value:i,onChange:t=>{let n=s;n=t.target.value,r(n),e.update(n,e.index,"changed")},style:{width:t+"px"}})))};const{createElement:te,render:ne,useState:se,useEffect:re,Fragment:ie}=wp.element;var ae=e=>{const[t,n]=se({});re(()=>{n(e.question)},[]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);const r=(s,r,i)=>{if("changed"==i){let i={...t};i.marked_answer&&t.marked_answer.length||(i.marked_answer=[]),i.marked_answer[r]=s,n(i),e.update(i,e.index,"changed")}};return te(ie,null,t&&t.extra_content&&Array.isArray(t.extra_content)?te("div",{className:"question_content"},t.extra_content.map((function(e,n){return te(ie,null,te("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),n<t.extra_content.length-1?te("div",{className:"fillblank_area "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":"")},te(ee,{update:r,index:n,marked_answer:t.marked_answer})):"")}))):"")};const{createElement:oe,render:ue,useState:ce,useEffect:le,Fragment:de}=wp.element;var _e=e=>{const[t,n]=ce([]),[s,r]=ce(!1),[i,a]=ce([]),[o,u]=ce([]),[c,l]=ce([]),[d,_]=ce([]);le(()=>{a(e.items)},[e.items]);let m="droppable";s&&(m+=" active");const p=e=>{let t="";return s===i[e]&&(t="dragging"),t};return oe("div",{className:m},i.map((m,h)=>oe("div",{key:h,onDragStart:e=>{i[h]&&r(i[h])},onDragEnd:()=>{r(!1)},onDragOver:t=>{t.preventDefault(),((t,n)=>{if(!s)return;let r=i[n];if(s===r)return;let o=[...i];o=o.filter(e=>e!=s),o.splice(n,0,s),a(o),e.update(o,"changed")})(0,h)},ref:e=>{((e,s)=>{if(e){let r=t;r[s]||(r[s]=e),n(r)}})(e,h)},draggable:"true",style:d[h],onTouchStart:e=>{let n=[...c];t.map((e,t)=>{let s=e.getBoundingClientRect();n[t]=s}),l(n),i[h]&&r(i[h])},onTouchMove:e=>{e.preventDefault();let t=[];if("touchmove"===e.type){let n=[...d];n[h]={transform:"translateY("+Math.floor(e.touches[0].clientY-c[h].top)+"px)"},_(n),t.push(i[h]);let s=[];if(e.touches[0].clientY&&c.map((n,r)=>{n.top+n.height/2>e.touches[0].clientY&&i[r]!==i[h]&&t.push(i[r]),n.bottom-n.height/2<e.touches[0].clientY&&i[r]!==i[h]&&s.push(i[r])}),s.length)for(let e=s.length-1;e>=0;e--)t.unshift(s[e]);u(t)}},onTouchEnd:t=>{a(o),e.update(o,"changed"),l([]),_([]),r(!1),u([])},className:p(h)+" "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(h)?"question_correct":"question_incorrect":"")},oe("div",{dangerouslySetInnerHTML:{__html:m}}))))};const{createElement:me,render:pe,useState:he,useEffect:ge,Fragment:fe}=wp.element;var we=e=>{e.question.id,e.quiz_id;const[t,n]=he({}),[s,r]=he(!1);ge(()=>{let t=e.question;if(!s&&t&&t.marked_answer&&t.marked_answer.length&&"undefined"!=t.marked_answer){let e=[];t.marked_answer.map((n,s)=>{e.push(t.original_options[parseInt(n)-1])}),t.options=e,n(t),r(!0)}n(t)},[t]);return me(fe,null,me("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?me(fe,null,me(_e,{items:t.options,original_items:t.original_options,update:(s,r)=>{if("changed"==r){let r=t;r.marked_answer=[],s.map((e,t)=>{let n=r.original_options.indexOf(e);r.marked_answer.push(n+1)}),n(r),e.update(r,e.index,"changed")}},question:t}),t.attempted?"":me("span",{className:"resetq_answer button",onClick:s=>{let r={...t};r.marked_answer=null,r.options=r.original_options,n(r),e.update(r,e.index,"changed")}},me("i",{class:"vicon vicon-trash"}))):"")};const{createElement:qe,render:ye,useState:ve,useEffect:be,Fragment:ke}=wp.element;function xe(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var ze=e=>{const[t,n]=ve([]),[s,r]=ve(!1),[i,a]=ve([]),[o,u]=ve(""),[c,l]=ve([]),[d,_]=ve(e.matches),[m,p]=ve([]),[h,g]=ve([]),[f,w]=ve([]),[q,y]=ve({}),[v,b]=ve([]),[k,x]=ve([]),[z,N]=ve([]),[S,O]=ve({x:0,y:0}),[P,E]=ve([]);be(()=>{let t=[...e.items];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(n=>{n&&"NaN"!=typeof n&&(t=t.filter(t=>t!=e.question.original_options[n-1]))}),l(t);let n=[];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(e=>{parseFloat(e)-1>=0?n.push(e-1):n.push(null)}),N(n),e.update(!1,"reset")},[e.items,e.reset]);let I="droppable";s&&(I+=" active");const M=e=>{let t="";return s===c[e]&&(t="dragging"),t};return qe("div",{className:"match_playground"},qe("div",{className:"match_options"},d&&d.length?d.map((n,u)=>qe("div",{key:u,className:"match_option "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(u)?"question_correct":"question_incorrect":""),onDrop:t=>{((t,n)=>{if(!s)return;if(P.index===n)return;let r=[...c],i=[...z];if(!i[n]&&0!==i[n]){r=r.filter(e=>e!=s);let t=e.original_items.indexOf(s);d&&d.length&&d.map((e,t)=>{xe(i[t])&&(i[t]=null)}),xe(n)||(i[n]=t),N(i),l(r),e.update(i,"changed")}})(0,u)},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,t)=>{if(e){let n=i;n[t]||(n[t]=e),a(n)}})(e,u)}},qe("div",{dangerouslySetInnerHTML:{__html:n}}),qe("div",{className:"children"},e.original_items&&null!=z[u]&&e.original_items[z[u]]?qe("div",{key:"droppablediv"+u,draggable:"true",onDragStart:t=>{e.original_items[z[u]]&&(r(e.original_items[z[u]]),E({index:u,source:"droppablediv"}))},onDragEnd:()=>{r(!1),E({})},onDragOver:e=>{e.preventDefault()},className:M(u),style:k[z[u]],onTouchStart:n=>{let s=[...h];t.map((e,t)=>{let n=e.getBoundingClientRect();s[t]=n}),g(s);let a=[...f];i.map((e,t)=>{let n=e.getBoundingClientRect();a[t]=n}),w(a),y(o.getBoundingClientRect()),e.original_items[z[u]]&&(r(e.original_items[z[u]]),E({index:u,source:"droppablediv"})),E({})},onTouchMove:e=>{if(e&&(e.preventDefault(),"touchmove"===e.type)){let t=[...k];t[z[u]]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},x(t),O({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{let n=[...c],i=[...z];q.top<S.y&&q.top+q.height>S.y&&q.left<S.x&&q.left+q.width>S.x&&(n.push(s),i.map((e,t)=>{e==z[u]&&(i[t]=null)})),w([]),y({}),r(!1),x([]),b([]),l(n),N(i),e.update(i,"changed"),O({x:0,y:0})}},qe("div",{dangerouslySetInnerHTML:{__html:e.original_items[z[u]]}})):""))):""),qe("div",{className:I,onDragOver:e=>{e.preventDefault()},onDrop:t=>{(t=>{if("droppablediv"!==P.source)return;if(!s)return;let n=[...c],r=[...z];n.includes(s)||n.push(s),l(n),xe(P.index)||(r[P.index]=null),N(r),e.update(r,"changed")})()},ref:e=>{var t;(t=e)&&u(t)}},c&&c.length?c.map((s,a)=>qe("div",{key:"draggablediv"+a,onDragStart:e=>{c[a]&&r(c[a]),E({})},onDragEnd:()=>{r(!1),E({})},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,s)=>{if(e){let r=t;r[s]||(r[s]=e),n(r)}})(e,a)},draggable:"true",style:v[a],onTouchStart:e=>{let n=[...h];t.map((e,t)=>{let s=e.getBoundingClientRect();n[t]=s}),g(n);let a=[...f];i.map((e,t)=>{let n=e.getBoundingClientRect();a[t]=n}),w(a),s&&r(s),E({})},onTouchMove:e=>{if(e.preventDefault(),"touchmove"===e.type){let t=[...v];t[a]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},b(t),O({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{b([]);let n=[...c],i=[...z];f.map((t,r)=>{if(t.top<S.y&&t.top+t.height>S.y&&t.left<S.x&&t.left+t.width>S.x){let t=e.original_items.indexOf(s);t>=0&&!i[r]&&0!==i[r]&&(i[r]=t,n=n.filter(e=>e!=s))}}),w([]),r(!1),l(n),N(i),e.update(i,"changed"),O({x:0,y:0})},className:M(a)},qe("div",{dangerouslySetInnerHTML:{__html:s}}))):""))};const{createElement:Ne,render:Se,useState:Oe,useEffect:Pe,Fragment:Ee}=wp.element;var Ie=e=>{e.question.id,e.quiz_id;const[t,n]=Oe({}),[s,r]=Oe(!1);Pe(()=>{n(e.question)},[t]);return Ne(Ee,null,Ne("div",{className:"question_content"},Ne("div",{className:"question_statement",dangerouslySetInnerHTML:{__html:t&&t.extra_content&&t.extra_content.statement?t.extra_content.statement:""}}),t.options&&t.options.length&&t.content.match&&t.content.match.length?Ne(ze,{matches:t.extra_content.match,original_matches:t.extra_content.match,items:t.options,original_items:t.original_options,update:(s,i)=>{if("changed"==i){let r={...t};r.marked_answer=[],s.map(e=>{r.marked_answer.push(parseInt(e)+1)}),n(r),e.update(r,e.index,"changed")}"reset"==i&&r(!1)},reset:s,question:t}):"",Ne("div",{className:"question_end",dangerouslySetInnerHTML:{__html:t&&t.content&&t.content.end?t.content.end:""}})),t.attempted?"":Ne("span",{className:"resetq_answer button",onClick:s=>{r(!0);let i={...t};i.marked_answer=null,i.options=i.original_options,n(i),e.update(i,e.index,"changed")}},Ne("i",{class:"vicon vicon-trash"})))};const{createElement:Me,render:Ce,useState:Fe,useEffect:Be,Fragment:De}=wp.element;var Te=e=>{const[t,n]=Fe(e.question);let s="";return t.hasOwnProperty("marked_answer")&&(s=t.marked_answer),Me(De,null,Me("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Me(De,null,(t=>t.options.map((function(s,r){return Me("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(r)?"question_correct":"question_incorrect":"")},Me("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:r,id:e.quiz_id+"_"+t.id+r,checked:parseInt(t.marked_answer)===r,onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")}}),Me("label",{for:e.quiz_id+"_"+t.id+r,dangerouslySetInnerHTML:{__html:s}}))})))(t),t.attempted?"":Me("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s)}},Me("i",{class:"vicon vicon-trash"}))):"")};const{createElement:Ae,render:Le,useState:je,useEffect:He,Fragment:Re}=wp.element;var Je,Xe,We=e=>{const[t,n]=je({});He(()=>{n(e.question)},[e.question]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),Ae(Re,null,Ae("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Ae("textarea",{className:r,type:"text",onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")},value:s},s))},Ue=Ue||function(e,t){var n={},s=n.lib={},r=function(){},i=s.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=s.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,s=this.sigBytes;if(e=e.sigBytes,this.clamp(),s%4)for(var r=0;r<e;r++)t[s+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(s+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[s+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],s=0;s<t;s+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),o=n.enc={},u=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],s=0;s<e;s++){var r=t[s>>>2]>>>24-s%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s+=2)n[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new a.init(n,t/2)}},c=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],s=0;s<e;s++)n.push(String.fromCharCode(t[s>>>2]>>>24-s%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s++)n[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new a.init(n,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=s.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,s=n.words,r=n.sigBytes,i=this.blockSize,o=r/(4*i);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*i,r=e.min(4*t,r),t){for(var u=0;u<t;u+=i)this._doProcessBlock(s,u);u=s.splice(0,t),n.sigBytes-=r}return new a.init(u,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new _.HMAC.init(e,n).finalize(t)}}});var _=n.algo={};return n}(Math);Xe=(Je=Ue).lib.WordArray,Je.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,s=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<n;a++)e.push(s.charAt(i>>>6*(3-a)&63));if(t=s.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(s=n.charAt(64))&&-1!=(s=e.indexOf(s))&&(t=s);for(var s=[],r=0,i=0;i<t;i++)if(i%4){var a=n.indexOf(e.charAt(i-1))<<i%4*2,o=n.indexOf(e.charAt(i))>>>6-i%4*2;s[r>>>2]|=(a|o)<<24-r%4*8,r++}return Xe.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,s,r,i,a){return((e=e+(t&n|~t&s)+r+a)<<i|e>>>32-i)+t}function n(e,t,n,s,r,i,a){return((e=e+(t&s|n&~s)+r+a)<<i|e>>>32-i)+t}function s(e,t,n,s,r,i,a){return((e=e+(t^n^s)+r+a)<<i|e>>>32-i)+t}function r(e,t,n,s,r,i,a){return((e=e+(n^(t|~s))+r+a)<<i|e>>>32-i)+t}for(var i=Ue,a=(u=i.lib).WordArray,o=u.Hasher,u=i.algo,c=[],l=0;64>l;l++)c[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var a=0;16>a;a++){var o=e[u=i+a];e[u]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}a=this._hash.words;var u=e[i+0],l=(o=e[i+1],e[i+2]),d=e[i+3],_=e[i+4],m=e[i+5],p=e[i+6],h=e[i+7],g=e[i+8],f=e[i+9],w=e[i+10],q=e[i+11],y=e[i+12],v=e[i+13],b=e[i+14],k=e[i+15],x=t(x=a[0],S=a[1],N=a[2],z=a[3],u,7,c[0]),z=t(z,x,S,N,o,12,c[1]),N=t(N,z,x,S,l,17,c[2]),S=t(S,N,z,x,d,22,c[3]);x=t(x,S,N,z,_,7,c[4]),z=t(z,x,S,N,m,12,c[5]),N=t(N,z,x,S,p,17,c[6]),S=t(S,N,z,x,h,22,c[7]),x=t(x,S,N,z,g,7,c[8]),z=t(z,x,S,N,f,12,c[9]),N=t(N,z,x,S,w,17,c[10]),S=t(S,N,z,x,q,22,c[11]),x=t(x,S,N,z,y,7,c[12]),z=t(z,x,S,N,v,12,c[13]),N=t(N,z,x,S,b,17,c[14]),x=n(x,S=t(S,N,z,x,k,22,c[15]),N,z,o,5,c[16]),z=n(z,x,S,N,p,9,c[17]),N=n(N,z,x,S,q,14,c[18]),S=n(S,N,z,x,u,20,c[19]),x=n(x,S,N,z,m,5,c[20]),z=n(z,x,S,N,w,9,c[21]),N=n(N,z,x,S,k,14,c[22]),S=n(S,N,z,x,_,20,c[23]),x=n(x,S,N,z,f,5,c[24]),z=n(z,x,S,N,b,9,c[25]),N=n(N,z,x,S,d,14,c[26]),S=n(S,N,z,x,g,20,c[27]),x=n(x,S,N,z,v,5,c[28]),z=n(z,x,S,N,l,9,c[29]),N=n(N,z,x,S,h,14,c[30]),x=s(x,S=n(S,N,z,x,y,20,c[31]),N,z,m,4,c[32]),z=s(z,x,S,N,g,11,c[33]),N=s(N,z,x,S,q,16,c[34]),S=s(S,N,z,x,b,23,c[35]),x=s(x,S,N,z,o,4,c[36]),z=s(z,x,S,N,_,11,c[37]),N=s(N,z,x,S,h,16,c[38]),S=s(S,N,z,x,w,23,c[39]),x=s(x,S,N,z,v,4,c[40]),z=s(z,x,S,N,u,11,c[41]),N=s(N,z,x,S,d,16,c[42]),S=s(S,N,z,x,p,23,c[43]),x=s(x,S,N,z,f,4,c[44]),z=s(z,x,S,N,y,11,c[45]),N=s(N,z,x,S,k,16,c[46]),x=r(x,S=s(S,N,z,x,l,23,c[47]),N,z,u,6,c[48]),z=r(z,x,S,N,h,10,c[49]),N=r(N,z,x,S,b,15,c[50]),S=r(S,N,z,x,m,21,c[51]),x=r(x,S,N,z,y,6,c[52]),z=r(z,x,S,N,d,10,c[53]),N=r(N,z,x,S,w,15,c[54]),S=r(S,N,z,x,o,21,c[55]),x=r(x,S,N,z,g,6,c[56]),z=r(z,x,S,N,k,10,c[57]),N=r(N,z,x,S,p,15,c[58]),S=r(S,N,z,x,v,21,c[59]),x=r(x,S,N,z,_,6,c[60]),z=r(z,x,S,N,q,10,c[61]),N=r(N,z,x,S,l,15,c[62]),S=r(S,N,z,x,f,21,c[63]);a[0]=a[0]+x|0,a[1]=a[1]+S|0,a[2]=a[2]+N|0,a[3]=a[3]+z|0},_doFinalize:function(){var t=this._data,n=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(s/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,s=0;4>s;s++)r=n[s],n[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=o._createHelper(u),i.HmacMD5=o._createHmacHelper(u)}(Math),function(){var e,t=Ue,n=(e=t.lib).Base,s=e.WordArray,r=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),r=s.create(),i=r.words,a=o.keySize,o=o.iterations;i.length<a;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<o;c++)u=n.finalize(u),n.reset();r.concat(u)}return r.sigBytes=4*a,r}});t.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)}}(),Ue.lib.Cipher||function(e){var t=(m=Ue).lib,n=t.Base,s=t.WordArray,r=t.BufferedBlockAlgorithm,i=m.enc.Base64,a=m.algo.EvpKDF,o=t.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,s){return("string"==typeof n?p:_).encrypt(e,t,n,s)},decrypt:function(t,n,s){return("string"==typeof n?p:_).decrypt(e,t,n,s)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=m.mode={},c=function(e,t,n){var s=this._iv;s?this._iv=void 0:s=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=s[r]},l=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize;c.call(this,e,t,s),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize,r=e.slice(t,t+s);n.decryptBlock(e,t),c.call(this,e,t,s),this._prevBlock=r}}),u=u.CBC=l,l=(m.pad={}).Pkcs7={pad:function(e,t){for(var n,r=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,i=[],a=0;a<n;a+=4)i.push(r);n=s.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:u,padding:l}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),_=(u=(m.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,s){s=this.cfg.extend(s);var r=e.createEncryptor(n,s);return t=r.finalize(t),r=r.cfg,d.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,n,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(n,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),m=(m.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=s.random(8)),e=a.create({keySize:t+n}).compute(e,r),n=s.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},p=t.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:m}),encrypt:function(e,t,n,s){return n=(s=this.cfg.extend(s)).kdf.execute(n,e.keySize,e.ivSize),s.iv=n.iv,(e=_.encrypt.call(this,e,t,n.key,s)).mixIn(n),e},decrypt:function(e,t,n,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),n=s.kdf.execute(n,e.keySize,e.ivSize,t.salt),s.iv=n.iv,_.decrypt.call(this,e,t,n.key,s)}})}(),function(){for(var e=Ue,t=e.lib.BlockCipher,n=e.algo,s=[],r=[],i=[],a=[],o=[],u=[],c=[],l=[],d=[],_=[],m=[],p=0;256>p;p++)m[p]=128>p?p<<1:p<<1^283;var h=0,g=0;for(p=0;256>p;p++){var f=(f=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&f^99;s[h]=f,r[f]=h;var w=m[h],q=m[w],y=m[q],v=257*m[f]^16843008*f;i[h]=v<<24|v>>>8,a[h]=v<<16|v>>>16,o[h]=v<<8|v>>>24,u[h]=v,v=16843009*y^65537*q^257*w^16843008*h,c[f]=v<<24|v>>>8,l[f]=v<<16|v>>>16,d[f]=v<<8|v>>>24,_[f]=v,h?(h=w^m[m[m[y^w]]],g^=m[m[g]]):h=g=1}var b=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],i=0;i<n;i++)if(i<t)r[i]=e[i];else{var a=r[i-1];i%t?6<t&&4==i%t&&(a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a]):(a=s[(a=a<<8|a>>>24)>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a],a^=b[i/t|0]<<24),r[i]=r[i-t]^a}for(e=this._invKeySchedule=[],t=0;t<n;t++)i=n-t,a=t%4?r[i]:r[i-4],e[t]=4>t||4>=i?a:c[s[a>>>24]]^l[s[a>>>16&255]]^d[s[a>>>8&255]]^_[s[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,o,u,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,l,d,_,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,s,r,i,a,o){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],_=e[t+3]^n[3],m=4,p=1;p<u;p++){var h=s[c>>>24]^r[l>>>16&255]^i[d>>>8&255]^a[255&_]^n[m++],g=s[l>>>24]^r[d>>>16&255]^i[_>>>8&255]^a[255&c]^n[m++],f=s[d>>>24]^r[_>>>16&255]^i[c>>>8&255]^a[255&l]^n[m++];_=s[_>>>24]^r[c>>>16&255]^i[l>>>8&255]^a[255&d]^n[m++],c=h,l=g,d=f}h=(o[c>>>24]<<24|o[l>>>16&255]<<16|o[d>>>8&255]<<8|o[255&_])^n[m++],g=(o[l>>>24]<<24|o[d>>>16&255]<<16|o[_>>>8&255]<<8|o[255&c])^n[m++],f=(o[d>>>24]<<24|o[_>>>16&255]<<16|o[c>>>8&255]<<8|o[255&l])^n[m++],_=(o[_>>>24]<<24|o[c>>>16&255]<<16|o[l>>>8&255]<<8|o[255&d])^n[m++],e[t]=h,e[t+1]=g,e[t+2]=f,e[t+3]=_},keySize:8});e.AES=t._createHelper(n)}();var Qe=Ue,Ye={stringify:function(e){var t={ct:e.ciphertext.toString(Qe.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),n=Qe.lib.CipherParams.create({ciphertext:Qe.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=Qe.enc.Hex.parse(t.iv)),t.s&&(n.salt=Qe.enc.Hex.parse(t.s)),n}};var $e=e=>{let t="";if(!e.type)return t;if(!e.marked||"undefined"==e.marked)return t;switch(e.type){case"truefalse":case"single":case"survey":t=e.options[parseInt(e.marked)];break;case"multiple":if(t="",(n=e.marked.split(",")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])]+(s+1<n.length?" , ":"");break;case"sort":case"match":if((n=e.marked.split(",")).length)for(let s=0;s<n.length;s++)"undefined"!==e.original_options[parseInt(n[s])-1]&&null!=e.original_options[parseInt(n[s])-1]&&""!=e.original_options[parseInt(n[s])-1]||(e.original_options[parseInt(n[s])-1]="____"),t+=e.original_options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"select":if(t="",(n=e.marked.split("|")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])]+(s+1<n.length?" , ":"");break;case"fillblank":case"text":var n;if(t="",(n=e.marked.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"");break;case"largetext":case"smalltext":t=e.marked}return t};var Ke=e=>{let t="";if(!e.type)return"";switch(e.type){case"truefalse":t=e.correct?window.wplms_course_data.translations.true:window.wplms_course_data.translations.false;break;case"single":case"survey":t=e.options[parseInt(e.correct)-1];break;case"multiple":if(t="",(n=e.correct.split(",")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"sort":case"match":if(t="",(n=e.correct.split(",")).length)for(let s=0;s<n.length;s++)t+=e.original_options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"select":if(t="",(n=e.correct.split("|")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"fillblank":case"text":case"largetext":case"smalltext":var n;if(t="",(n=e.correct.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"")}return t};function Ve(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Ge=(e,t=null,n=null,s=null,r=!0)=>{s&&(s=parseFloat(s)),n||(s=null);let i=0,a=[],o=0;e.user_marks=0;let u=0,c=null;Ve(e.correct)||(c=JSON.parse(Qe.AES.decrypt(e.correct,e.key,{format:Ye}).toString(Qe.enc.Utf8))),e.correct=c;let l=null;switch(e.hasOwnProperty("marked_answer")&&(l=e.marked_answer),e.type){case"truefalse":e.marked=l,e.correct=parseInt(c),l==c?(e.user_marks=e.marks,i=1):e.user_marks=0,a.push(c);break;case"single":e.marked=l,l==c-1?(e.user_marks=e.marks,i=1):e.user_marks=0,a.push(c-1);break;case"multiple":Ve(l)&&(l=[]);var d=l;e.marked=l.join(",").slice();var _=c.split(",");if(a=_,t){if(d.length)for(let e=0;e<d.length;e++){let t=d[e]+1;t=t.toString(),-1!==_.indexOf(t)?o++:u++}i=o/_.length,e.user_marks=Math.round(e.marks*i*100)/100}else if(d.length==_.length)for(let t=0;t<d.length;t++){e.user_marks=e.marks,i=1;let n=d[t]+1;if(n=n.toString(),-1==_.indexOf(n)){e.user_marks=0,i=0;break}}break;case"match":case"sort":Ve(l)&&(l=[]),e.marked=l.join(",").slice();let n=l,s=c.split(","),r=0;if(n&&n.length){for(let t=0;t<n.length;t++){e.user_marks=e.marks,i=1;let c="";Ve(n[t])||(c=n[t].toString()),s[t]!=c?(i&&(e.user_marks=0,i=0,r=1),u++):(o++,a.push(t))}t?(i=o/s.length,e.user_marks=Math.round(e.marks*i*100)/100):r&&(e.user_marks=0,i=0)}break;case"fillblank":Ve(l)&&(l=[]),l.map((e,t)=>{l[t]=e.toLowerCase()}),e.marked=l.join("|").slice(),c=c.toLowerCase();let m=c.split("|");if(e.user_marks=0,l.length){e.user_marks=e.marks,i=1;for(let t=0;t<l.length;t++){let n="";Ve(l[t])||(n=l[t].toString());let s=[];Ve(m[t])||Array.isArray(m[t])||(s=m[t].split(",")),-1==s.indexOf(n)?(i&&(e.user_marks=0,i=0),u++):(o++,a.push(t))}t?(i=o/m.length,e.user_marks=Math.round(e.marks*i*100)/100):l.length!==m.length&&(e.user_marks=0,i=0)}break;case"select":Ve(l)&&(l=[]),e.marked=l.join("|").slice();let p=c.split("|");if(e.user_marks=0,l&&l.length){e.user_marks=e.marks,i=1;for(let t=0;t<l.length;t++){let n="";n=(parseInt(l[t])+1).toString(),n!=p[t]?(i&&(e.user_marks=0,i=0),u++):(o++,a.push(t))}t?(i=o/p.length,e.user_marks=Math.round(e.marks*i*100)/100):l.length!==p.length&&(e.user_marks=0,i=0)}break;case"smalltext":case"largetext":e.marked=l,l&&c&&l.toLowerCase()==c.toLowerCase()?(e.user_marks=e.marks,i=1):e.user_marks=0}if(!Ve(l)&&s&&(t&&u>0?e.user_marks=e.user_marks-u*s:i||(e.user_marks=e.user_marks-s)),e.auto||r||(e.user_marks=0,e.show_correct_answer=0),a&&a.length)for(var m=a.length-1;m>=0;m--)"multiple"==e.type?a[m]=parseInt(a[m]-1):a[m]=parseInt(a[m]);return e.correct_indexes=a,e.auto&&(e.usercorrect=i,e.attempted=!0),e.marked=$e(e),e.correct=Ke(e),e};const{createElement:Ze,render:et,useState:tt,useEffect:nt,Fragment:st,RawHTML:rt}=wp.element;var it=e=>{const[t,n]=tt({}),[s,r]=tt(!1);nt(()=>{n(e.question),setTimeout(()=>{r(!0)},200)},[]);let i="incorrect",a="checked_answer incorrect";return t.hasOwnProperty("user_marks")&&t.user_marks&&parseFloat(t.user_marks)>0&&(i="correct",a="checked_answer correct"),Ze(st,null,t.show_correct_answer&&void 0!==t.correct&&t.correct.length?Ze("div",{className:a},Ze("strong",null,window.wplms_course_data.translations.correct_answer,Ze(rt,null,t.correct))):"",Ze("div",{className:s?"question_wrapper loaded":"question_wrapper"},Ze("div",{className:"result"},Ze("div",{className:i},Ze("span",null),Ze("strong",null,t.user_marks)))))};const{createElement:at,render:ot,useState:ut,useEffect:ct,Fragment:lt}=wp.element;const{createElement:dt,render:_t,useState:mt,useEffect:pt,Fragment:ht}=wp.element;var gt=e=>{const[t,n]=mt({}),[s,r]=mt([]);pt(()=>{n(e.quiz),r(e.currentQuestions)},[e.quiz,e.currentQuestions]);let i=[];if(t.hasOwnProperty("meta")&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&(i=t.meta.questions),i.length)if(null!==e.filter)switch(e.filter){case"wrong":i=i.filter(e=>!e.hasOwnProperty("user_marks")||!e.user_marks||parseFloat(e.user_marks)<=0);break;case"correct":i=i.filter(e=>e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0);break;case"bookmarked":i=i.filter(t=>e.bookMarked.indexOf(t.id)>-1)}else i=t.meta.questions;return dt("div",{className:""},dt("div",{class:t&&t.meta&&t.meta.questions&&t.meta.questions.length>=10?"timeline_wrapper question_numbers":"timeline_wrapper"},dt("ul",null,t&&t.meta&&t.meta.questions&&t.meta.questions.length?i.map((n,i)=>{let a="";return e.bookMarked.indexOf(n.id)>-1&&(a+=" bookmarked"),("undefined"!=n.marked_answer&&null!=n.marked_answer||Array.isArray(n.marked_answer)&&n.marked_answer.length)&&(a+=" done",n.hasOwnProperty("attempted")&&n.attempted&&(n.hasOwnProperty("user_marks")&&n.user_marks&&parseFloat(n.user_marks)>0?a+=" correct":a+=" incorrect")),-1!==s.indexOf(i)&&(a+=" active"),dt("li",{className:a,"data-number":window.wplms_course_data.translations.question_prefix+(i+1)},dt("span",{onClick:n=>{((n,i,a)=>{n.preventDefault();let o=[...s],u=[];if(t.question_number&&"undefined"!=t.question_number&&t.question_number>0){if(-1!==o.indexOf(a))return;let e=Math.ceil((a+1)/t.question_number),n=e*t.question_number-t.question_number,s=e*t.question_number;for(let e=n;e<s;e++)u.push(e);r(u)}e.update(u,"show")})(n,0,i)}},n.marks))}):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length?dt("span",{className:"hide_questions",onClick:e.hideQuestions},dt("span",{class:"vicon vicon-angle-double-left"}),dt("span",null,window.wplms_course_data.translations.hide_questions)):"")))};const{createElement:ft,render:wt,useState:qt,useEffect:yt,Fragment:vt}=wp.element;const{createElement:bt,render:kt,useState:xt,useEffect:zt,Fragment:Nt}=wp.element;var St=e=>{const[t,n]=xt({}),[s,r]=xt([]),[i,a]=xt(1);zt(()=>{if(n(e.quiz),r(e.currentQuestions),e.currentQuestions.length){let t=Math.ceil((e.currentQuestions[0]+1)/e.quiz.question_number);a(t)}const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js",t.async=!0,t.onload=()=>{document.dispatchEvent(new Event("VibeBP_Editor_Content"))},document.body.appendChild(t)},[e.quiz,e.currentQuestions]),zt(()=>{n(e.quiz),o(null,1)},[e.filter]),zt(()=>{"bookmarked"==e.filter&&e.questions.length&&s.length&&e.questions.length<=s[s.length-1]&&o(null,e.questions.length)},[e.bookMarked]);const o=(n,s)=>{if(n&&n.preventDefault(),i===s)return;let o=[],u=s*t.question_number-t.question_number,c=s*t.question_number;for(let e=u;e<c;e++)o.push(e);r(o),e.update(o,"show"),a(s)},u=(n=null,a)=>{n&&n.preventDefault();let o=[...s],u=[];if(t.question_number&&"undefined"!=t.question_number&&t.question_number>0)if(a>0){let n;n=t.question_number+o[o.length]>e.questions.length?e.questions.length:o[o.length-1]+t.question_number+1;for(let e=o[o.length-1]+1;e<n;e++)u.push(e);let s=i;s++,r(u)}else{for(let e=o[0]-1;e>=o[0]-t.question_number;e--)u.unshift(e);let e=i;e--,r(u)}e.update(u,"show")};return t&&t.meta&&e.questions&&e.questions.length?bt("div",{class:"quiz_pagination_wrapper buttons has-addons"},e.questions[s[0]-1]&&"undefined"!=e.questions[s[0]-1]?bt("span",{href:"#",className:"button ques_link left prevq",onClick:e=>{u(e,-1)}},bt("i",{className:"vicon vicon-angle-left","aria-hidden":"true"})):bt("span",{href:"#",className:"button ques_link left prevq faded"},bt("i",{className:"vicon vicon-angle-left","aria-hidden":"true"})),(()=>{let n=Math.ceil(e.questions.length/t.question_number),s=n,r=[],a=0;if(n>1)for(;n;)if(n){let e=n;i==e?r.unshift(bt("span",{className:"button active",onClick:t=>{o(t,e)}},n)):(i-1>=1||i+1<=s)&&(i-1==e||i+1==e||1==e||e==s?r.unshift(bt("span",{className:"button",onClick:t=>{o(t,e)}},n)):a<2&&(r.unshift(bt("span",{className:"button"},"...")),a++)),n--}return r})(),e.questions[s[s.length-1]+1]&&"undefined"!=e.questions[s[s.length-1]+1]?bt("span",{href:"#",className:"button ques_link right nextq",onClick:e=>{u(e,1)}},bt("i",{className:"vicon vicon-angle-right","aria-hidden":"true"})):bt("span",{href:"#",className:"button ques_link right nextq faded"},bt("i",{className:"vicon vicon-angle-right","aria-hidden":"true"}))):""};const{createElement:Ot,render:Pt,useState:Et,useEffect:It,Fragment:Mt,RawHTML:Ct}=wp.element;var Ft=e=>Ot(Mt,null,e.active?Ot("div",{className:"confirmpopup_wrapper"},Ot("div",{className:"confirmpopup_content"},Ot("div",{dangerouslySetInnerHTML:{__html:e.content}}),Ot("div",{className:"buttons_wrapper"},Ot("span",{className:"button",onClick:t=>{e.yesfunction,e.update(e.type,"trigger")}},e.yes),Ot("span",{className:"button",onClick:t=>{e.update(e.type,"nottrigger")}},e.no)))):"");const{createElement:Bt,render:Dt,useState:Tt,useEffect:At,Fragment:Lt}=wp.element;function jt(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Ht=e=>{const[t,n]=Tt(e.quiz),[s,r]=Tt(!1),[i,a]=Tt(""),[o,u]=Tt({}),[c,l]=Tt({});return At(()=>{let t=0,n=0,s=0,r=0;if(e.quiz&&e.quiz.meta&&e.quiz.meta.questions&&(e.quiz.meta.questions.map((e,i)=>{e.hasOwnProperty("usercorrect")&&e.hasOwnProperty("marked_answer")&&!jt(e.marked_answer)?parseInt(e.usercorrect)>0?t++:n++:s++,r++}),l({correct:t,incorrect:n,ommitted:s}),""!=i)){let e={datasets:[{data:[t,n,s],backgroundColor:["#82c362","#dc6a6a","#5381ab"]}],labels:[window.wplms_course_data.translations.correct+" ("+t+") ("+Math.round(t/r*100)+"%)",window.wplms_course_data.translations.incorrect+" ("+n+") ("+Math.round(n/r*100)+"%)",window.wplms_course_data.translations.unattempted+" ("+s+") ("+Math.round(s/r*100)+"%)"]},a=new Chart(i,{type:"pie",data:e});u(a)}},[i]),Bt("div",{className:"quiz_stats_chart"},t&&t.meta&&t.meta.questions&&t.meta.questions.length&&t.submitted?Bt(Lt,null,o&&c?Bt("div",{className:"quiz_stats_chart_pie"},Bt("canvas",{ref:e=>{e&&""==i&&a(e)}})):"",Bt("div",{className:"question_stats_content_wrapper"},Bt("span",{className:"question_stats_content_heading"},window.wplms_course_data.translations.historical),Bt("div",{className:"question_stats_content"},t.meta.questions.map((e,t)=>{if(e.hasOwnProperty("correct_data"))return Bt("div",{className:e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0?"checked_answer correct":"checked_answer incorrect"},Bt("span",null,window.wplms_course_data.translations.q,t+1),Bt("span",null,e.correct_data,"%"))})),t.hasOwnProperty("tags_data")&&!jt(t.tags_data)?Bt(Lt,null,Bt("span",{className:"question_stats_content_heading"},window.wplms_course_data.translations.correct_by_tag),Bt("div",{className:"question_stats_content"},t.tags_data.map(e=>Bt("div",{className:"checked_answer correct"},Bt("span",{dangerouslySetInnerHTML:{__html:e.label}}),Bt("span",null,e.value,"%"))))):"")):"")};const{createElement:Rt,render:Jt,useState:Xt,useEffect:Wt,Fragment:Ut}=wp.element,{dispatch:Qt,select:Yt}=wp.data;var $t=e=>{const[t,n]=Xt([]),[s,r]=Xt(null),[i,a]=Xt(!0),[o,u]=Xt(null),[c,l]=Xt(!1);Wt(()=>{let e=Yt("vibebp").getToken();!function(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)?(d(e),r(e)):localforage.getItem("bp_login_token").then(t=>{e=t,d(e),r(e)})},[e.quizid]);const d=t=>{fetch(window.wplms_course_data.api_url+"/user/quiz/previousresults/"+e.quizid,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:t})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{e&&e.length&&n(e),a(!1)}).catch(e=>{a(!1),console.error("Uh oh, an error!",e),Qt("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})};return!i&&t.length?Rt("div",{className:"previous_results_wrapper"},Rt("h3",{className:"subtitle",onClick:()=>{l(!c)}},Rt("span",null,window.wplms_course_data.translations.previous_results)," ",Rt("span",{className:c?"vicon vicon-minus":"vicon vicon-plus"})),c?o&&o.hasOwnProperty("id")?Rt("div",{className:"single_quiz_result quiz_results"},Rt("span",{className:"vicon vicon-arrow-left",onClick:()=>{u(null)}}),Rt(Fn,{quizid:e.quizid,activity:o.id})):Rt("div",null,t.length?Rt("ul",{className:"quiz_results"},t.map(e=>Rt("li",{className:"result",onClick:()=>{u(e)}},Rt("span",{dangerouslySetInnerHTML:{__html:e.content}})))):Rt("div",{className:"vbp_message message"},window.wplms_course_data.translations.results_not_available)):""):""};const{createElement:Kt,render:Vt,useState:Gt,useEffect:Zt,Fragment:en}=wp.element;var tn=e=>e.quiz&&e.quiz.meta&&e.quiz.meta.questions&&e.quiz.meta.questions.length&&e.quiz.question_number<e.quiz.meta.questions.length?Kt("div",{className:"course_status"},Kt("div",{className:"incourse"},Kt("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:e.quiz&&e.quiz.content?e.quiz.content:""}}),Kt("div",{className:"quiz_questions_content"},Kt("h1",null,Kt("span",{className:"student_score"},e.quiz.marks+"/"+e.quiz.max_marks),e.quiz.quiz_passing_score?Kt("span",null,e.quiz.marks>e.quiz.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):""),e.quiz.meta.questions.map((t,n)=>{let s="",r="";return t.hasOwnProperty("show_hint")&&t.show_hint?(r="question_hint_content message show",s="question_hint show"):(r="question_hint_content message",s="question_hint"),Kt("div",{className:"question"},Kt("div",{className:"question_actions"},Kt("span",null,window.wplms_course_data.translations.question_full_prefix," ",n+1),Kt("div",null,Kt("span",{className:"marks"},Kt("i",{className:"vicon vicon-medall"}),t.marks))),e.renderSwitch(t,n),t.attempted&&t.show_correct_answer&&t.explanation.length?Kt(en,null,Kt("div",{className:"answers"},t.hasOwnProperty("correct")?Kt("div",{className:"correct_answer"},Kt("label",null,window.wplms_course_data.translations.correct_answer),Kt("div",{dangerouslySetInnerHTML:{__html:t.correct}})):"",t.hasOwnProperty("marked")&&t.marked?Kt("div",{className:"marked_answer"},Kt("label",null,window.wplms_course_data.translations.marked_answer),Kt("div",{dangerouslySetInnerHTML:{__html:t.marked}})):""),Kt("div",{className:"explanation"},Kt("strong",null,window.wplms_course_data.translations.question_explanation),Kt("div",{dangerouslySetInnerHTML:{__html:t.explanation}}))):"")}),Kt("style",null,'\n\t:root { --body: #fafafa; --highlight: #fff; --text: #475F7B; --bold: #394C62; --primary: #5A8DEE; --secondary: #475F7B; --success: #39DA8A; --primarycolor: #fff; --sidebar: #f4f4ff; --border: rgba(0,0,0,0.08); --darkborder: rgba(0,0,0,0.3); --blue: #5A8DEE; --indigo: #6610F2; --purple: #6F42C1; --pink: #E83E8C; --red: #FF5B5C; --orange: #FD7E14; --yellow: #FDAC41; --green: #39DA8A; --cyan: #00CFDD; --white: #FFFFFF; --gray: #475F7B; --gray-dark: #394C62; --info: #00CFDD; --warning: #FDAC41; --danger: #FF5B5C; --light: #A3AFBD; --dark: #394C62; --error: #ffe27e; --errortext: #725906; --shadow: rgba(0,0,0,0.2); } \n\t.correct_answer { margin-bottom: 1rem;border-bottom:1px solid rgba(0,0,0,0.1); } \n\t.course_status .incourse > * { margin: 0.5rem; } .course_status .incourse .quiz_pagination_wrapper { margin: 1.5rem 0; } .course_status .incourse .quiz_pagination_wrapper .buttons { align-items: center; display: flex; flex-wrap: wrap; justify-content: flex-start; } .course_status .incourse .quiz_pagination_wrapper .question .button { width: auto !important; display: inline-block !important; height: auto !important; } .course_status .incourse .quiz_pagination_wrapper > .button { background: var(--highlight) !important; color: var(--bold) !important; border: 1px solid var(--border) !important; min-width: auto !important; margin: 0; text-align: center; border-radius: 0; padding: 12px 0; width: 48px !important; } .course_status .incourse .quiz_pagination_wrapper > .button.right { float: none; } .course_status .incourse .quiz_pagination_wrapper > .button.active { background: var(--primary) !important; color: var(--primarycolor) !important; } .course_status .incourse .quiz_pagination_wrapper > .button.ques_link { min-with: auto !important; } .course_status .incourse .quiz_stats_chart { display: flex; flex-direction: row; flex-wrap: wrap; } .course_status .incourse .quiz_stats_chart .quiz_stats_chart_pie { width: 340px; } .course_status .incourse .quiz_stats_chart .question_stats_content_wrapper { width: calc(100% - 340px); margin-bottom: 1rem; } .course_status .incourse .quiz_stats_chart span.question_stats_content_heading { margin-bottom: 1rem; display: inline-block; } .course_status .incourse .quiz_stats_chart span.question_stats_content_heading:not(:nth-child(1)) { margin-top: 1.5rem; } .course_status .incourse .quiz_stats_chart .question_stats_content { display: flex; flex-wrap: wrap; margin: 0 -5px; } .course_status .incourse .quiz_stats_chart .question_stats_content > * { margin: 5px; } .course_status .incourse .question_wrapper { min-height: 100px; position: absolute; overflow: hidden; left: 0; top: 0; width: 100%; height: 100%; z-index: 99; text-align: center; transition: all 200ms ease-in; } .course_status .incourse .question_wrapper.loaded .result { transform: translateX(40%); } .course_status .incourse .question_wrapper.loaded .result .correct > span, .course_status .incourse .question_wrapper.loaded .result .incorrect > span { transform: scale(1); } .course_status .incourse .question_wrapper .fillblank_area { clear: none; display: inline-block; } .course_status .incourse .question_wrapper .result { transition: all 200ms ease-in; } .course_status .incourse .question_wrapper .incorrect, .course_status .incourse .question_wrapper .correct { display: inline-block; margin-top: 15px; padding: 10px; } .course_status .incourse .question_wrapper .incorrect strong { color: #ef614d; font-size: 48px; line-height: 64px; margin: 0 10px; font-weight: 600; } .course_status .incourse .question_wrapper .incorrect > span { background: #ef614d; } .course_status .incourse .question_wrapper .incorrect > span:before { content: "e646"; font-family: vicon; color: #fff; font-weight: 900; position: absolute; font-size: 3rem; top: 50%; left: 50%; transform: translate(-50%, -50%); } .course_status .incourse .question_wrapper .correct strong { font-size: 48px; line-height: 64px; margin: 0 10px; font-weight: 600; color: #75b733; } .course_status .incourse .question_wrapper .correct > span:before { content: "e64c"; font-family: vicon; color: #fff; font-weight: 900; position: absolute; font-size: 3rem; top: 50%; left: 50%; transform: translate(-50%, -50%); } .course_status .incourse .question_wrapper span { position: relative; width: 64px; height: 64px; float: left; border-radius: 50%; background: #75b733; display: block; padding: 30px; transform: scale(15); transition: all 200ms ease-in-out; } .course_status .incourse .question_wrapper span .correct > span:before { font-family: fonticon; top: 18px; left: 18px; content: "e038"; color: #FFF; font-size: 30px; line-height: 1; position: absolute; } .course_status .incourse .checked_answer { margin: 2.5rem 0 0; padding: 1rem; font-size: 1.2rem; color: var(--bold); border: 1px solid var(--border); background-color: var(--sidebar); border-radius: 2px; } .course_status .incourse .checked_answer.incorrect { background: #d8eec2; } .course_status .incourse .checked_answer.correct { background: #d8eec2; } .course_status .incourse .checked_answer span { white-space: nowrap; } .course_status .incourse .quiztimer { display: grid; justify-items: center; align-items: center; } .course_status .incourse .quiztimer .circle_timer { display: flex; flex-direction: row; } .course_status .incourse .quiztimer .circle_timer > span { display: flex; justify-content: center; flex-direction: column; } .course_status .incourse .quiztimer .circle_timer .react-progress-circle { display: flex; } .course_status .incourse .quiztimer .timer_amount, .course_status .incourse .quiztimer .timer_unit { color: var(--bold); line-height: 1em; display: grid; grid-template-columns: 1fr 5px 1fr; justify-items: center; } .course_status .incourse .quiztimer .timer_amount span:nth-child(n+4), .course_status .incourse .quiztimer .timer_amount span:nth-child(n+4), .course_status .incourse .quiztimer .timer_unit span:nth-child(n+4), .course_status .incourse .quiztimer .timer_unit span:nth-child(n+4) { display: none; } .course_status .incourse .quiztimer .timer_amount { font-size: 2rem; } .course_status .incourse .quiztimer .timer_amount span { margin: 0 5px; } .course_status .incourse .quiztimer .timer_unit { font-size: 11px; } .course_status .incourse .fillblank_area { clear: none; display: inline-block; } .course_status .incourse span.select_question_content { display: inline-block; } .course_status .incourse .question_content select { margin: 0 5px; } .course_status .incourse .droppable > div { border: 1px solid var(--border); padding: 1rem; cursor: move; } .course_status .incourse .droppable:hover > div { border-color: var(--primary); } .course_status .incourse .droppable.active { overflow-y: scroll; } .course_status .incourse .question .droppable, .course_status .incourse .match_options { touch-action: none; } .course_status .incourse .droppable > div + div { border-top: none; } .course_status .incourse .droppable .dragging { border: 1px solid #f5d01a; box-shadow: 0 0 6px #efc600; } .course_status .incourse .quiz_questions_content .question_actions { margin-top: 1rem; display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; align-items: center; font-size: 1.5rem; } .course_status .incourse .quiz_questions_content .question_actions span.button { cursor: pointer; padding: 0.2rem; font-size: 1.2rem; margin: 0; } .course_status .incourse .quiz_questions_content .question_actions > div { display: flex; flex-direction: row; } .course_status .incourse .quiz_questions_content .question_actions > div span { margin: 0 0.2rem; z-index: 11; } .course_status .incourse .quiz_questions_content .question_actions > div span:not(.marks) { cursor: pointer; } .course_status .incourse .quiz_questions_content .question .marks i.icon-check-5:before { content: "e63a"; font-family: vicon; font-weight: 400 !important; font-variant: normal !important; text-transform: none !important; speak: none; line-height: 1; margin: 5px; } .course_status .incourse .question .question_option p { display: inline-block; } .course_status .incourse .question_option { display: block; margin-bottom: 1rem; } .course_status .incourse .question_option label { margin-bottom: 0; } .course_status .incourse .question_option.radio + .radio { margin-left: 0; } .course_status .incourse .match_playground { display: grid; grid-template-columns: 1fr 1fr; justify-content: center; align-items: stretch; grid-gap: 1rem; margin: 1rem 0; } .course_status .incourse .match_playground .droppable { border: 1px solid rgba(0, 0, 0, 0.2); } .course_status .incourse .match_playground .match_options .match_option { border: 1px solid rgba(0, 0, 0, 0.08); padding: 2rem; } .course_status .incourse .match_playground .droppable { display: grid; grid-template-columns: 1fr; grid-gap: 10px; padding: 30px; justify-content: center; align-items: center; } .course_status .incourse .match_playground .droppable > div { border-top: 1px solid var(--border); } .course_status .incourse .match_playground .match_option { background: var(--border); } .course_status .incourse .match_playground .match_option .children > div { border: 1px solid var(--border); padding: 1rem; background: var(--highlight); } .course_status .incourse .quiz_questions_content { flex: 3 0 480px; max-width: 100%; } .course_status .incourse .quiz_questions_content .question_content { padding: 1rem 0; border-top: none; } .course_status .incourse .quiz_questions_content .question { position: relative; border-bottom: 1px solid rgba(0,0,0,0.1); } .course_status .incourse .quiz_questions_content .question .question_hint { cursor: pointer; margin-right: 5px; } .course_status .incourse .quiz_questions_content .question .question_hint:before { content: "e718"; font-family: vicon; font-size: 22px; } .course_status .incourse .quiz_questions_content .question .question_hint.show:before { content: "e646"; } .course_status .incourse .quiz_questions_content .question .question_hint span.question_hint_content { transform: scale(0); padding: 1rem; background: var(--sidebar); border-radius: 5px; margin: 1rem 0; opacity: 0; transition: 0.2s all; } .course_status .incourse .quiz_questions_content .question .question_hint span.question_hint_content.show { transform: scale(1); opacity: 1; } .course_status .incourse .quiz_questions_content .question .explanation { /* padding: 1rem; */ /* font-size: 1.2rem; */ border: 1px solid var(--border); background: var(--highlight); z-index: 99; position: relative; margin: 1rem 0; } .course_status .incourse .quiz_questions_content .question_wrapper.loaded .result { transform: translate(0, -24px) scale(0.75); } .course_status .incourse div.sort_options { touch-action: none; } .course_status .incourse .single-quiz .question .question_content:first-child { border-top: none; } .course_status .incourse .quiz_questions li > strong { display: block; margin: 5px 0; } .course_status .incourse .incoursequiz_details { display: flex; flex: 1 0 240px !important; max-width: 100%; flex-direction: column; justify-content: space-between; align-items: baseline; align-items: center; margin-bottom: 1.5rem; flex: 1; z-index: 999; padding: 0.5rem; position: sticky; top: 3rem; background: var(--highlight); bordeR: 1px solid var(--border); border-radius: 5px; align-items: center; transition: 0.5s all; margin: 1rem 0; } .course_status .incourse .incoursequiz_details > div { display: flex; flex-wrap: wrap; justify-content: space-between; margin: 0 -0.5rem; align-items: center; width: 100%; } .course_status .incourse .incoursequiz_details > div > * { margin: 0.5rem; } .course_status .incourse .incoursequiz_details > div strong { flex: 1; } .course_status .incourse .incoursequiz_details > div strong .student_score { font-size: 1.8rem; } .course_status .incourse .incoursequiz_details > div strong .student_quiz_status { opacity: 0.7; font-size: 75%; margin: 0 0.75rem; } .course_status .incourse .incoursequiz_details > div .show_questions { display: flex; align-items: center; } .course_status .incourse .incoursequiz_details > div .show_questions > span:not(.vicon) { font-size: 11px; opacity: 0.5; text-transform: uppercase; } .course_status .incourse .incoursequiz_details .incourse_quiz_button > a { flex: 1; margin: 0 1rem; } .course_status .incourse .incoursequiz_details .quiz_timeline { min-width: 160px; margin: 0; padding: 0; max-height: none; overflow: hidden; } .course_status .incourse .incoursequiz_details .quiz_timeline li.done > span { display: flex; align-items: center; flex-direction: row-reverse; } .course_status .incourse .incoursequiz_details .quiz_timeline li.done > span:before { position: relative; color: var(--primary); } .course_status .incourse .incoursequiz_details .quiz_timeline li.done.active > span:before { color: var(--primarycolor); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper { border: none; justify-content: center; align-items: center; display: flex; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul { display: flex; flex-wrap: wrap; margin: -0.25rem; font-size: 0.8rem; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li { margin: 0.25rem; padding: 5px; border-radius: 2px; border: none; display: flex; width: 32px; height: 24px; align-items: center; border: 1px solid var(--border); cursor: pointer; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.bookmarked { box-shadow: 0 2px 2px var(--shadow); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done { background: var(--border); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done > span:before { content: "e64c"; font-family: vicon; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done.correct { color: #fff; background: rgba(0, 128, 0, 0.5); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done.incorrect { color: #fff; background: rgba(255, 0, 0, 0.5); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.done.incorrect > span:before { content: "e646"; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li.active { background: var(--primary); color: var(--primarycolor); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul li > span { position: relative; width: 100%; text-align: center; margin: 0; height: auto; background: none; border-radius: 0; bordeR: none; top: auto; left: auto; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul > span { display: flex; align-items: center; margin: 0 0.5rem; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper > ul > span > span:not(.vicon) { font-size: 11px; opacity: 0.5; text-transform: uppercase; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper.question_numbers ul > li { width: auto !important; white-space: nowrap; } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper.question_numbers ul > li:before { content: attr(data-number); } .course_status .incourse .incoursequiz_details .quiz_timeline .timeline_wrapper.question_numbers ul > li > span { padding: 0 5px; background: var(--border); margin: -2px -2px -2px 5px; border-radius: 2px; } .course_status .incourse span.question_hint_content { transform: scale(0); padding: 1rem; background: var(--sidebar); border-radius: 5px; margin: 1rem 0; opacity: 0; transition: 0.2s all; } .course_status .incourse span.question_hint_content.show { transform: scale(1); opacity: 1; } .course_status .incourse .question_option .radio > input[type=radio] + label, .course_status .incourse .question_option .checkbox > input[type=radio] + label { display: flex; align-items: center; } .course_status .incourse div#unit.quiz_title h1 { width: 50%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .course_status .incourse div#unit.quiz_title h5 { font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .course_status .incourse .loading_quiz.disabled { display: none; } .course_status .incourse .loading_quiz { position: fixed !important; width: 0%; height: 0%; left: 50%; top: 50%; z-index: 9999; } .course_status .incourse .question_correct { border: 2px solid rgba(0, 128, 0, 0.5) !important; padding: 5px; border-radius: 5px; } .course_status .incourse .question_incorrect { border: 2px solid rgba(255, 0, 0, 0.5) !important; padding: 5px; border-radius: 5px; } .course_status .incourse .quiz_questions_content { flex: 3 0 640px; max-width: 100%; } .course_status .incourse .quiz_questions_content .question_option.radio label > div, .course_status .incourse .quiz_questions_content .question_option.checkbox label > div { display: inline-block; } .course_status .incourse .quiz_questions_content .question_option.radio label > div > p, .course_status .incourse .quiz_questions_content .question_option.checkbox label > div > p { margin: 0; } .course_status .incourse .incourse_quiz_button { display: flex; flex-direction: column; justify-content: space-around; align-items: center; } .course_status .incourse .incourse_quiz_button a { text-align: center; width: 100%; margin: 0.25rem !important; } .course_status .incourse .quiz_retake { display: flex; align-items: center; flex-wrap: wrap; margin: 0 -0.25rem; } .course_status .incourse .quiz_retake > * { flex: 1 0 180px; margin: 0.25rem; } .course_status .incourse .confirmpopup_wrapper { position: fixed; top: 0; left: 0; height: 100vh; width: 100vw; background: rgba(0, 0, 0, 0.5); z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; } .course_status .incourse .confirmpopup_wrapper .confirmpopup_content { padding: 1rem; background: var(--highlight); border-radius: 5px; min-width: 50%; } .course_status .incourse span.question_stats_content_heading { margin-bottom: 1rem; display: inline-block; } .course_status .incourse span.question_stats_content_heading:not(:nth-child(1)) { margin-top: 1.5rem; } .course_status .incourse .question_stats_content .checked_answer span { text-transform: capitalize; } .course_status .incourse .question_stats_content { display: flex; flex-wrap: wrap; margin: 0 -5px; align-items: start; } .course_status .incourse .question_stats_content > * { margin: 5px; } .course_status .incourse .question_stats_content span { margin: 5px; } .course_status .incourse .question_stats_content .checked_answer { text-align: center; } .course_status .incourse .quiz_stats_chart { display: flex; flex-direction: row; flex-wrap: wrap; } .course_status .incourse .quiz_stats_chart .quiz_stats_chart_pie { flex: 1 0 240px; } .course_status .incourse .quiz_stats_chart .question_stats_content_wrapper { flex: 2 0 480px; } .course_content_content { display: inline-block; width: 100%; padding: 0.75rem 1rem 0; } .course_content_content h2 { font-size: 2.5rem; font-weight: 800; margin: 0 0 1.5rem !important; } .course_content_content .video_wrapper { z-index: 11; } .course_content_content .unit_attachments { background: var(--border); padding: 1rem; margin: 1rem 0; border-radius: 5px; display: flex; flex-direction: column; } .course_content_content .unit_attachments h3 { font-weight: 600; margin-bottom: 0.5rem; } .course_content_content .unit_attachments .attachment { width: 100%; display: flex; flex-direction: row; justify-content: space-between; align-items: center; margin: 0.5rem 0; } .course_content_content .unit_attachments .attachment > span { display: flex; align-items: center; margin: 0 -5px; } .course_content_content .unit_attachments .attachment > span span.attachment_icon > svg { width: 32px; fill: var(--text); color: var(--text); } .course_content_content .unit_attachments .attachment > span > * { margin: 0 5px; } .course_content_content .unit_assignments { background: var(--border); padding: 1rem; margin: 1rem 0; border-radius: 5px; display: flex; flex-direction: column; } .course_content_content .unit_assignments h3 { font-weight: 600; margin-bottom: 0.5rem; } .course_content_content .unit_assignments .assignment .assignment_heading { display: flex; justify-content: space-between; padding: 5px 0; } .course_content_content .pratice_questions { margin: 1rem 0; } .course_content_content .pratice_questions .incourse { margin: 1rem 0; background: var(--sidebar); padding: 1rem 1.5rem; border-radius: 8px; } .course_content_content .pratice_questions .incourse .quiz_questions_content { margin: 0; } .finish-course-content { display: flex; flex-direction: column; justify-content: center; text-align: center; padding-top: 60px; } .finish-course-content h1 { font-size: 3rem; } .finish-course-content h2 { font-size: 2.5rem; } .finish-course-content h3 { font-size: 1.8rem; } .finish-course-content .post_completion_message { flex: 1; max-height: calc(100vh - 550px); overflow-y: auto; min-height: 100px; } .finish-course-content .vibe_editor_rich_text { text-align: start; } .finish-course-content .completion_message { font-size: 1.2rem; margin: 1rem 0; } .finish-course-content .awards { display: flex; align-items: baseline; justify-content: center; margin: 1.5rem 0; } .finish-course-content .awards .certificate svg, .finish-course-content .awards .badge img { fill: var(--light); width: 64px; height: 64px; border-radius: 5px; } .finish-course-content .awards > * { margin: 1rem 0.5rem; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #fafafa; padding: 1rem; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); border-radius: 5px; width: 128px; transition: all 0.2s; font-size: 1rem; font-weight: 600; } .finish-course-content .awards > *:hover { box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); transform: translateY(-2px); } .finish-course-content .finished_percentage { display: flex; align-items: center; justify-content: center; margin: 0; position: absolute; top: -90px; right: calc(50% - 90px); } .finish-course-content .finished_percentage > span { width: 180px; height: 180px; font-weight: 800; display: flex; flex-direction: column; line-height: 0; align-items: center; justify-content: center; border-radius: 50%; font-size: 1.6rem; font-weight: 600; color: var(--primarycolor); background: var(--primary); box-shadow: 0 -1px 1rem var(--highlight); } .finish-course-content .finished_percentage > span:before { position: absolute; content: \'\'; width: 100%; height: 100%; border: 10px solid #fff; box-shadow: inset 0 1px 10px rgba(0, 0, 0, 0.4); border-radius: 50%; z-index: 0; } .finish-course-content .finished_percentage > span > span { line-height: 1; font-size: 11px; display: flex; flex-wrap: wrap; letter-spacing: 1px; position: relative; font-weight: 800; font-size: 11px; letter-spacing: 2px; } .finish-course-content .finished_percentage > span > span + span { width: 80%; } .finish-course-content .finished_percentage > span > span strong { font-size: 4rem; color: var(--primarycolor); margin-left: -0.5rem; } .finish-course-content .finished_percentage > span > span strong + span { font-size: 1rem; position: absolute; margin-top: 1rem; right: -1rem; top: 0; } .quiz_bar { background: var(--highlight); padding: 0.5rem; margin: 1rem 0; align-items: center; display: inline-block; width: 100%; } .quiz_pagination_wrapper .faded { opacity: 0.45; } .quiztimer { display: flex; justify-content: center; } .quiztimer .c100.big { font-size: 10rem; } .quiztimer .c100.big > span { font-size: 1.5rem; display: flex; flex-direction: column; line-height: 1.5; } .quiztimer .c100.big > span span.timer_amount, .quiztimer .c100.big > span span.timer_unit { display: flex; align-items: center; justify-content: center; } .quiztimer .c100.big > span span.timer_amount > span + span, .quiztimer .c100.big > span span.timer_unit > span + span { margin-left: 2px; } .quiztimer .c100.big > span > span.timer_unit { font-size: 0.7rem; opacity: 0.5; } .quiztimer .c100.big:after { border: 1px dashed rgba(0, 0, 0, 0.05); } .answers { margin: 0.5rem 0; }\n\t')))):"";const{createElement:nn,render:sn}=wp.element;var rn=e=>nn("div",{class:"lds-ellipsis"},nn("div",null),nn("div",null),nn("div",null),nn("div",null));const{Component:an,createElement:on,render:un,useState:cn,useEffect:ln,Fragment:dn}=wp.element;var _n=e=>{const[t,n]=cn(e.duration),[s,r]=cn({d:0,h:0,m:0,s:0});ln(()=>{if(e.start){setTimeout(()=>{let s=t-1;s<=-1?e.update(e.quiz_id,"expired"):s>=0&&(n(s),i())},1e3)}else n(e.duration),i()},[t,e.start,e.duration]);const i=()=>{let e={...s},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};return on("div",{className:"driptimer_wrapper"},on("div",{className:"driptimer"},on("span",{className:"timer_amount"},s.d?on(dn,null,on("span",null,s.d),on("span",null,":")):"",s.h?on(dn,null,on("span",null,s.h),on("span",null,":")):"",s.m?on(dn,null,on("span",null,s.m),on("span",null,":")):"",on("span",null,s.s)),on("span",{className:"timer_unit"},s.d?on(dn,null,on("span",null,window.wplms_course_data.translations.days),on("span",null)):"",s.h?on(dn,null,on("span",null,window.wplms_course_data.translations.hours),on("span",null)):"",s.m?on(dn,null,on("span",null,window.wplms_course_data.translations.minutes),on("span",null)):"",on("span",null,window.wplms_course_data.translations.seconds))))};const{createElement:mn,useState:pn,useEffect:hn,Fragment:gn,render:fn,useRef:wn}=wp.element,{dispatch:qn,select:yn}=wp.data;const{createElement:vn,render:bn,useState:kn,useEffect:xn,useCallback:zn,useRef:Nn,Fragment:Sn,useLayoutEffect:On}=wp.element,{dispatch:Pn,select:En}=wp.data;function In(e){if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Mn(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Cn(e){try{JSON.parse(e)}catch(e){return!1}return!0}var Fn=e=>{const[t,n]=kn({}),[s,r]=kn("quiz"),[i,a]=kn([]),o=Nn(null),[u,c]=kn({}),[l,d]=kn("up"),[_,m]=kn(!1),[p,g]=kn(!1),[f,w]=kn(!1),[q,y]=kn(!0),[v,b]=kn(null),[k,x]=kn(null),[z,N]=kn([]),[S,O]=kn([]),[P,I]=kn(!1),[M,C]=kn("");xn(()=>{let t=En("vibebp").getToken();Mn(t)?localforage.getItem("bp_login_token").then(e=>{t=e,F(t),b(t)}):(F(t),b(t)),document.addEventListener("wplms_answer_question_type",({detail:e})=>{B(e.question,e.index,"changed")}),localforage.getItem("bookmarked_questions_"+e.quizid).then(e=>{e&&e.length&&N(JSON.parse(e))})},[e.quizid]),xn(()=>{e&&e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&t.hasOwnProperty("id")&&(localStorage.setItem("vibequiz_"+t.id,JSON.stringify(t)),document.querySelector(".start_quiz_button")&&document.querySelector(".start_quiz_button").remove()),document.dispatchEvent(new Event("VibeBP_Editor_Content"))},[t]);const F=(t=null,s=null)=>{t||(t=v),r("quiz");let i={token:t};if(e.hasOwnProperty("activity")&&e.activity&&(i.activity=e.activity),e.hasOwnProperty("course")&&e.course&&(i.course=e.course),e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!t){let s=localStorage.getItem("vibequiz_"+e.quizid),i="";if(void 0!==s&&s){if(i=JSON.parse(s),i){if(x(null),i.hasOwnProperty("drip_message"))n(i);else if(i.meta&&i.meta.questions){let s=0,r=0;if("object"==typeof i.meta.questions&&!Array.isArray(i.meta.questions)){let e=[];Object.keys(i.meta.questions).map(t=>{"object"==typeof i.meta.questions[t]&&(i.meta.questions[t].id=t,e.push(i.meta.questions[t]),e.id=t)}),i.meta.questions=e}i.meta.questions.map((e,t)=>{if(e.raw)i.meta.questions[t]=e.raw;else{i.meta.questions[t].show=!1;let n=localStorage.getItem(e.id);!In(n)&&Mn(e.marked_answer)&&(Cn(n)?i.meta.questions[t].marked_answer=JSON.parse(n):i.meta.questions[t].marked_answer=n)}s+=parseFloat(e.user_marks),r+=parseInt(e.marks)}),Number.isInteger(s)||(s=s.toFixed(2)),i.marks=s,i.max_marks=r,i.question_number=parseInt(i.question_number);let o=[];if(i.question_number&&i.question_number>0)for(let e=0;e<i.question_number;e++)o.push(e);if(a(o),e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!t){let t=localStorage.getItem("quiz_expiry_"+e.quizid);if(void 0!==t&&t){let e=Math.floor((new Date).getTime()/1e3);e>=parseInt(t)?L(i):i.remaining=parseInt(t)-e}let n=localStorage.getItem("quiz_retakes_"+e.quizid);if(n&&(n=parseInt(n),i.hasOwnProperty("meta")||(i.meta={}),i.meta.hasOwnProperty("retakes"))){let e=parseInt(i.meta.retakes)-n;e<-1&&(e=0),i.meta.retakes=e}}n(i)}var o=document.createEvent("Event");o.initEvent("unit_traverse",!1,!0),document.querySelector(".unit_content")&&document.querySelector(".unit_content")&&document.querySelector(".unit_content").dispatchEvent(o)}else console.log(i);return void r(!1)}}let u=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!t&&(u=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),e.hasOwnProperty("force")&&e.force&&(u.includes("?client_id")?u+="&force":u+="?force"),s&&!u.includes("force")&&(u.includes("?")?u+="&force":u+="?force"),i.hasOwnProperty("activity")&&i.activity&&(/\?/.test(u)?u+="&activity="+i.activity:u+="?activity="+i.activity),fetch(u,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(i)}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(s=>{if(s){if(x(null),s.hasOwnProperty("drip_message"))n(s);else if(s.meta&&s.meta.questions){let t=0,r=0;if("object"==typeof s.meta.questions&&!Array.isArray(s.meta.questions)){let e=[];Object.keys(s.meta.questions).map(t=>{"object"==typeof s.meta.questions[t]&&(s.meta.questions[t].id=t,e.push(s.meta.questions[t]),e.id=t)}),s.meta.questions=e}s.meta.questions.map((e,n)=>{if(e.raw)s.meta.questions[n]=e.raw;else{s.meta.questions[n].show=!1;let t=localStorage.getItem(e.id);!In(t)&&Mn(e.marked_answer)&&(Cn(t)?s.meta.questions[n].marked_answer=JSON.parse(t):s.meta.questions[n].marked_answer=t);try{JSON.parse(e.correct),e.attempted&&(s.meta.questions[n].correct=JSON.parse(Qe.AES.decrypt(e.correct,e.key,{format:Ye}).toString(Qe.enc.Utf8)),s.meta.questions[n].correct=Ke(e))}catch(e){console.log(e)}}t+=parseFloat(e.marks),r+=parseInt(e.max_marks)}),Number.isInteger(t)||(t=t.toFixed(2)),isNaN(r)||(s.marks=t,s.max_marks=r),s.question_number=parseInt(s.question_number);let i=[];if(s.question_number&&s.question_number>0)for(let e=0;e<s.question_number;e++)i.push(e);a(i);let o=Math.floor((new Date).getTime()/1e3);s.hasOwnProperty("expiry")&&s.expiry>0&&(s.expiry>o?s.remaining=parseInt(s.expiry)-o:s.remaining=0);let u=localStorage.getItem("quiz_retakes_"+e.quizid);if(u&&(u=parseInt(u),s.hasOwnProperty("meta")||(s.meta={}),s.meta.hasOwnProperty("retakes"))){let e=parseInt(s.meta.retakes)-u;e<-1&&(e=0),s.meta.retakes=e}n(s)}s.remaining&&s.remaining<=0&&L(s,t);var i=document.createEvent("Event");i.initEvent("unit_traverse",!1,!0),document.querySelector(".unit_content")&&document.querySelector(".unit_content")&&document.querySelector(".unit_content").dispatchEvent(i)}else console.log(s);r(!1)}).catch(e=>{r(!1),console.error("Uh oh, an error!",e),Pn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})},B=(e,s,r)=>{if("changed"==r){let r={...t};r.meta.questions[s]=e,n(r),Mn(e.marked_answer)?null==e.marked_answer&&localStorage.removeItem(e.id):"object"==typeof e.marked_answer||Array.isArray(e.marked_answer)?localStorage.setItem(e.id,JSON.stringify(e.marked_answer)):localStorage.setItem(e.id,e.marked_answer)}},T=(e,t)=>{"show"==t&&a(e)},A=()=>{r("start");let s={...t};if(s.start=!0,s.remaining&&s.remaining>0)r(!1),n(s);else{let t={quiz_id:s.id,token:v};if(e.hasOwnProperty("course")&&(t.course=e.course),s.hasOwnProperty("non_logged_in_quiz")&&s.non_logged_in_quiz&&(!v||e.hasOwnProperty("exported")&&e.exported))return r(!1),localStorage.setItem("quiz_expiry_"+s.id,Math.floor((new Date).getTime()/1e3)+s.meta.duration),n(s),void U(s);fetch(window.wplms_course_data.api_url+"/user/quiz/start?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(t)}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{r(!1),n(s),U(s);let t=window.wplms_course_data.api_url+"/student/quiz";X(t),e.hasOwnProperty("message")&&Pn("vibebp").addNotification({text:e.message})}).catch(e=>{r(!1),console.error("Uh oh, an error!",e),Pn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})}},L=(s=null,i=null)=>{N([]),localforage.removeItem("bookmarked_questions_"+e.quizid),s||(s=t),i||Mn(v)||(i=v),localStorage.removeItem("quiz_expiry_"+s.id),r("submit");let a={...s},o=0,u=0;if(a.meta&&a.meta.questions&&a.meta.questions.length)for(let e=0;e<a.meta.questions.length;e++)a.meta.questions[e].attempted||(a.meta.questions[e]=Ge(a.meta.questions[e],t.partial_marking,t.negative_marking,parseFloat(t.negative_marks),!1)),a.meta.questions[e].content=a.meta.questions[e].original_content,a.meta.questions[e].auto||(a.meta.questions[e].user_marks=0),o+=parseFloat(a.meta.questions[e].user_marks),u+=parseInt(a.meta.questions[e].marks),localStorage.removeItem(a.meta.questions[e].id);if(a.marks=o.toFixed(2),a.max_marks=u,(isNaN(a.max_marks)||a.max_marks<1)&&(a.max_marks=1),(isNaN(a.marks)||a.marks<1)&&(a.marks=0),e.hasOwnProperty("update")&&e.update("update_quiz_marks",{user_marks:a.marks,total_marks:a.max_marks}),a.hasOwnProperty("remaining")&&delete a.remaining,e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz)return a.submitted=!0,a.start=!1,n(a),void(e.hasOwnProperty("update")&&e.update("quizsubmitted"));fetch(window.wplms_course_data.api_url+"/user/submitresult?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({quiz_id:a.id,course_id:a.hasOwnProperty("course_id")?a.course_id:e.hasOwnProperty("course")?e.course:"",results:a.meta.questions,quiz:a,token:i})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(t=>{if(t){if(r(!1),a.submitted=!0,a.start=!1,t.check_results_url&&(a.check_results_url=t.check_results_url),t.hasOwnProperty("retakes")&&void 0!==t.retakes&&(a.hasOwnProperty("meta")&&void 0!==a.meta||(a.meta={}),a.meta.retakes=t.retakes),t.completion_message&&(a.meta.completion_message=t.completion_message),t.retake_html&&(a.retake_html=t.retake_html),a.meta&&a.meta.questions&&a.meta.questions.length&&!Mn(t.correct_data))for(let e=0;e<a.meta.questions.length;e++)t.correct_data.hasOwnProperty(a.meta.questions[e].id)&&(a.meta.questions[e].correct_data=t.correct_data[a.meta.questions[e].id]);t.hasOwnProperty("tags_data")&&(a.tags_data=t.tags_data),n(a);var s=document.createEvent("Event");if(s.initEvent("unit_traverse",!1,!0),a.hasOwnProperty("quiz_passing_score")&&a.quiz_passing_score?t.hasOwnProperty("continue")&&t.continue&&e.hasOwnProperty("update")&&e.update("quizsubmitted"):e.hasOwnProperty("update")&&e.update("quizsubmitted"),document.querySelector(".unit_content")&&document.querySelector(".unit_content")){document.querySelector(".unit_content").dispatchEvent(s);var i=new CustomEvent("react_quiz_submitted",{detail:{next_unit:t.next_unit}});document.dispatchEvent(i)}W(a);let o=window.wplms_course_data.api_url+"/user/quiz/previousresults/"+e.quizid;X(o,!0);let u=window.wplms_course_data.api_url+"/student/quiz";X(u);let c=`${window.wplms_course_data.api_url}/instructor/stats/${e.quizid}`;X(c);let l=`${window.wplms_course_data.api_url}/instructor/leaderboard/${e.quizid}`;X(l),t.hasOwnProperty("message")&&Pn("vibebp").addNotification({text:t.message})}}).catch(e=>{r(!1),console.error("Uh oh, an error!",e),Pn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})},j=(e,n)=>{switch(e.type){case"smalltext":return vn(E,{question:e,index:n,update:B});case"single":return vn(D,{question:e,index:n,update:B,quiz_id:t.id});case"select":return vn(R,{question:e,index:n,update:B,quiz_id:t.id});case"multiple":return vn(Y,{question:e,index:n,update:B,quiz_id:t.id});case"fillblank":return vn(ae,{question:e,index:n,update:B,quiz_id:t.id});case"sort":return vn(we,{question:e,index:n,update:B,quiz_id:t.id});case"match":return vn(Ie,{question:e,index:n,update:B,quiz_id:t.id});case"truefalse":return vn(Te,{question:e,index:n,update:B,quiz_id:t.id});case"largetext":return vn(We,{question:e,index:n,update:B,quiz_id:t.id});default:let s=1e3*Math.random();return document.dispatchEvent(new CustomEvent("wplms_load_question_type",{detail:{question:e,update:B,quiz_id:t.id,index:n,keyref:s}})),vn("div",{"data-q":e.id,className:e.type,"data-keyref":s})}},H=(e,n)=>{if("trigger"==n)switch(e){case"submit":L(t),g(!1),w(!1);break;case"start":A(),m(!1)}if("nottrigger"==n)switch(e){case"submit":g(!1),w(!1);break;case"start":m(!1)}},J=async()=>{if(!t.meta.questions.length)return!1;void 0===e.quizid&&(e.quizid=e.quiz.id),document.getElementById("quiz_results_"+e.quizid)&&document.getElementById("quiz_results_"+e.quizid).remove();const n=document.createElement("div");if(n.src=n.src,n.setAttribute("id","quiz_results_"+e.quizid),n.classList.add("quiz_results"),t.hasOwnProperty("title")){let e=document.createElement("meta"),n=document.createElement("meta");e.setAttribute("property","og:title");let s="";t.meta.auto&&(s=t.marks+"/"+t.max_marks),t.quiz_passing_score&&(t.marks>t.quiz_passing_score?s+=" "+window.wplms_course_data.translations.passed:s+=" "+window.wplms_course_data.translations.failed),e.setAttribute("content",s+t.title),e.setAttribute("name","twitter:title"),e.setAttribute("content",s+t.title),document.body.appendChild(e),document.body.appendChild(n)}var s;document.body.appendChild(n),bn(vn(tn,{quiz:t,renderSwitch:j}),document.getElementById("quiz_results_"+e.quizid)),await(s=1e3,new Promise(e=>setTimeout(e,s)));let r=document.getElementById("quiz_results_"+e.quizid).outerHTML;document.getElementById("quiz_results_"+e.quizid)&&document.getElementById("quiz_results_"+e.quizid).remove();var i=window.open("","","height=800, width=1000");i.document.write(r),i.print()},X=(e,t=null,n=null)=>n&&!navigator.onLine?new Promise((e,t)=>{t(0)}):"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&navigator.onLine?t?localforage.removeItem(e):localforage.iterate((function(t,n,s){e.length&&n.length&&n.includes(e)&&localforage.removeItem(n)})):new Promise(e=>{e(1)}),W=t=>{let n=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&(n=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&localforage.getItem(n).then(e=>{e&&e.length&&(e=JSON.parse(e)).hasOwnProperty("meta")&&(e=t,localforage.setItem(n,JSON.stringify(e)))})},U=n=>{let s=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&(s=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&localforage.getItem(s).then(e=>{e&&e.length&&(e=JSON.parse(e)).hasOwnProperty("meta")&&(n.expiry=Math.round((new Date).getTime()/1e3)+parseInt(t.meta.duration),e=n,localforage.setItem(s,JSON.stringify(e)))})};let Q=0;t.meta&&t.meta.duration&&(Q=t.meta.duration),t&&t.remaining&&t.remaining>0&&(Q=t.remaining),t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)>(new Date).getTime()&&(parseInt(t.end_time)-(new Date).getTime())/1e3<Q&&(Q=Math.floor((parseInt(t.end_time)-(new Date).getTime())/1e3));let $="",K="loading_quiz";s||($="disabled",K+=" disabled");let V=window.wplms_course_data.translations.submit_quiz_confirm;if(t.meta&&t.meta.questions){let e=1;t.meta.questions.map((function(t){t.marked_answer||(e=0)})),e||(V=window.wplms_course_data.translations.unanswered_confirm+V)}let G=[];if(t.hasOwnProperty("meta")&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&(G=t.meta.questions),G.length&&null!==k)switch(k){case"wrong":G=G.filter(e=>!e.hasOwnProperty("user_marks")||!e.user_marks||parseFloat(e.user_marks)<=0);break;case"correct":G=G.filter(e=>e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0);break;case"bookmarked":G=G.filter(e=>z.indexOf(e.id)>-1)}return console.log(t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)<=(new Date).getTime()),"quiz"!==s?t&&t.hasOwnProperty("drip_message")?vn(Sn,null,t&&t.hasOwnProperty("drip_time")?vn(_n,{start:!0,duration:t.drip_time,update:(e,t)=>{"expired"==t&&F(null,!0)},quiz_id:t.id}):"",vn("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t&&t.hasOwnProperty("drip_message")?t.drip_message:""}})):vn(Sn,null,vn(Ft,{active:p,update:H,type:"submit",content:V,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"submitQuiz"}),ReactDOM.createPortal(vn(Ft,{active:f,update:H,type:"submit",content:window.wplms_course_data.translations.bookmark_confirm,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"submitQuiz"}),document.querySelector("#quiz_popup")),P?ReactDOM.createPortal(vn("div",{className:"confirmpopup_wrapper"},vn("div",{className:"confirmpopup_content"},vn("textarea",{value:P.flagged_feedback,onChange:e=>{let s={...t},r=s.meta.questions.findIndex(e=>parseInt(P.id)===parseInt(e.id));if(r>-1){s.meta.questions[r].flagged_feedback=e.target.value,n(s);let t={...P};t.flagged_feedback=s.meta.questions[r].flagged_feedback,I(t)}}}),vn("div",{className:"buttons_wrapper"},vn("span",{className:S.indexOf(P.id)>-1?"button is-loading":P.flagged?"button flagged":"button flag",onClick:e=>{(()=>{let e=P,s=t.meta.questions.findIndex(e=>parseInt(P.id)===parseInt(e.id));if(s>-1){if(Mn(e.flagged_feedback))return Pn("vibebp").addNotification({text:window.wplms_course_data.translations.add_feedback_to_flag}),!1;let r=[...S];r.indexOf(e.id)<=-1&&r.push(e.id),O(r),fetch(window.wplms_course_data.api_url+"/user/question/flag/"+e.id+"?post",{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:v,flagged:!0,feedback:e.flagged_feedback})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(i=>{if(i){if(i.status){let i=r.indexOf(e.id);i>-1&&(r.splice(i,1),O(r));let a={...t};a.meta.questions[s].flagged=!0,n(a),C(""),I(!1)}i.message&&Pn("vibebp").addNotification({icon:"",text:i.message})}}).catch(e=>{console.error("Uh oh, an error!",e),Pn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})}})()}},window.wplms_course_data.translations.submit_feedback),vn("span",{className:"button",onClick:e=>{I(!1)}},window.wplms_course_data.translations.cancel)))),document.querySelector("#quiz_popup")):"",vn(Ft,{active:_,update:H,type:"start",content:window.wplms_course_data.translations.start_quiz_confirm,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"startQuiz"}),vn("div",{className:"incourse"},vn("div",{className:K},vn("div",{id:"ajaxloader",className:$})),e.hasOwnProperty("activity")?t.submitted?vn("h3",null,vn("span",{className:"student_score"},t.meta.auto?t.marks+"/"+t.max_marks:""),t.quiz_passing_score?vn("span",null,t.marks>t.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):""):"":vn("div",{className:"up"==l?"incoursequiz_details show_controls":"incoursequiz_details hide_controls",ref:o},vn("div",{className:"quiz_first_block"},t.submitted?vn("strong",null,vn("span",{className:"student_score"},t.meta.auto?t.marks+"/"+t.max_marks:""),t.quiz_passing_score?vn("span",null,t.marks>t.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):"",vn("span",{className:"student_quiz_status"},window.wplms_course_data.translations.quiz_submitted)):vn("div",{className:"quiztimer_wrapper"},t.hasOwnProperty("end_time")&&parseInt(t.end_time)?vn("div",{className:"end_timer"},vn("span",null,window.wplms_course_data.translations.ends_in),vn(h,{duration:Math.floor((t.end_time-(new Date).getTime())/1e3),update:()=>{},quiz_id:t.id,start:!0})):"",t&&t.meta&&t.meta.duration&&parseInt(t.meta.duration)<863913600?vn(h,{duration:Q,update:(e,n)=>{"expired"==n&&"submit"!==!s&&L(t)},quiz_id:t.id,start:t.start}):vn("strong",null,window.wplms_course_data.translations.no_time_limit)),t&&t.meta&&t.meta.questions&&t.meta.questions.length&&t.submitted?vn("div",{className:"buttons has-addons small"},vn("a",{className:"correct"==k?"button tip end is-focused":"button tip",title:window.wplms_course_data.translations.show_correct_attempts,onClick:()=>{x("correct"!=k?"correct":null)}},vn("span",{className:"vicon vicon-check"})),vn("a",{className:"wrong"==k?"button tip end is-focused":"button tip",title:window.wplms_course_data.translations.show_wrong_attempts,onClick:()=>{x("wrong"!=k?"wrong":null)}},vn("span",{className:"vicon vicon-close"})),t.hasOwnProperty("show_print_results")&&t.show_print_results?vn("a",{className:"button tip",title:window.wplms_course_data.translations.print_results,onClick:()=>{J()}},vn("span",{className:"vicon vicon-printer"})):""):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length&&z.length?vn("div",{className:"buttons has-addons"},vn("a",{className:"bookmarked"==k?"button tip end is-focused":"button tip",title:window.wplms_course_data.translations.show_bookmarked,onClick:()=>{x("bookmarked"!=k?"bookmarked":null)}},vn("span",{className:"vicon vicon-bookmark-alt"}))):"",vn("span","up"==l?{className:"quiz_detail_toggle vicon button is-primary vicon-arrow-up",onClick:()=>{d("up"==l?"down":"up")}}:{className:"quiz_detail_toggle vicon button is-primary vicon-arrow-down",onClick:()=>{d("up"==l?"down":"up")}})),vn("div",{className:"quiz_timeline"},!t.submitted||t.meta&&t.meta.retakes>0?vn("div",{className:"incourse_quiz_button"},t.start||t.submitted?"":t.remaining&&t.remaining>0?vn("a",{className:"continue_quiz button is-primary",onClick:A},window.wplms_course_data.translations.continue):t&&t.meta&&t.meta.hasOwnProperty("check_access")&&"object"!=typeof t.meta.check_access&&t.meta.check_access.hasOwnProperty("status")&&!t.meta.check_access.status?vn("div",{className:"check_quiz",dangerouslySetInnerHTML:{__html:t.meta.check_access.html}}):t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)<=(new Date).getTime()?"":t.hasOwnProperty("start_time")&&t.start_time&&parseInt(t.start_time)>(new Date).getTime()?vn("div",{className:"start_timer"},vn("div",null,window.wplms_course_data.translations.starts_in),vn(h,{duration:Math.floor((parseInt(t.start_time)-(new Date).getTime())/1e3),update:()=>{n({...t,start_time:t.start_time})},quiz_id:t.id,start:!0})):vn("a",{className:"start"===s?"start_quiz button full is-primary is-loading":"start_quiz  full button is-primary",onClick:()=>{window.wplms_course_data.start_popup?m(!0):A()}},window.wplms_course_data.translations.start),t.start&&!t.submitted&&(!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz)?vn("a",{className:"save"===s?"save_quiz button is-primary is-loading":"save_quiz button is-primary",onClick:()=>{if(t.meta.questions&&t.meta.questions.length){r("save");let e=[];t.meta.questions.map((t,n)=>{let s={...t};null==s.marked_answer||"undefined"==s.marked_answer||Mn(s.marked_answer)||t.attempted||(s.correct=Ke(s),e.push(s))}),fetch(window.wplms_course_data.api_url+"/user/savequiz?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({quiz_id:t.id,questions:e,token:v})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{r(!1),e.hasOwnProperty("message")&&Pn("vibebp").addNotification({text:e.message})}).catch(e=>{r(!1),console.error("Uh oh, an error!",e),Pn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})}}},window.wplms_course_data.translations.save_quiz):"",t.hasOwnProperty("end_time")&&parseInt(t.end_time)&&parseInt(t.end_time)<=(new Date).getTime()?"":t.start&&!t.submitted&&(()=>{if(t&&t.hasOwnProperty("hide_submit_button")&&t.hide_submit_button){if(i&&i.length&&t.hasOwnProperty("meta")&&t.meta&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length){return i.indexOf(t.meta.questions.length-1)>-1}return!0}return!0})()?vn("a",{className:"submit"===s?"submit_quiz button is-primary is-loading":"submit_quiz button is-primary",onClick:()=>{window.wplms_course_data.submit_popup?g(!0):z.length?w(!0):L()}},window.wplms_course_data.translations.submit):"",!t.start&&t.submitted&&t.meta&&t.meta.retakes>0?vn("div",{className:"quiz_retake"},vn("a",{className:"retake"===s?"retake_quiz button is-primary is-loading":"retake_quiz button is-primary",onClick:()=>(()=>{t.hasOwnProperty("non_logged_in_quiz")&&t.non_logged_in_quiz&&!v&&localStorage.removeItem("vibequiz_"+t.id),r("retake");let n={token:v};if(e.hasOwnProperty("course")&&(n.course=e.course),e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz){localStorage.removeItem("vibequiz_"+e.quizid);let n=localStorage.getItem("quiz_retakes_"+e.quizid);return n||(n=0),localStorage.setItem("quiz_retakes_"+t.id,parseInt(n)+1),void F()}let s=window.wplms_course_data.api_url+"/user/quiz/"+e.quizid;e.hasOwnProperty("non_logged_in_quiz")&&e.non_logged_in_quiz&&!v&&(s=window.wplms_course_data.api_url+"/quiz/nonloggedin/"+e.quizid+"?client_id="+window.wplms_course_data.client_id),X(s,!0,!0).then(t=>{fetch(window.wplms_course_data.api_url+"/user/coursestatus/retake_single_quiz/"+e.quizid+"?post",{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(n)}).then(e=>e.json()).then(t=>{t&&(t.status?(F(),e.hasOwnProperty("update")&&e.update("retake_quiz")):t.message&&(Pn("vibebp").addNotification({icon:"",text:t.message}),r(!1)))})}).catch(e=>{console.log(e),navigator&&!navigator.onLine&&(Pn("vibebp").addNotification({text:window.wplms_course_data.translations.could_not_retake_offline}),r(!1))})})()},window.wplms_course_data.translations.retake),vn("strong",null,window.wplms_course_data.translations.retakes_left," : ",t.meta.retakes)):""):"",q?vn(gt,{hideQuestions:()=>y(!1),quiz:t,currentQuestions:i,update:T,filter:k,bookMarked:z}):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length&&!q?vn("span",{className:"show_questions",onClick:()=>y(!0)},vn("span",null,window.wplms_course_data.translations.show_questions),vn("span",{className:"vicon vicon-angle-double-right"})):"")),vn("div",{className:"quiz_questions_content"},vn("div",{className:""},t.start||t.submitted?"":vn("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),!t.start&&t.submitted?vn("div",{className:""},vn("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t.meta.completion_message}}),!t.start&&t.submitted&&t.retake_html?vn("div",{dangerouslySetInnerHTML:{__html:t.retake_html}}):""):"",t.start||!t.submitted||e.hasOwnProperty("activity")?"":!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz?vn($t,{quizid:e.quizid}):"",t&&t.meta&&t.meta.questions&&t.submitted&&t.meta.auto&&t.show_advance_stats&&!e.hasOwnProperty("activity")?vn(Ht,{quiz:t}):"",t&&t.meta&&G&&(t.start||t.submitted)?G.map((a,o)=>{if(-1===i.indexOf(o))return;let u="",c="";return a.hasOwnProperty("show_hint")&&a.show_hint?(c="question_hint_content message show",u="question_hint show"):(c="question_hint_content message",u="question_hint"),vn("div",{className:"question"},vn("div",{className:"question_actions"},vn("span",null,window.wplms_course_data.translations.question_full_prefix," ",o+1),vn("div",null,vn("span",{className:"marks"},vn("i",{className:"vicon vicon-medall"}),a.marks),!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz?vn("span",{className:S.indexOf(a.id)>-1?"is-loading":a.flagged?"flagged":"flag",onClick:()=>{I(a)}},vn("i",{className:a.flagged?"vicon vicon-flag-alt":"vicon vicon-flag"})):"",a.hint?vn("span",{className:u,onClick:e=>{let s={...t};s.meta.questions[o].hasOwnProperty("show_hint")&&s.meta.questions[o].show_hint?s.meta.questions[o].show_hint=!1:s.meta.questions[o].show_hint=!0,n(s)}}):"")),j(a,o),!t.submitted&&t.start?vn("span",{className:"bookmark button",onClick:()=>{(t=>{let n=[...z],s=n.indexOf(t.id);s<=-1?n.push(t.id):n.splice(s,1),localforage.setItem("bookmarked_questions_"+e.quizid,JSON.stringify(n)),N(n),n.length||"bookmarked"!=k||x(null)})(a)}},vn("i",{className:z.indexOf(a.id)>-1?"vicon vicon-bookmark-alt":"vicon vicon-bookmark"})):"",a.attempted||!t.check_answer||t.submitted?"":!e.hasOwnProperty("non_logged_in_quiz")||e.hasOwnProperty("non_logged_in_quiz")&&!e.non_logged_in_quiz?vn("div",{className:"checkanswer"===s?"check_answer button is-primary is-loading":"check_answer button is-primary",onClick:e=>{((e,s)=>{r("checkanswer");let i=Ge(e,t.partial_marking,t.negative_marking,parseFloat(t.negative_marks),!0),a={...t};i.attempted=!0,a.meta.questions[s]=i,fetch(window.wplms_course_data.api_url+"/user/saveuserquestion?post",{method:"POST",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({quiz_id:a.id,question:i,token:v})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{r(!1),n(a),W(a),e.hasOwnProperty("message")&&Pn("vibebp").addNotification({text:e.message})}).catch(e=>{r(!1),console.error("Uh oh, an error!",e),Pn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})})(a,o)}},window.wplms_course_data.translations.check_answer):"",a.hint?vn("span",{className:c,dangerouslySetInnerHTML:{__html:a.hint}}):"",a.attempted?vn(it,{question:a}):"",a.attempted&&a.show_correct_answer&&a.explanation.length?vn("div",{className:"explanation"},vn("strong",null,window.wplms_course_data.translations.question_explanation),vn("div",{dangerouslySetInnerHTML:{__html:a.explanation}})):"")}):"",t&&t.meta&&t.meta.questions&&(t.start||t.submitted)?vn(St,{quiz:t,questions:[...G],currentQuestions:i,filter:k,update:T,bookMarked:z}):"")))):vn(rn,null)};const{createElement:Bn,useState:Dn,useEffect:Tn,Fragment:An,render:Ln,useRef:jn}=wp.element,{dispatch:Hn,select:Rn}=wp.data,Jn=e=>{let t=Rn("vibebp").getUser();t.token=Rn("vibebp").getToken();Tn(()=>{window.scorm_page_type="course",window.scorm_wplms_data={},window.scorm_wplms_data.user_email=t.email,window.scorm_wplms_data.user_name=t.username,window.scorm_wplms_data.token=t.token,window.scorm_wplms_data.course_id=e.course_id,window.scorm_wplms_data.module_id=e.quiz_id,window.is_take_course=!0,window.scorm_wplms_data.type="quiz";var s=new CustomEvent("unit_content_loaded",{detail:{}});return document.dispatchEvent(s),document.addEventListener("scormquizsubmitted",n),()=>{document.removeEventListener("scormquizsubmitted",n)}},[e.quiz_id]);const n=t=>{var n={coursestatus:e.coursestatus,action:"quizsubmitted",id:e.quiz_id,course_id:e.course_id},s=new CustomEvent("custom_quiz_action",{detail:n});document.dispatchEvent(s)};return Bn("div",{className:"ScormQuiz"},Bn("div",{className:"quiz_content"},Bn("div",{className:"new_quiz_scorm_wrapper wplms_iframe_wrapper",dangerouslySetInnerHTML:{__html:e.content_id}})))};document.addEventListener("custom_quiz_type",e=>{"scorm"===e.detail.type&&setTimeout(()=>{Ln(Bn(Jn,{quiz_id:e.detail.id,course_id:e.detail.course_id,content_id:e.detail.content_id,coursestatus:e.detail.coursestatus}),document.querySelector("#scorm"))},200)},!1);const{createElement:Xn,render:Wn,useState:Un,useEffect:Qn,Fragment:Yn}=wp.element,{dispatch:$n,select:Kn}=wp.data,Vn=e=>{const[t,n]=Un({}),[s,r]=Un(!1),[i,a]=Un(!1);return Qn(()=>{fetch(`${window.wplms_course_data.api_url}/post/excerpt/${e.quizid}?force`,{method:"post",body:JSON.stringify()}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{e.status&&e.hasOwnProperty("data")&&(document.dispatchEvent(new Event("VibeBP_Editor_Content")),n(e.data),e.hasOwnProperty("non_logged_in")&&r(!0),a(!0))}).catch(e=>{a(!0),console.error("Uh oh, an error!",e),$n("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})},[e.quizid]),i?Xn(Yn,null,s?Xn(Fn,{non_logged_in_quiz:1,quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),force:1}):Xn("div",{className:"quiz_content"},Xn("div",{dangerouslySetInnerHTML:{__html:t}}))):""};document.addEventListener("userLoaded",e=>{if(document.querySelector("#wplms_quiz"))if(document.querySelector("#wplms_quiz").getAttribute("quiz_type")&&document.querySelector("#wplms_quiz").getAttribute("quiz_type").length){var t={type:document.querySelector("#wplms_quiz").getAttribute("quiz_type"),id:document.querySelector("#wplms_quiz").getAttribute("data-id"),content_id:document.querySelector("#wplms_quiz").getAttribute("content_id")?document.querySelector("#wplms_quiz").getAttribute("content_id"):"undefined"!=typeof wplms_quiz_scorm_package?wplms_quiz_scorm_package:""},n=new CustomEvent("custom_quiz_type",{detail:t});document.dispatchEvent(n)}else Wn(Xn(Fn,{quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),type:document.querySelector("#wplms_quiz").getAttribute("data-type")}),document.querySelector("#wplms_quiz"))}),document.querySelector("#wplms_quiz")&&Wn(Xn(Vn,{quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),type:document.querySelector("#wplms_quiz").getAttribute("data-type")}),document.querySelector("#wplms_quiz"))}]);