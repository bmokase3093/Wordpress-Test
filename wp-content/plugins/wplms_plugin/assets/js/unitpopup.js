!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){e.exports=function(){"use strict";(function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),r=window.setTimeout((function(){t(i+a)}),a);return e=i+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){try{return new CustomEvent("test"),!1}catch(e){}function t(t,n){n=n||{bubbles:!1,cancelable:!1};var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,n.bubbles,n.cancelable,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i}t.prototype=Event.prototype,e.MouseEvent=t}(window);var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(i):void 0},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function t(n,i,a,r){e(this,t);var s=this;function o(e){e.stopPropagation(),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",l),s.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:s}}))}function l(e){e.stopPropagation(),s.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}this.position=n,this.constraints=i,this.cursor=a,this.eventBus=r,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=a,this.el.addEventListener("mousedown",(function(e){e.stopPropagation(),document.addEventListener("mouseup",o),document.addEventListener("mousemove",l),s.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:s}}))}))},s=function(){function n(t,i,a,r){e(this,n),this.x1=t,this.y1=i,this.x2=a,this.y2=r}return t(n,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.x1=null==e?this.x1:e,this.y1=null==t?this.y1:t,this.x2=null==n?this.x2:n,this.y2=null==i?this.y2:i,this}},{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.x1+this.width()*n[0],a=this.y1+this.height()*n[1];return this.x1=i-e*n[0],this.y1=a-t*n[1],this.x2=this.x1+e,this.y2=this.y1+t,this}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=this.width()*e,i=this.height()*e;return this.resize(n,i,t),this}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.width(),i=this.height();return e=null===e?this.x1:e,t=null===t?this.y1:t,this.x1=e,this.y1=t,this.x2=e+n,this.y2=t+i,this}},{key:"getRelativePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=this.width()*e[0],n=this.height()*e[1];return[t,n]}},{key:"getAbsolutePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=this.x1+this.width()*e[0],n=this.y1+this.height()*e[1];return[t,n]}},{key:"constrainToRatio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==e){switch(this.width(),this.height(),n){case"height":this.resize(this.width(),this.width()*e,t);break;case"width":this.resize(1*this.height()/e,this.height(),t);break;default:this.resize(this.width(),this.width()*e,t)}return this}}},{key:"constrainToBoundary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.getAbsolutePoint(n),r=a(i,2),s=r[0],o=r[1],l=s,c=o,u=e-s,d=t-o,p=-2*n[0]+1,m=-2*n[1]+1,h=null,_=null;switch(p){case-1:h=l;break;case 0:h=2*Math.min(l,u);break;case 1:h=u}switch(m){case-1:_=c;break;case 0:_=2*Math.min(c,d);break;case 1:_=d}if(this.width()>h){var w=h/this.width();this.scale(w,n)}if(this.height()>_){var v=_/this.height();this.scale(v,n)}return this}},{key:"constrainToSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(r&&(r>1?(e=1*t/r,i*=r):r<1&&(t=e*r,n=1*i/r)),e&&this.width()>e){var s=e,o=null===r?this.height():t;this.resize(s,o,a)}if(t&&this.height()>t){var l=null===r?this.width():e,c=t;this.resize(l,c,a)}if(n&&this.width()<n){var u=n,d=null===r?this.height():i;this.resize(u,d,a)}if(i&&this.height()<i){var p=null===r?this.width():n,m=i;this.resize(p,m,a)}return this}}]),n}();function o(e){e.preventDefault();var t=e.changedTouches[0];t.target.dispatchEvent(new MouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],{bubbles:!0,cancelable:!0,view:window,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY}))}var l=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}];function c(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}return function(a){function r(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n,a))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a),t(r,[{key:"getValue",value:function(e){return n(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"getValue",this).call(this,e)}},{key:"setImage",value:function(e){return n(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setImage",this).call(this,e)}},{key:"destroy",value:function(){return n(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(e,t){return this.box.move(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(e,t,n),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}]),r}(function(){function n(t,i){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e(this,n),this.options=n.parseOptions(i||{}),!t.nodeName&&null==(t=document.querySelector(t)))throw"Unable to find element.";if(!t.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:t.parentNode,element:t},r||(0===t.width||0===t.height?t.onload=function(){a.initialize(t)}:this.initialize(t))}return t(n,[{key:"initialize",value:function(e){this.createDOM(e),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(e){var t;this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,(t=this.containerEl).addEventListener("touchstart",o),t.addEventListener("touchend",o),t.addEventListener("touchmove",o),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",e.getAttribute("src")),this.imageEl.setAttribute("alt",e.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var n=document.createElement("div");n.className="croppr-handleContainer",this.handles=[];for(var i=0;i<l.length;i++){var a=new r(l[i].position,l[i].constraints,l[i].cursor,this.eventBus);this.handles.push(a),n.appendChild(a.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(n),this.containerEl.appendChild(this.cropperEl),e.parentElement.replaceChild(this.containerEl,e)}},{key:"setImage",value:function(e){var t=this;return this.imageEl.onload=function(){t.box=t.initializeBox(t.options),t.redraw()},this.imageEl.src=e,this.imageClippedEl.src=e,this}},{key:"destroy",value:function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)}},{key:"initializeBox",value:function(e){var t=e.startSize.width,n=e.startSize.height,i=new s(0,0,t,n);i.constrainToRatio(e.aspectRatio,[.5,.5]);var a=e.minSize,r=e.maxSize;i.constrainToSize(r.width,r.height,a.width,a.height,[.5,.5],e.aspectRatio);var o=this.cropperEl.offsetWidth,l=this.cropperEl.offsetHeight;i.constrainToBoundary(o,l,[.5,.5]);var c=this.cropperEl.offsetWidth/2-i.width()/2,u=this.cropperEl.offsetHeight/2-i.height()/2;return i.move(c,u),i}},{key:"redraw",value:function(){var e=this,t=Math.round(this.box.width()),n=Math.round(this.box.height()),i=Math.round(this.box.x1),a=Math.round(this.box.y1),r=Math.round(this.box.x2),s=Math.round(this.box.y2);window.requestAnimationFrame((function(){e.regionEl.style.transform="translate("+i+"px, "+a+"px)",e.regionEl.style.width=t+"px",e.regionEl.style.height=n+"px",e.imageClippedEl.style.clip="rect("+a+"px, "+r+"px, "+s+"px, "+i+"px)";for(var o=e.box.getAbsolutePoint([.5,.5]),l=o[0]-e.cropperEl.offsetWidth/2>>31,c=o[1]-e.cropperEl.offsetHeight/2>>31,u=-2*((l^c)+c+c+4)+8,d=0;d<e.handles.length;d++){var p=e.handles[d],m=p.el.offsetWidth,h=p.el.offsetHeight,_=i+t*p.position[0]-m/2,w=a+n*p.position[1]-h/2;p.el.style.transform="translate("+Math.round(_)+"px, "+Math.round(w)+"px)",p.el.style.zIndex=u==d?5:4}}))}},{key:"attachHandlerEvents",value:function(){var e=this.eventBus;e.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),e.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),e.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){var e=this.eventBus;function t(t){t.stopPropagation(),e.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function n(i){i.stopPropagation(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",t),e.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:i.clientX,mouseY:i.clientY}}))}this.regionEl.addEventListener("mousedown",(function(i){i.stopPropagation(),document.addEventListener("mouseup",n),document.addEventListener("mousemove",t),e.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:i.clientX,mouseY:i.clientY}}))})),e.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),e.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),e.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){var e=this,t=null;function n(t){t.stopPropagation(),e.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function i(a){a.stopPropagation(),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",n),1!==e.box.width()||1!==e.box.height()?e.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:a.clientX,mouseY:a.clientY}})):e.box=t}this.overlayEl.addEventListener("mousedown",(function(a){a.stopPropagation(),document.addEventListener("mouseup",i),document.addEventListener("mousemove",n);var r=e.cropperEl.getBoundingClientRect(),o=a.clientX-r.left,l=a.clientY-r.top;t=e.box,e.box=new s(o,l,o+1,l+1),e.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:e.handles[4]}}))}))}},{key:"onHandleMoveStart",value:function(e){var t=e.detail.handle,n=[1-t.position[0],1-t.position[1]],i=this.box.getAbsolutePoint(n),r=a(i,2),s=r[0],o=r[1];this.activeHandle={handle:t,originPoint:n,originX:s,originY:o},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onHandleMoveMoving",value:function(e){var t=e.detail,n=t.mouseX,i=t.mouseY,a=this.cropperEl.getBoundingClientRect();n-=a.left,i-=a.top,n<0?n=0:n>a.width&&(n=a.width),i<0?i=0:i>a.height&&(i=a.height);var r=this.activeHandle.originPoint.slice(),o=this.activeHandle.originX,l=this.activeHandle.originY,c=this.activeHandle.handle,u=1===c.constraints[0],d=1===c.constraints[1],p=1===c.constraints[2],m=1===c.constraints[3],h=(m||d)&&(u||p),_=m||d?o:this.box.x1,w=m||d?o:this.box.x2,v=u||p?l:this.box.y1,f=u||p?l:this.box.y2;_=m?n:_,w=d?n:w,v=u?i:v,f=p?i:f;var g=!1,y=!1;if((m||d)&&(g=m?n>o:n<o),(u||p)&&(y=u?i>l:i<l),g){var b=_;_=w,w=b,r[0]=1-r[0]}if(y){var k=v;v=f,f=k,r[1]=1-r[1]}var x=new s(_,v,w,f);if(this.options.aspectRatio){var E=this.options.aspectRatio,S=!1;h?S=i>x.y1+E*x.width()||i<x.y2-E*x.width():(u||p)&&(S=!0);var q=S?"width":"height";x.constrainToRatio(E,r,q)}var N=this.options.minSize,C=this.options.maxSize;x.constrainToSize(C.width,C.height,N.width,N.height,r,this.options.aspectRatio);var O=this.cropperEl.offsetWidth,M=this.cropperEl.offsetHeight;x.constrainToBoundary(O,M,r),this.box=x,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onHandleMoveEnd",value:function(e){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(e){var t=e.detail,n=t.mouseX,i=t.mouseY,a=this.cropperEl.getBoundingClientRect();n-=a.left,i-=a.top,this.currentMove={offsetX:n-this.box.x1,offsetY:i-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(e){var t=e.detail,n=t.mouseX,i=t.mouseY,a=this.currentMove,r=a.offsetX,s=a.offsetY,o=this.cropperEl.getBoundingClientRect();n-=o.left,i-=o.top,this.box.move(n-r,i-s),this.box.x1<0&&this.box.move(0,null),this.box.x2>o.width&&this.box.move(o.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>o.height&&this.box.move(null,o.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(e){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(e=this.options.returnMode),"real"==e){var t=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,i=this.imageEl.getBoundingClientRect(),a=i.width,r=i.height,s=t/a,o=n/r;return{x:Math.round(this.box.x1*s),y:Math.round(this.box.y1*o),width:Math.round(this.box.width()*s),height:Math.round(this.box.height()*o)}}if("ratio"==e){var l=this.imageEl.getBoundingClientRect(),u=l.width,d=l.height;return{x:c(this.box.x1/u,3),y:c(this.box.y1/d,3),width:c(this.box.width()/u,3),height:c(this.box.height()/d,3)}}if("raw"==e)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}],[{key:"parseOptions",value:function(e){var t=null,n={width:null,height:null},i={width:null,height:null},a={width:100,height:100,unit:"%"},r="real",s=null,o=null,l=null,c=null,u=null;void 0!==e.aspectRatio&&("number"==typeof e.aspectRatio?u=e.aspectRatio:e.aspectRatio instanceof Array&&(u=e.aspectRatio[1]/e.aspectRatio[0]));var d=null;void 0!==e.maxSize&&null!==e.maxSize&&(d={width:e.maxSize[0]||null,height:e.maxSize[1]||null,unit:e.maxSize[2]||"px"});var p=null;void 0!==e.minSize&&null!==e.minSize&&(p={width:e.minSize[0]||null,height:e.minSize[1]||null,unit:e.minSize[2]||"px"});var m=null;void 0!==e.startSize&&null!==e.startSize&&(m={width:e.startSize[0]||null,height:e.startSize[1]||null,unit:e.startSize[2]||"%"});var h=null;"function"==typeof e.onInitialize&&(h=e.onInitialize);var _=null;"function"==typeof e.onCropStart&&(_=e.onCropStart);var w=null;"function"==typeof e.onCropEnd&&(w=e.onCropEnd);var v=null;"function"==typeof e.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),v=e.onUpdate),"function"==typeof e.onCropMove&&(v=e.onCropMove);var f=null;if(void 0!==e.returnMode){var g=e.returnMode.toLowerCase();if(-1===["real","ratio","raw"].indexOf(g))throw"Invalid return mode.";f=g}var y=function(e,t){return null!==e?e:t};return{aspectRatio:y(u,t),maxSize:y(d,n),minSize:y(p,i),startSize:y(m,a),returnMode:y(f,r),onInitialize:y(h,s),onCropStart:y(_,o),onCropMove:y(v,l),onCropEnd:y(w,c),convertToPixels:function(e){for(var t=e.offsetWidth,n=e.offsetHeight,i=["maxSize","minSize","startSize"],a=0;a<i.length;a++){var r=i[a];null!==this[r]&&("%"==this[r].unit&&(null!==this[r].width&&(this[r].width=this[r].width/100*t),null!==this[r].height&&(this[r].height=this[r].height/100*n)),delete this[r].unit)}}}}}]),n}())}()},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(1);const{createElement:i,render:a}=wp.element;var r=e=>i("div",{class:"lds-ellipsis"},i("div",null),i("div",null),i("div",null),i("div",null));const{Component:s,createElement:o,render:l,useState:c,useEffect:u,Fragment:d}=wp.element;var p=e=>{const[t,n]=c(e.duration),[i,a]=c({d:0,h:0,m:0,s:0});u(()=>{if(e.start){setTimeout(()=>{let i=t-1;i<=-1?e.update(e.quiz_id,"expired"):i>=0&&(n(i),r())},1e3)}else n(e.duration),r()},[t,e.start,e.duration]);const r=()=>{let e={...i},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,a(e)};return o("div",{className:"driptimer_wrapper"},o("div",{className:"driptimer"},o("span",{className:"timer_amount"},i.d?o(d,null,o("span",null,i.d),o("span",null,":")):"",i.h?o(d,null,o("span",null,i.h),o("span",null,":")):"",i.m?o(d,null,o("span",null,i.m),o("span",null,":")):"",o("span",null,i.s)),o("span",{className:"timer_unit"},i.d?o(d,null,o("span",null,window.wplms_course_data.translations.days),o("span",null)):"",i.h?o(d,null,o("span",null,window.wplms_course_data.translations.hours),o("span",null)):"",i.m?o(d,null,o("span",null,window.wplms_course_data.translations.minutes),o("span",null)):"",o("span",null,window.wplms_course_data.translations.seconds))))},m=n(0),h=n.n(m);const{createElement:_,useState:w,useEffect:v,useRef:f,Fragment:g,render:y}=wp.element,{dispatch:b,select:k}=wp.data,x=Math.round(100*Math.random());var E=e=>{const t=f(null),[n,i]=w(!1),[a,r]=w(!1),[s,o]=w(""),[l,c]=w(""),[u,d]=w(""),[p,m]=w(""),[g,y]=w({x:0,y:0,width:0,height:0,type:"image"}),[b,k]=w(""),[E,S]=w(window.wplms_course_data.translations.select_image);v(()=>{e.hasOwnProperty("crop")&&e.crop&&i(!0)},[]),v(()=>{if(a&&b&&n)new h.a(b,{returnMode:"ratio",onCropEnd:function(t){let n={...g};n.x=100*t.x,n.y=100*t.y,n.height=100*t.height,n.width=100*t.width,y(n);let i={x:b.naturalWidth*t.x,y:b.naturalHeight*t.y,width:b.naturalWidth*t.width,height:b.naturalHeight*t.height};e.update(p,i)}})},[a,b]);g.x,g.y,g.width,g.height;return _("div",{className:"uploader"},_("label",{for:"fileupload_"+x,className:"upload_file"},E,"image"==e.type?_("input",{id:"fileupload_"+x,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:n=>{t.current.files[0].size<window.wplms_course_data.settings.upload_limit?(o(window.URL.createObjectURL(t.current.files[0])),m(t.current.files[0]),e.update(t.current.files[0],{...g,key:"image"})):(S(window.wplms_course_data.translations.image_size_error),setTimeout(()=>{S(window.wplms_course_data.translations.select_image)},3500))}}):"video"==e.type?_("input",{id:"fileupload_"+x,"data-type":e.type,ref:t,type:"file",accept:"video/*",onChange:n=>{t.current.files[0].size<window.wplms_course_data.settings.upload_limit?(c(window.URL.createObjectURL(t.current.files[0])),m(t.current.files[0]),e.update(t.current.files[0],{...g,key:"video"})):(S(window.wplms_course_data.translations.image_size_error),setTimeout(()=>{S(window.wplms_course_data.translations.select_image)},3500))}}):_("input",{id:"fileupload_"+x,"data-type":e.type,ref:t,type:"file",onChange:n=>{t.current.files&&t.current.files[0]&&(t.current.files[0].size<e.args.allowed_file_size?-1!==e.args.allowed_mime_types.indexOf(t.current.files[0].type)?(d(window.URL.createObjectURL(t.current.files[0])),m(t.current.files),e.update(t.current.files,{...g,key:"attachment"})):(S(window.wplms_course_data.translations.image_type_error),setTimeout(()=>{S(window.wplms_course_data.translations.select_image)},3500)):(S(window.wplms_course_data.translations.image_size_error),setTimeout(()=>{S(window.wplms_course_data.translations.select_image)},3500)))}})))};const{Component:S,createElement:q,render:N,useState:C,useEffect:O,Fragment:M}=wp.element;var z=e=>{const[t,n]=C(e.duration),[i,a]=C({d:0,h:0,m:0,s:0});O(()=>{if(e.start){setTimeout(()=>{let i=t-1;i<=-1?e.update(e.quiz_id,"expired"):i>=0&&(n(i),r())},1e3)}else n(e.duration),r()},[t,e.start,e.duration]);const r=()=>{let e={...i},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,a(e)};let s="c100 p0 big";if(t>-1){let n=Math.floor((e.duration-t)/e.duration*100);n<=0&&(n=1),s="c100 p"+n+" big"}return q("div",{className:"quiztimer"},q(M,null,q("div",{className:"circle_timer"},q("div",{className:s},q("span",null,q("span",{className:"timer_amount"},i.d?q(M,null,q("span",null,i.d),q("span",null,":")):"",i.h?q(M,null,q("span",null,i.h),q("span",null,":")):"",i.m?q(M,null,q("span",null,i.m),q("span",null,":")):"",q("span",null,i.s)),q("span",{className:"timer_unit"},i.d?q(M,null,q("span",null,window.wplms_course_data.translations.days),q("span",null)):"",i.h?q(M,null,q("span",null,window.wplms_course_data.translations.hours),q("span",null)):"",i.m?q(M,null,q("span",null,window.wplms_course_data.translations.minutes),q("span",null)):"",q("span",null,window.wplms_course_data.translations.seconds))),q("div",{className:"slice"},q("div",{className:"bar"}),q("div",{className:"fill"}))))))};const{createContext:P}=wp.element;var I=P({course:{},activeTab:"create_course",update:e=>{}});const{createElement:L,render:T,useState:A,useEffect:B,useContext:H,Fragment:R,RawHTML:D}=wp.element;var F=e=>{const[t,n]=A(e.field),[i,a]=(H(I),A({post_content:"",raw:{}})),[r,s]=A(Math.round(1e5*Math.random()));B(()=>{if(e.field&&e.field.id){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_"+e.field.id+r+"_editor",content:e.field.hasOwnProperty("value")?e.field.value:"",raw:e.field.hasOwnProperty("raw")?e.field.raw:"",components:e.field.components?e.field.components:"",updater:e.field.id+r}});document.dispatchEvent(t)}},[e.field]),B(()=>(e.field&&e.field.id&&document.addEventListener("vibe_editor_content_update_"+e.field.id+r,o,!1),()=>{e.field&&e.field.id&&document.removeEventListener("vibe_editor_content_update_"+e.field.id+r,o)}));const o=t=>{a({post_content:t.detail.raw_html,raw:t.detail.editor_content});let i={...e.field};i.value=t.detail.raw_html,i.raw=t.detail.editor_content,JSON.stringify(i.raw)!==JSON.stringify(e.field.raw)&&(n(i),e.update(i,e.fieldIndex,"fieldvaluechanged"))};return L("div",{className:"vibev_editor"},L("div",{className:"vibe_"+t.id+r+"_editor"},L("textarea",{value:t.value})))};const{createContext:j}=wp.element;var X=j({courseStatus:{},current_unit_key:0,update:e=>{}});var Y=function(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};const{createElement:U,useState:J,useEffect:W,Fragment:$,render:V,useContext:K}=wp.element,{dispatch:G,select:Q}=wp.data;var Z=e=>{const[t,n]=J(!0),[i,a]=J({}),[s,o]=J([]),[l,c]=J(""),[u,d]=J(!1);K(X);let p=Q("vibebp").getUser();p.token=Q("vibebp").getToken(),W(()=>{n(!0);let t=`${window.wplms_course_data.api_url}/user/content/assignmentId/${e.assignment.id}`;e.hasOwnProperty("force")&&e.force&&(t+="?force"),fetch(t,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:p.token})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{if(e){if(e.hasOwnProperty("remaining"))e.duration=e.remaining;else if(e.hasOwnProperty("start")&&!0!==e.start&&e.start){let t=parseInt(e.duration)+parseInt(e.start),n=Math.round((new Date).getTime()/1e3);e.duration=t>n?t-n:0}e.hasOwnProperty("comment_content")&&c(e.comment_content),a(e),n(!1),document.dispatchEvent(new Event("VibeBP_Editor_Content"))}}).catch(e=>{n(!1),console.error("Uh oh, an error!",e),G("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}),document.addEventListener("wplms_assignment_custom_upload",({detail:e})=>{if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("Key")&&e.data.Key.length){let t=[...s],n=e.data.Key.split("/");t.push({...e.data,name:n[n.length-1]}),o(t)}})},[e.assignment]);const m=(t=null)=>{let n=l;if(!t&&i&&i.type&&"upload"==i.type){if(!s||s.length<=0)return G("vibebp").addNotification({text:window.wplms_course_data.translations.upload_a_file}),!1;Y(n)&&(n=i.title+" - "+(p.displayname?p.displayname:p.name?p.name:""))}else if(t&&Y(n)&&(n=i.title+" - "+(p.displayname?p.displayname:p.name?p.name:"")),!n||n.length<=3)return G("vibebp").addNotification({text:window.wplms_course_data.translations.error}),!1;d(!0);var r=new FormData;r.append("body",JSON.stringify({comment:n,attachments:s,token:Q("vibebp").getToken()})),s.length&&s.map((e,t)=>{e instanceof File?r.append("files_"+t,e):r.append("files_"+t,JSON.stringify(e))}),fetch(`${window.wplms_course_data.api_url}/user/upload/assignmentId/${e.assignment.id}?post`,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:r}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(t=>{if(d(!1),t){let n={...i};if(t.attachment_urls&&t.attachment_urls.length&&(n.attachment_urls=t.attachment_urls),t.comment_id){n.flag=1,n.already_submitted=!0,e.hasOwnProperty("unitIndex")?e.update({unitIndex:e.unitIndex,assignmentIndex:e.assignmentIndex},"complete"):e.update({},"submitassignment");let t=`${window.wplms_course_data.api_url}/user/content/assignmentId/${e.assignment.id}`;"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&localforage.getItem(t).then(e=>{e&&e.length&&(e=JSON.parse(e)).hasOwnProperty("duration")&&(e=n,localforage.setItem(t,JSON.stringify(e)))});let i=window.wplms_course_data.api_url+"/student/assignments";h(i)}if(a(n),t.hasOwnProperty("message")&&G("vibebp").addNotification({text:t.message}),t.status){let t=e.course,n=e.assignment.id;document.dispatchEvent(new CustomEvent("course_item_completed",{detail:{course_id:t,item_id:n}}))}}}).catch(e=>{d(!1),console.error("Uh oh, an error!",e),G("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})},h=(e,t)=>"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&navigator.onLine?t?localforage.removeItem(e):localforage.iterate((function(t,n,i){e.length&&n.length&&n.includes(e)&&localforage.removeItem(n)})):new Promise(e=>{e(1)});let _={allowed_mime_types:i.permit_mime,allowed_file_size:parseInt(i.permit_size)};return t?U(r,null):U("div",{className:"course_assignment_wrapper"},U("div",{className:"course_assignment"},U("div",{className:"assignment_details"},U("div",{className:"assignment_marks"},U("span",null,i.total_marks),U("span",null,window.wplms_course_data.translations.total_marks)),U(z,{duration:i.duration,update:(e,t)=>{"expired"==t&&(i.already_submitted||m(!0))},quiz_id:i.id,start:i.start})),U("div",{className:"assignment_content_wrapper"},U("div",{className:"assignment_content",dangerouslySetInnerHTML:{__html:i.content}}),i.type&&"upload"==i.type&&i&&i.permit_extension&&i.permit_extension.length&&i.flag<=2?U("div",{className:"allowed_file_extenstions"},U("label",null,window.wplms_course_data.translations.allowed_file_extenstions),i.permit_extension.map(e=>U("span",null,e))):"",i.start?"":U("a",{className:"assignment_start_button button is-primary",onClick:()=>{fetch(`${window.wplms_course_data.api_url}/user/start/assignmentId/${e.assignment.id}?post`,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:Q("vibebp").getToken()})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(t=>{if(t){let n={...i};n.start=Math.round((new Date).getTime()/1e3),a(n);let r=`${window.wplms_course_data.api_url}/user/content/assignmentId/${e.assignment.id}`,s=window.wplms_course_data.api_url+"/student/assignments";h(s,!0),"undefined"!=typeof localforage&&window.vibebp.api.sw_enabled&&localforage.getItem(r).then(e=>{e&&e.length&&(e=JSON.parse(e)).hasOwnProperty("duration")&&(e.start=n.start,localforage.setItem(r,JSON.stringify(e)))}),t.hasOwnProperty("message")&&G("vibebp").addNotification({text:t.message})}}).catch(e=>{console.error("Uh oh, an error!",e),G("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})}},window.wplms_course_data.translations.start_assigmment),i.start&&i.flag<=2?U($,null,i.already_submitted?U($,null,i.attachment_urls&&i.attachment_urls.length?U($,null,window.wplms_course_data.translations.uploaded_files,U("div",{className:"assignment_attachments"},i.attachment_urls.map((e,t)=>e.hasOwnProperty("url")?U("div",null,U("a",null,e.name)):U("div",null,U("a",{href:e.url,target:"_blank",download:!0},e.name))))):"",i.hasOwnProperty("flag")&&1==i.flag&&i.duration>0?U("div",{className:"resubmit ",onClick:()=>{(()=>{let t={...i};t.already_submitted=!1,t.flag=0,e.hasOwnProperty("unitIndex")?e.update({unitIndex:e.unitIndex,assignmentIndex:e.assignmentIndex},"retake"):e.update({},"retookassignment"),a(t)})()}},U("a",{className:"button is-primary"},window.wplms_course_data.translations.resubmit,U("span",{className:"vicon vicon-close"}))):""):"",i.type&&"upload"==i.type&&!i.already_submitted?U("div",{className:"upload_assignment"},i.hasOwnProperty("custom_upload")&&i.custom_upload?U("div",null,(w=new CustomEvent("custom_assignment_upload",{detail:{data:i}}),document.dispatchEvent(w),U("div",{className:"custom_assignment_upload",id:i.custom_upload}))):U(E,{type:1,update:(e,t)=>{let n=[...s];n.push(new File([e[0]],e[0].name)),o(n)},args:_}),s?U("div",{className:"assignment_attachments"},s.map((e,t)=>U("div",null,U("span",null,e.name),U("span",{className:"vicon vicon-close",onClick:()=>{(e=>{let t=[...s];t.splice(e,1),o(t)})(t)}})))):"",U(F,l?{field:{id:"assignment_text",value:l,components:["editor"]},update:(e,t,n)=>{c(e.value)}}:{field:{id:"assignment_text",components:["editor"]},update:(e,t,n)=>{c(e.value)}})):"",!i.hasOwnProperty("type")||i.type&&"textarea"==i.type?U(F,{field:l?{id:"assignment_text",value:l,components:["editor"]}:{id:"assignment_text",components:["editor"]},update:(e,t,n)=>{c(e.value)}}):""):"",i.flag&&i.hasOwnProperty("marks")&&i.flag>1?U("div",{className:"assigment_evaluated"},i.message?U("span",null,i.message):"",i.marks?U("span",null,window.wplms_course_data.translations.marks_obtained," : ",i.marks):"",i.hasOwnProperty("instructor_remarks")?U("div",{className:"remarks"},U("h3",null,window.wplms_course_data.translations.instructor_remarks," "),U("div",{dangerouslySetInnerHTML:{__html:i.instructor_remarks}})):""):"")),i.start&&!i.already_submitted?U("a",{className:u?"button is-primary is-loading":"button is-primary",onClick:()=>{m()}},window.wplms_course_data.translations.submit_assignment):"");var w};const{createElement:ee,render:te,useState:ne,useEffect:ie,useContext:ae,Fragment:re,RawHTML:se}=wp.element,{dispatch:oe,select:le}=wp.data;var ce=e=>{const[t,n]=ne(e.timestamp),[i,a]=ne(0);let r=Math.floor(Date.now()/1e3);ie(()=>{if(n(parseInt(e.timestamp)),e.timestamp)if(e.hasOwnProperty("notimediff"))a(parseInt(e.timestamp));else{let t=e.timestamp;if(e.timestamp.toString().includes("-")){t=new Date(t).getTime()/1e3;let e=(new Date).getTimezoneOffset();e*=60,parseInt(e)>0?t-=Math.abs(e):t+=Math.abs(e)}parseInt(t)>r?a(parseInt(t)-r):a(r-parseInt(t))}},[e.timestamp]);return ee("span",{className:"friendly_time"},(()=>{if(i<0)return window.wplms_course_data.translations.expired;let t,n,a,r=0,s=0,o=0,l=[{label:window.wplms_course_data.time_labels.year.single,multi:window.wplms_course_data.time_labels.year.multi,value:31536e3},{label:window.wplms_course_data.time_labels.month.single,multi:window.wplms_course_data.time_labels.month.multi,value:2592e3,max:12},{label:window.wplms_course_data.time_labels.week.single,multi:window.wplms_course_data.time_labels.week.multi,value:604800,max:7},{label:window.wplms_course_data.time_labels.day.single,multi:window.wplms_course_data.time_labels.day.multi,value:86400,max:31},{label:window.wplms_course_data.time_labels.hour.single,multi:window.wplms_course_data.time_labels.hour.multi,value:3600,max:24},{label:window.wplms_course_data.time_labels.minute.single,multi:window.wplms_course_data.time_labels.minute.multi,value:60,max:60},{label:window.wplms_course_data.time_labels.second.single,multi:window.wplms_course_data.time_labels.second.multi,value:1,max:60}];if(i>=776736e3)return window.wplms_course_data.translations.unlimited_time;if(i<=0)return e.hasOwnProperty("notimediff")?i+" "+window.wplms_course_data.time_labels.second.multi:window.wplms_course_data.translations.just_now;for(let e=0;e<l.length;e++)if(n=l[e],s=e,n.value<i){r=Math.floor(i/n.value),r>n.max&&(r=n.max);break}return t=r+" "+(r>1?n.multi:n.label),n.value>1&&(a=l[s+1],o=Math.floor(i%n.value/a.value),o&&(t+=", "+o+" "+(o>1?a.multi:a.label))),t})())};const{createElement:ue,useState:de,useEffect:pe,Fragment:me,render:he,useRef:_e}=wp.element,{dispatch:we,select:ve}=wp.data;const{createElement:fe,render:ge,useState:ye,useEffect:be,Fragment:ke,useContext:xe,useRef:Ee}=wp.element,{dispatch:Se,select:qe}=wp.data;var Ne=e=>{const t=Ee(null),[n,i]=ye(Math.round(1e4*Math.random())),[a,r]=ye(!1),[s,o]=ye(!1),l=(e,t)=>{void 0===t&&(t=window.location.href);var n=t.match("[?&]"+e+"=([^&]+)");return n?n[1]:null};be(()=>(u().then(()=>{if(document.querySelector("#item_"+e.index)){let t={};"youtube"==e.provider&&(t.youtube={modestbranding:1}),"vimeo"==e.provider&&(t.vimeo={controls:!0,playsinline:!1}),window.wplms_course_data.course.status.seek_lock&&(t.listeners={seek:e=>{var t=a.currentTime;if(_getTargetTime(a,e)>t)return e.preventDefault(),!1}});let n=null;if(e.hasOwnProperty("video")&&e.video.hasOwnProperty("videotype")&&"360"==e.video.videotype)n=new Plyr(document.querySelector("#item_"+e.index),t),n.mediainfo=n.mediainfo||{},n.mediainfo.projection="360",n.vr({projection:"AUTO",debug:!0,forceCardboard:!1});else{if(e.hasOwnProperty("src")&&"mpd"==e.url.split(".").pop())dashjs.MediaPlayer().create().initialize(document.querySelector("#item_"+e.index),e.url,!0);if(n=new Plyr(document.querySelector("#item_"+e.index),t),e.hasOwnProperty("src")&&"m3u8"==e.url.split(".").pop())if(Hls.isSupported()){const t=new Hls;t.loadSource(e.url),t.attachMedia(document.querySelector("#item_"+e.index))}else document.querySelector("#item_"+e.index).src=e.url}n&&(o(n),n.once("loadeddata",()=>{let t=localStorage.getItem(e.url);t&&(n.currentTime=parseInt(t)),r({plyr:n,url:e.url})}),n.on("timeupdate",()=>{localStorage.setItem(e.url,Math.floor(n.currentTime))}),"youtube"==e.provider&&n.pause(),n.on("ready",()=>{if("youtube"==e.provider){let t=l("t",e.url);if(void 0!==t&&t)n.muted=!0,n.forward(parseInt(t)),n.play();else{let i=localStorage.getItem(e.url);void 0!==t&&i&&(n.muted=!0,n.forward(parseInt(i)),n.play())}}}),n.on("playing",()=>{if("youtube"==e.provider){let t=l("t",e.url);if(void 0!==t&&t)n.seekDone||(n.pause(),n.muted=!1,n.seekDone=!0);else{localStorage.getItem(e.url)&&(n.seekDone||(n.pause(),n.muted=!1,n.seekDone=!0))}}}),n.once("ended",c))}}),()=>{document.querySelector(".video_wrapper")&&document.querySelector(".video_wrapper > div")&&document.querySelector(".video_wrapper > div").remove()}),[e.url]);const c=t=>{e.update("ended",{index:e.index,src:e.url,event:t})},u=()=>{if(document.querySelector(".video_wrapper")&&document.querySelector(".video_wrapper > div")&&document.querySelector(".video_wrapper > div").remove(),"youtube"==e.provider)return localforage.getItem(e.url).then(t=>{if(t){var n=document.createElement("div"),i=document.createElement("video");i.setAttribute("id","item_"+e.index);var a=document.createElement("source");a.setAttribute("src",URL.createObjectURL(t)),a.setAttribute("type",t.type),i.appendChild(a),n.appendChild(i),document.querySelector(".video_wrapper").appendChild(n)}else{(n=document.createElement("div")).setAttribute("id","item_"+e.index),n.setAttribute("data-plyr-provider","youtube"),n.setAttribute("data-plyr-embed-id",e.embed_id),document.querySelector(".video_wrapper").appendChild(n)}});if("vimeo"==e.provider)return new Promise(t=>{var n=document.createElement("div");n.setAttribute("id","item_"+e.index),n.setAttribute("data-plyr-provider","vimeo"),n.setAttribute("data-plyr-embed-id",e.embed_id),document.querySelector(".video_wrapper").appendChild(n),t()});var t=document.createElement("div"),n=document.createElement("video");n.setAttribute("id","item_"+e.index);var i=document.createElement("source");return localforage.getItem(e.url).then(t=>{t?(i.setAttribute("src",URL.createObjectURL(t)),i.setAttribute("type",t.type)):(i.setAttribute("src",e.url),i.setAttribute("type",e.mime_type))}).then(()=>{n.appendChild(i),t.appendChild(n),document.querySelector(".video_wrapper").appendChild(t)})};return fe("div",{className:"video_wrapper item_player_"+n},"youtube"==e.provider?fe("div",{ref:t,id:"item_"+e.index,"data-plyr-provider":"youtube","data-plyr-embed-id":e.embed_id}):"vimeo"==e.provider?fe("div",{ref:t,id:"item_"+e.index,"data-plyr-provider":"vimeo","data-plyr-embed-id":e.embed_id}):"local"==e.provider?fe("div",null,fe("video",{className:"activity_meta video",ref:t,id:"item_"+e.index},fe("source",{src:e.url,type:e.mime_type}))):"")};const{createElement:Ce,render:Oe,useState:Me,useEffect:ze,Fragment:Pe}=wp.element;var Ie=e=>{const[t,n]=Me({});ze(()=>{n(e.question)},[e.question]);let i="";t.hasOwnProperty("marked_answer")&&(i=t.marked_answer);let a="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(a="question_incorrect",t.usercorrect>0&&(a="question_correct")),Ce(Pe,null,Ce("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Ce("input",{type:"text",className:a,value:i,onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")}}))};const{createElement:Le,render:Te,useState:Ae,useEffect:Be,Fragment:He}=wp.element;var Re=e=>{const[t,n]=Ae({}),[i,a]=Ae([]);Be(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&r(t),a(t)}},[e.question.correct_indexes]);const r=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}};let s="";return t.hasOwnProperty("marked_answer")&&(s=t.marked_answer),Le(He,null,Le("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Le(He,null,(t=>i.map((function(i,a){let r=t.options.findIndex(e=>e==i);return Le("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(r)?"question_correct":"question_incorrect":"")},Le("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:r,id:e.quiz_id+"_"+t.id+r,checked:parseInt(t.marked_answer)===r,onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")}}),Le("label",{for:e.quiz_id+"_"+t.id+r,dangerouslySetInnerHTML:{__html:i}}))})))(t),t.attempted?"":Le("span",{className:"resetq_answer button",onClick:t=>{let i={...e.question};i.marked_answer=null,n(i),e.update(i,e.index,"changed")}},Le("i",{class:"vicon vicon-trash"}))):"")};const{createElement:De,render:Fe,useState:je,useEffect:Xe,Fragment:Ye}=wp.element;var Ue=e=>{const[t,n]=je({});Xe(()=>{n(e.question)},[e.question]);const i=(t,i)=>{let a={...e.question};a.marked_answer&&a.marked_answer.length||(a.marked_answer=[]),a.marked_answer[i]=t,n(a),e.update(a,e.index,"changed")},a=(t,n)=>De(Ye,null,De("span",{className:t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":""},De("select",{name:e.quiz_id+"_"+t.id,id:e.quiz_id+"_"+t.id,onChange:e=>{i(e.target.value,n)}},De("option",null,window.wplms_course_data.translations.select_option),((e,t)=>e.options.map((function(n,i){return e.hasOwnProperty("options_arr")&&e.options_arr&&e.options_arr.length&&e.options_arr[t]&&e.options_arr[t].length?e.options_arr[t].includes((i+1).toString())||e.options_arr[t].includes(i+1)?De("option",{value:i,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===i,dangerouslySetInnerHTML:{__html:n}}):void 0:De("option",{value:i,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===i,dangerouslySetInnerHTML:{__html:n}})})))(t,n))),t.attempted?"":De("span",{className:"resetq_answer button",onClick:e=>{i(null,n)}},De("i",{class:"vicon vicon-trash"})));return De(Ye,null,t&&t.extra_content&&Array.isArray(t.extra_content)?De("div",{className:"question_content"},t.extra_content.map((function(e,n){return De(Ye,null,De("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),t.options&&t.options.length&&n<t.extra_content.length-1?De(Ye,null,a(t,n)):"")}))):"")};const{createElement:Je,render:We,useState:$e,useEffect:Ve,Fragment:Ke}=wp.element;var Ge=e=>{const[t,n]=$e({}),[i,a]=$e([]);"undefined"!=e.question.marked_answer&&null!=e.question.marked_answer||(e.question.marked_answer=[]),Ve(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&r(t),a(t)}},[e.question.correct_indexes]);const r=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}};return Je(Ke,null,Je("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Je(Ke,null,(t=>{if(i&&i.length)return i.map((function(i,a){let r=t.options.findIndex(e=>e==i);return Je("div",{className:"question_option checkbox "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(r)?"question_correct":"question_incorrect":"")},Je("input",{type:"checkbox",name:e.quiz_id+"_"+t.id,value:r,id:e.quiz_id+"_"+t.id+r,checked:e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.includes(r),onChange:t=>{let i={...e.question};if(i.marked_answer.includes(r)){let e=i.marked_answer.indexOf(r);e>-1&&i.marked_answer.splice(e,1)}else i.marked_answer.push(r);n(i),e.update(i,e.index,"changed")}}),Je("label",{for:e.quiz_id+"_"+t.id+r,dangerouslySetInnerHTML:{__html:i}}))}))})(t),t.attempted?"":Je("span",{className:"resetq_answer button",onClick:t=>{let i={...e.question};i.marked_answer=null,n(i),e.update(i,e.index,"changed")}},Je("i",{class:"vicon vicon-trash"}))):"")};const{createElement:Qe,render:Ze,useState:et,useEffect:tt,Fragment:nt}=wp.element;var it=e=>{const[t,n]=et("120"),[i,a]=et(()=>{let t="";return e.marked_answer&&e.marked_answer.length&&(t=e.marked_answer[e.index]),t});tt(()=>{void 0!==i&&i&&i.length>15&&n(8*i.length)},[i]);let r="";i&&(r=i);return Qe(nt,null,Qe("div",{className:"fillblank_area"},Qe("input",{type:"text",value:r,onChange:t=>{let n=i;n=t.target.value,a(n),e.update(n,e.index,"changed")},style:{width:t+"px"}})))};const{createElement:at,render:rt,useState:st,useEffect:ot,Fragment:lt}=wp.element;var ct=e=>{const[t,n]=st({});ot(()=>{n(e.question)},[]);let i="";t.hasOwnProperty("marked_answer")&&(i=t.marked_answer);const a=(i,a,r)=>{if("changed"==r){let r={...t};r.marked_answer&&t.marked_answer.length||(r.marked_answer=[]),r.marked_answer[a]=i,n(r),e.update(r,e.index,"changed")}};return at(lt,null,t&&t.extra_content&&Array.isArray(t.extra_content)?at("div",{className:"question_content"},t.extra_content.map((function(e,n){return at(lt,null,at("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),n<t.extra_content.length-1?at("div",{className:"fillblank_area "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":"")},at(it,{update:a,index:n,marked_answer:t.marked_answer})):"")}))):"")};const{createElement:ut,render:dt,useState:pt,useEffect:mt,Fragment:ht}=wp.element;var _t=e=>{const[t,n]=pt([]),[i,a]=pt(!1),[r,s]=pt([]),[o,l]=pt([]),[c,u]=pt([]),[d,p]=pt([]);mt(()=>{s(e.items)},[e.items]);let m="droppable";i&&(m+=" active");const h=e=>{let t="";return i===r[e]&&(t="dragging"),t};return ut("div",{className:m},r.map((m,_)=>ut("div",{key:_,onDragStart:e=>{r[_]&&a(r[_])},onDragEnd:()=>{a(!1)},onDragOver:t=>{t.preventDefault(),((t,n)=>{if(!i)return;let a=r[n];if(i===a)return;let o=[...r];o=o.filter(e=>e!=i),o.splice(n,0,i),s(o),e.update(o,"changed")})(0,_)},ref:e=>{((e,i)=>{if(e){let a=t;a[i]||(a[i]=e),n(a)}})(e,_)},draggable:"true",style:d[_],onTouchStart:e=>{let n=[...c];t.map((e,t)=>{let i=e.getBoundingClientRect();n[t]=i}),u(n),r[_]&&a(r[_])},onTouchMove:e=>{e.preventDefault();let t=[];if("touchmove"===e.type){let n=[...d];n[_]={transform:"translateY("+Math.floor(e.touches[0].clientY-c[_].top)+"px)"},p(n),t.push(r[_]);let i=[];if(e.touches[0].clientY&&c.map((n,a)=>{n.top+n.height/2>e.touches[0].clientY&&r[a]!==r[_]&&t.push(r[a]),n.bottom-n.height/2<e.touches[0].clientY&&r[a]!==r[_]&&i.push(r[a])}),i.length)for(let e=i.length-1;e>=0;e--)t.unshift(i[e]);l(t)}},onTouchEnd:t=>{s(o),e.update(o,"changed"),u([]),p([]),a(!1),l([])},className:h(_)+" "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(_)?"question_correct":"question_incorrect":"")},ut("div",{dangerouslySetInnerHTML:{__html:m}}))))};const{createElement:wt,render:vt,useState:ft,useEffect:gt,Fragment:yt}=wp.element;var bt=e=>{e.question.id,e.quiz_id;const[t,n]=ft({}),[i,a]=ft(!1);gt(()=>{let t=e.question;if(!i&&t&&t.marked_answer&&t.marked_answer.length&&"undefined"!=t.marked_answer){let e=[];t.marked_answer.map((n,i)=>{e.push(t.original_options[parseInt(n)-1])}),t.options=e,n(t),a(!0)}n(t)},[t]);return wt(yt,null,wt("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?wt(yt,null,wt(_t,{items:t.options,original_items:t.original_options,update:(i,a)=>{if("changed"==a){let a=t;a.marked_answer=[],i.map((e,t)=>{let n=a.original_options.indexOf(e);a.marked_answer.push(n+1)}),n(a),e.update(a,e.index,"changed")}},question:t}),t.attempted?"":wt("span",{className:"resetq_answer button",onClick:i=>{let a={...t};a.marked_answer=null,a.options=a.original_options,n(a),e.update(a,e.index,"changed")}},wt("i",{class:"vicon vicon-trash"}))):"")};const{createElement:kt,render:xt,useState:Et,useEffect:St,Fragment:qt}=wp.element;function Nt(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Ct=e=>{const[t,n]=Et([]),[i,a]=Et(!1),[r,s]=Et([]),[o,l]=Et(""),[c,u]=Et([]),[d,p]=Et(e.matches),[m,h]=Et([]),[_,w]=Et([]),[v,f]=Et([]),[g,y]=Et({}),[b,k]=Et([]),[x,E]=Et([]),[S,q]=Et([]),[N,C]=Et({x:0,y:0}),[O,M]=Et([]);St(()=>{let t=[...e.items];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(n=>{n&&"NaN"!=typeof n&&(t=t.filter(t=>t!=e.question.original_options[n-1]))}),u(t);let n=[];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(e=>{parseFloat(e)-1>=0?n.push(e-1):n.push(null)}),q(n),e.update(!1,"reset")},[e.items,e.reset]);let z="droppable";i&&(z+=" active");const P=e=>{let t="";return i===c[e]&&(t="dragging"),t};return kt("div",{className:"match_playground"},kt("div",{className:"match_options"},d&&d.length?d.map((n,l)=>kt("div",{key:l,className:"match_option "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(l)?"question_correct":"question_incorrect":""),onDrop:t=>{((t,n)=>{if(!i)return;if(O.index===n)return;let a=[...c],r=[...S];if(!r[n]&&0!==r[n]){a=a.filter(e=>e!=i);let t=e.original_items.indexOf(i);d&&d.length&&d.map((e,t)=>{Nt(r[t])&&(r[t]=null)}),Nt(n)||(r[n]=t),q(r),u(a),e.update(r,"changed")}})(0,l)},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,t)=>{if(e){let n=r;n[t]||(n[t]=e),s(n)}})(e,l)}},kt("div",{dangerouslySetInnerHTML:{__html:n}}),kt("div",{className:"children"},e.original_items&&null!=S[l]&&e.original_items[S[l]]?kt("div",{key:"droppablediv"+l,draggable:"true",onDragStart:t=>{e.original_items[S[l]]&&(a(e.original_items[S[l]]),M({index:l,source:"droppablediv"}))},onDragEnd:()=>{a(!1),M({})},onDragOver:e=>{e.preventDefault()},className:P(l),style:x[S[l]],onTouchStart:n=>{let i=[..._];t.map((e,t)=>{let n=e.getBoundingClientRect();i[t]=n}),w(i);let s=[...v];r.map((e,t)=>{let n=e.getBoundingClientRect();s[t]=n}),f(s),y(o.getBoundingClientRect()),e.original_items[S[l]]&&(a(e.original_items[S[l]]),M({index:l,source:"droppablediv"})),M({})},onTouchMove:e=>{if(e&&(e.preventDefault(),"touchmove"===e.type)){let t=[...x];t[S[l]]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},E(t),C({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{let n=[...c],r=[...S];g.top<N.y&&g.top+g.height>N.y&&g.left<N.x&&g.left+g.width>N.x&&(n.push(i),r.map((e,t)=>{e==S[l]&&(r[t]=null)})),f([]),y({}),a(!1),E([]),k([]),u(n),q(r),e.update(r,"changed"),C({x:0,y:0})}},kt("div",{dangerouslySetInnerHTML:{__html:e.original_items[S[l]]}})):""))):""),kt("div",{className:z,onDragOver:e=>{e.preventDefault()},onDrop:t=>{(t=>{if("droppablediv"!==O.source)return;if(!i)return;let n=[...c],a=[...S];n.includes(i)||n.push(i),u(n),Nt(O.index)||(a[O.index]=null),q(a),e.update(a,"changed")})()},ref:e=>{var t;(t=e)&&l(t)}},c&&c.length?c.map((i,s)=>kt("div",{key:"draggablediv"+s,onDragStart:e=>{c[s]&&a(c[s]),M({})},onDragEnd:()=>{a(!1),M({})},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,i)=>{if(e){let a=t;a[i]||(a[i]=e),n(a)}})(e,s)},draggable:"true",style:b[s],onTouchStart:e=>{let n=[..._];t.map((e,t)=>{let i=e.getBoundingClientRect();n[t]=i}),w(n);let s=[...v];r.map((e,t)=>{let n=e.getBoundingClientRect();s[t]=n}),f(s),i&&a(i),M({})},onTouchMove:e=>{if(e.preventDefault(),"touchmove"===e.type){let t=[...b];t[s]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},k(t),C({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{k([]);let n=[...c],r=[...S];v.map((t,a)=>{if(t.top<N.y&&t.top+t.height>N.y&&t.left<N.x&&t.left+t.width>N.x){let t=e.original_items.indexOf(i);t>=0&&!r[a]&&0!==r[a]&&(r[a]=t,n=n.filter(e=>e!=i))}}),f([]),a(!1),u(n),q(r),e.update(r,"changed"),C({x:0,y:0})},className:P(s)},kt("div",{dangerouslySetInnerHTML:{__html:i}}))):""))};const{createElement:Ot,render:Mt,useState:zt,useEffect:Pt,Fragment:It}=wp.element;var Lt=e=>{e.question.id,e.quiz_id;const[t,n]=zt({}),[i,a]=zt(!1);Pt(()=>{n(e.question)},[t]);return Ot(It,null,Ot("div",{className:"question_content"},Ot("div",{className:"question_statement",dangerouslySetInnerHTML:{__html:t&&t.extra_content&&t.extra_content.statement?t.extra_content.statement:""}}),t.options&&t.options.length&&t.content.match&&t.content.match.length?Ot(Ct,{matches:t.extra_content.match,original_matches:t.extra_content.match,items:t.options,original_items:t.original_options,update:(i,r)=>{if("changed"==r){let a={...t};a.marked_answer=[],i.map(e=>{a.marked_answer.push(parseInt(e)+1)}),n(a),e.update(a,e.index,"changed")}"reset"==r&&a(!1)},reset:i,question:t}):"",Ot("div",{className:"question_end",dangerouslySetInnerHTML:{__html:t&&t.content&&t.content.end?t.content.end:""}})),t.attempted?"":Ot("span",{className:"resetq_answer button",onClick:i=>{a(!0);let r={...t};r.marked_answer=null,r.options=r.original_options,n(r),e.update(r,e.index,"changed")}},Ot("i",{class:"vicon vicon-trash"})))};const{createElement:Tt,render:At,useState:Bt,useEffect:Ht,Fragment:Rt}=wp.element;var Dt=e=>{const[t,n]=Bt(e.question);let i="";return t.hasOwnProperty("marked_answer")&&(i=t.marked_answer),Tt(Rt,null,Tt("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Tt(Rt,null,(t=>t.options.map((function(i,a){return Tt("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(a)?"question_correct":"question_incorrect":"")},Tt("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:a,id:e.quiz_id+"_"+t.id+a,checked:parseInt(t.marked_answer)===a,onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")}}),Tt("label",{for:e.quiz_id+"_"+t.id+a,dangerouslySetInnerHTML:{__html:i}}))})))(t),t.attempted?"":Tt("span",{className:"resetq_answer button",onClick:t=>{let i={...e.question};i.marked_answer=null,n(i)}},Tt("i",{class:"vicon vicon-trash"}))):"")};const{createElement:Ft,render:jt,useState:Xt,useEffect:Yt,Fragment:Ut}=wp.element;var Jt,Wt,$t=e=>{const[t,n]=Xt({});Yt(()=>{n(e.question)},[e.question]);let i="";t.hasOwnProperty("marked_answer")&&(i=t.marked_answer);let a="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(a="question_incorrect",t.usercorrect>0&&(a="question_correct")),Ft(Ut,null,Ft("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Ft("textarea",{className:a,type:"text",onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")},value:i},i))},Vt=Vt||function(e,t){var n={},i=n.lib={},a=function(){},r=i.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var a=0;a<e;a++)t[i+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(i+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[i+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),o=n.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},c=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},u=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,a=n.sigBytes,r=this.blockSize,o=a/(4*r);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*r,a=e.min(4*t,a),t){for(var l=0;l<t;l+=r)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=a}return new s.init(l,a)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);Wt=(Jt=Vt).lib.WordArray,Jt.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var a=0;a<n;a+=3)for(var r=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;4>s&&a+.75*s<n;s++)e.push(i.charAt(r>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(i=n.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],a=0,r=0;r<t;r++)if(r%4){var s=n.indexOf(e.charAt(r-1))<<r%4*2,o=n.indexOf(e.charAt(r))>>>6-r%4*2;i[a>>>2]|=(s|o)<<24-a%4*8,a++}return Wt.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,i,a,r,s){return((e=e+(t&n|~t&i)+a+s)<<r|e>>>32-r)+t}function n(e,t,n,i,a,r,s){return((e=e+(t&i|n&~i)+a+s)<<r|e>>>32-r)+t}function i(e,t,n,i,a,r,s){return((e=e+(t^n^i)+a+s)<<r|e>>>32-r)+t}function a(e,t,n,i,a,r,s){return((e=e+(n^(t|~i))+a+s)<<r|e>>>32-r)+t}for(var r=Vt,s=(l=r.lib).WordArray,o=l.Hasher,l=r.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var s=0;16>s;s++){var o=e[l=r+s];e[l]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}s=this._hash.words;var l=e[r+0],u=(o=e[r+1],e[r+2]),d=e[r+3],p=e[r+4],m=e[r+5],h=e[r+6],_=e[r+7],w=e[r+8],v=e[r+9],f=e[r+10],g=e[r+11],y=e[r+12],b=e[r+13],k=e[r+14],x=e[r+15],E=t(E=s[0],N=s[1],q=s[2],S=s[3],l,7,c[0]),S=t(S,E,N,q,o,12,c[1]),q=t(q,S,E,N,u,17,c[2]),N=t(N,q,S,E,d,22,c[3]);E=t(E,N,q,S,p,7,c[4]),S=t(S,E,N,q,m,12,c[5]),q=t(q,S,E,N,h,17,c[6]),N=t(N,q,S,E,_,22,c[7]),E=t(E,N,q,S,w,7,c[8]),S=t(S,E,N,q,v,12,c[9]),q=t(q,S,E,N,f,17,c[10]),N=t(N,q,S,E,g,22,c[11]),E=t(E,N,q,S,y,7,c[12]),S=t(S,E,N,q,b,12,c[13]),q=t(q,S,E,N,k,17,c[14]),E=n(E,N=t(N,q,S,E,x,22,c[15]),q,S,o,5,c[16]),S=n(S,E,N,q,h,9,c[17]),q=n(q,S,E,N,g,14,c[18]),N=n(N,q,S,E,l,20,c[19]),E=n(E,N,q,S,m,5,c[20]),S=n(S,E,N,q,f,9,c[21]),q=n(q,S,E,N,x,14,c[22]),N=n(N,q,S,E,p,20,c[23]),E=n(E,N,q,S,v,5,c[24]),S=n(S,E,N,q,k,9,c[25]),q=n(q,S,E,N,d,14,c[26]),N=n(N,q,S,E,w,20,c[27]),E=n(E,N,q,S,b,5,c[28]),S=n(S,E,N,q,u,9,c[29]),q=n(q,S,E,N,_,14,c[30]),E=i(E,N=n(N,q,S,E,y,20,c[31]),q,S,m,4,c[32]),S=i(S,E,N,q,w,11,c[33]),q=i(q,S,E,N,g,16,c[34]),N=i(N,q,S,E,k,23,c[35]),E=i(E,N,q,S,o,4,c[36]),S=i(S,E,N,q,p,11,c[37]),q=i(q,S,E,N,_,16,c[38]),N=i(N,q,S,E,f,23,c[39]),E=i(E,N,q,S,b,4,c[40]),S=i(S,E,N,q,l,11,c[41]),q=i(q,S,E,N,d,16,c[42]),N=i(N,q,S,E,h,23,c[43]),E=i(E,N,q,S,v,4,c[44]),S=i(S,E,N,q,y,11,c[45]),q=i(q,S,E,N,x,16,c[46]),E=a(E,N=i(N,q,S,E,u,23,c[47]),q,S,l,6,c[48]),S=a(S,E,N,q,_,10,c[49]),q=a(q,S,E,N,k,15,c[50]),N=a(N,q,S,E,m,21,c[51]),E=a(E,N,q,S,y,6,c[52]),S=a(S,E,N,q,d,10,c[53]),q=a(q,S,E,N,f,15,c[54]),N=a(N,q,S,E,o,21,c[55]),E=a(E,N,q,S,w,6,c[56]),S=a(S,E,N,q,x,10,c[57]),q=a(q,S,E,N,h,15,c[58]),N=a(N,q,S,E,b,21,c[59]),E=a(E,N,q,S,p,6,c[60]),S=a(S,E,N,q,g,10,c[61]),q=a(q,S,E,N,u,15,c[62]),N=a(N,q,S,E,v,21,c[63]);s[0]=s[0]+E|0,s[1]=s[1]+N|0,s[2]=s[2]+q|0,s[3]=s[3]+S|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var r=e.floor(i/4294967296);for(n[15+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,i=0;4>i;i++)a=n[i],n[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),function(){var e,t=Vt,n=(e=t.lib).Base,i=e.WordArray,a=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),a=i.create(),r=a.words,s=o.keySize,o=o.iterations;r.length<s;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var c=1;c<o;c++)l=n.finalize(l),n.reset();a.concat(l)}return a.sigBytes=4*s,a}});t.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)}}(),Vt.lib.Cipher||function(e){var t=(m=Vt).lib,n=t.Base,i=t.WordArray,a=t.BufferedBlockAlgorithm,r=m.enc.Base64,s=m.algo.EvpKDF,o=t.Cipher=a.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,i){return("string"==typeof n?h:p).encrypt(e,t,n,i)},decrypt:function(t,n,i){return("string"==typeof n?h:p).decrypt(e,t,n,i)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=m.mode={},c=function(e,t,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=i[a]},u=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;c.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),u.Decryptor=u.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,a=e.slice(t,t+i);n.decryptBlock(e,t),c.call(this,e,t,i),this._prevBlock=a}}),l=l.CBC=u,u=(m.pad={}).Pkcs7={pad:function(e,t){for(var n,a=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,r=[],s=0;s<n;s+=4)r.push(a);n=i.create(r,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:l,padding:u}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(l=(m.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){var t=(e=r.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:l}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var a=e.createEncryptor(n,i);return t=a.finalize(t),a=a.cfg,d.create({ciphertext:t,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),m=(m.kdf={}).OpenSSL={execute:function(e,t,n,a){return a||(a=i.random(8)),e=s.create({keySize:t+n}).compute(e,a),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:a})}},h=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:m}),encrypt:function(e,t,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,(e=p.encrypt.call(this,e,t,n.key,i)).mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,p.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=Vt,t=e.lib.BlockCipher,n=e.algo,i=[],a=[],r=[],s=[],o=[],l=[],c=[],u=[],d=[],p=[],m=[],h=0;256>h;h++)m[h]=128>h?h<<1:h<<1^283;var _=0,w=0;for(h=0;256>h;h++){var v=(v=w^w<<1^w<<2^w<<3^w<<4)>>>8^255&v^99;i[_]=v,a[v]=_;var f=m[_],g=m[f],y=m[g],b=257*m[v]^16843008*v;r[_]=b<<24|b>>>8,s[_]=b<<16|b>>>16,o[_]=b<<8|b>>>24,l[_]=b,b=16843009*y^65537*g^257*f^16843008*_,c[v]=b<<24|b>>>8,u[v]=b<<16|b>>>16,d[v]=b<<8|b>>>24,p[v]=b,_?(_=f^m[m[m[y^f]]],w^=m[m[w]]):_=w=1}var k=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),a=this._keySchedule=[],r=0;r<n;r++)if(r<t)a[r]=e[r];else{var s=a[r-1];r%t?6<t&&4==r%t&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=k[r/t|0]<<24),a[r]=a[r-t]^s}for(e=this._invKeySchedule=[],t=0;t<n;t++)r=n-t,s=t%4?a[r]:a[r-4],e[t]=4>t||4>=r?s:c[i[s>>>24]]^u[i[s>>>16&255]]^d[i[s>>>8&255]]^p[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,o,l,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,u,d,p,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,a,r,s,o){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],m=4,h=1;h<l;h++){var _=i[c>>>24]^a[u>>>16&255]^r[d>>>8&255]^s[255&p]^n[m++],w=i[u>>>24]^a[d>>>16&255]^r[p>>>8&255]^s[255&c]^n[m++],v=i[d>>>24]^a[p>>>16&255]^r[c>>>8&255]^s[255&u]^n[m++];p=i[p>>>24]^a[c>>>16&255]^r[u>>>8&255]^s[255&d]^n[m++],c=_,u=w,d=v}_=(o[c>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&p])^n[m++],w=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[p>>>8&255]<<8|o[255&c])^n[m++],v=(o[d>>>24]<<24|o[p>>>16&255]<<16|o[c>>>8&255]<<8|o[255&u])^n[m++],p=(o[p>>>24]<<24|o[c>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^n[m++],e[t]=_,e[t+1]=w,e[t+2]=v,e[t+3]=p},keySize:8});e.AES=t._createHelper(n)}();var Kt=Vt,Gt={stringify:function(e){var t={ct:e.ciphertext.toString(Kt.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),n=Kt.lib.CipherParams.create({ciphertext:Kt.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=Kt.enc.Hex.parse(t.iv)),t.s&&(n.salt=Kt.enc.Hex.parse(t.s)),n}};var Qt=e=>{let t="";if(!e.type)return t;if(!e.marked||"undefined"==e.marked)return t;switch(e.type){case"truefalse":case"single":case"survey":t=e.options[parseInt(e.marked)];break;case"multiple":if(t="",(n=e.marked.split(",")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])]+(i+1<n.length?" , ":"");break;case"sort":case"match":if((n=e.marked.split(",")).length)for(let i=0;i<n.length;i++)"undefined"!==e.original_options[parseInt(n[i])-1]&&null!=e.original_options[parseInt(n[i])-1]&&""!=e.original_options[parseInt(n[i])-1]||(e.original_options[parseInt(n[i])-1]="____"),t+=e.original_options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"select":if(t="",(n=e.marked.split("|")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])]+(i+1<n.length?" , ":"");break;case"fillblank":case"text":var n;if(t="",(n=e.marked.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"");break;case"largetext":case"smalltext":t=e.marked}return t};var Zt=e=>{let t="";if(!e.type)return"";switch(e.type){case"truefalse":t=e.correct?window.wplms_course_data.translations.true:window.wplms_course_data.translations.false;break;case"single":case"survey":t=e.options[parseInt(e.correct)-1];break;case"multiple":if(t="",(n=e.correct.split(",")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"sort":case"match":if(t="",(n=e.correct.split(",")).length)for(let i=0;i<n.length;i++)t+=e.original_options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"select":if(t="",(n=e.correct.split("|")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"fillblank":case"text":case"largetext":case"smalltext":var n;if(t="",(n=e.correct.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"")}return t};function en(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var tn=(e,t=null,n=null,i=null,a=!0)=>{i&&(i=parseFloat(i)),n||(i=null);let r=0,s=[],o=0;e.user_marks=0;let l=0,c=null;en(e.correct)||(c=JSON.parse(Kt.AES.decrypt(e.correct,e.key,{format:Gt}).toString(Kt.enc.Utf8))),e.correct=c,e.marked_answer&&"undefined"!=e.marked_answer||(e.marked_answer=null);let u=e.marked_answer;switch(e.type){case"truefalse":e.marked=u,e.correct=parseInt(c),u==c?(e.user_marks=e.marks,r=1):e.user_marks=0,s.push(c);break;case"single":e.marked=u,u==c-1?(e.user_marks=e.marks,r=1):e.user_marks=0,s.push(c-1);break;case"multiple":en(u)&&(u=[]);var d=u;e.marked=u.join(",").slice();var p=c.split(",");if(s=p,t){if(d.length)for(let e=0;e<d.length;e++){let t=d[e]+1;t=t.toString(),-1!==p.indexOf(t)?o++:l++}r=o/p.length,e.user_marks=Math.round(e.marks*r*100)/100}else if(d.length==p.length)for(let t=0;t<d.length;t++){e.user_marks=e.marks,r=1;let n=d[t]+1;if(n=n.toString(),-1==p.indexOf(n)){e.user_marks=0,r=0;break}}break;case"match":case"sort":en(u)&&(u=[]),e.marked=u.join(",").slice();let n=u,i=c.split(","),a=0;if(n&&n.length){for(let t=0;t<n.length;t++){e.user_marks=e.marks,r=1;let c="";en(n[t])||(c=n[t].toString()),i[t]!=c?(r&&(e.user_marks=0,r=0,a=1),l++):(o++,s.push(t))}t?(r=o/i.length,e.user_marks=Math.round(e.marks*r*100)/100):a&&(e.user_marks=0,r=0)}break;case"fillblank":en(u)&&(u=[]),u.map((e,t)=>{u[t]=e.toLowerCase()}),e.marked=u.join("|").slice(),c=c.toLowerCase();let m=c.split("|");if(e.user_marks=0,u.length){e.user_marks=e.marks,r=1;for(let t=0;t<u.length;t++){let n="";en(u[t])||(n=u[t].toString());let i=[];en(m[t])||Array.isArray(m[t])||(i=m[t].split(",")),-1==i.indexOf(n)?(r&&(e.user_marks=0,r=0),l++):(o++,s.push(t))}t?(r=o/m.length,e.user_marks=Math.round(e.marks*r*100)/100):u.length!==m.length&&(e.user_marks=0,r=0)}break;case"select":en(u)&&(u=[]),e.marked=u.join("|").slice();let h=c.split("|");if(e.user_marks=0,u&&u.length){e.user_marks=e.marks,r=1;for(let t=0;t<u.length;t++){let n="";n=(parseInt(u[t])+1).toString(),n!=h[t]?(r&&(e.user_marks=0,r=0),l++):(o++,s.push(t))}t?(r=o/h.length,e.user_marks=Math.round(e.marks*r*100)/100):u.length!==h.length&&(e.user_marks=0,r=0)}break;case"smalltext":case"largetext":e.marked=u,u&&c&&u.toLowerCase()==c.toLowerCase()?(e.user_marks=e.marks,r=1):e.user_marks=0}if(!en(u)&&i&&(t&&l>0?e.user_marks=e.user_marks-l*i:r||(e.user_marks=e.user_marks-i)),e.auto||a||(e.user_marks=0,e.show_correct_answer=0),s&&s.length)for(var m=s.length-1;m>=0;m--)"multiple"==e.type?s[m]=parseInt(s[m]-1):s[m]=parseInt(s[m]);return e.correct_indexes=s,e.auto&&(e.usercorrect=r,e.attempted=!0),e.marked=Qt(e),e.correct=Zt(e),e};const{createElement:nn,render:an,useState:rn,useEffect:sn,Fragment:on,RawHTML:ln}=wp.element;var cn=e=>{const[t,n]=rn({}),[i,a]=rn(!1);sn(()=>{n(e.question),setTimeout(()=>{a(!0)},200)},[]);let r="incorrect",s="checked_answer incorrect";return t.hasOwnProperty("user_marks")&&t.user_marks&&parseFloat(t.user_marks)>0&&(r="correct",s="checked_answer correct"),nn(on,null,t.show_correct_answer&&void 0!==t.correct&&t.correct.length?nn("div",{className:s},nn("strong",null,window.wplms_course_data.translations.correct_answer,nn(ln,null,t.correct))):"",nn("div",{className:i?"question_wrapper loaded":"question_wrapper"},nn("div",{className:"result"},nn("div",{className:r},nn("span",null),nn("strong",null,t.user_marks)))))};const{createElement:un,render:dn,useState:pn,useEffect:mn,Fragment:hn}=wp.element;var _n=e=>{let t="",n="";return mn(()=>{},[e.question]),e.question.hasOwnProperty("show_hint")&&e.question.show_hint?(n="question_hint_content message show",t="question_hint show"):(e.question.show_hint=0,n="question_hint_content message",t="question_hint"),un(hn,null,e.question.hint?un("span",{className:t,onClick:t=>{e.question.show_hint=!e.question.show_hint,e.update({...e.question},e.index,"changed")}}):"",e.question.hint?un("span",{className:n,dangerouslySetInnerHTML:{__html:e.question.hint}}):"")};const{createElement:wn,render:vn,useState:fn,useEffect:gn,Fragment:yn}=wp.element,{dispatch:bn,select:kn}=wp.data;var xn=e=>{const[t,n]=fn({}),[i,a]=fn(!1),[s,o]=fn(null);gn(()=>{n(e.question),a(!0)},[e.question]);const l=(e,i=0,a)=>{let r={...t};"changed"==a&&(r=e,n(r),!function(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.marked_answer)?"object"==typeof e.marked_answer||Array.isArray(e.marked_answer)?localStorage.setItem(e.id,JSON.stringify(e.marked_answer)):localStorage.setItem(e.id,e.marked_answer):null==e.marked_answer&&localStorage.removeItem(e.id))};return i?t?wn(yn,null,wn("div",{className:"incourse"},wn("div",{className:"quiz_questions_content"},wn("div",{className:"question_cwrapper"},wn("div",{className:"question","data-i":e.i},wn(_n,{question:t,update:l}),(e=>{switch(e.type){case"smalltext":return wn(Ie,{question:e,update:l});case"single":return wn(Re,{question:e,update:l,quiz_id:e.id});case"select":return wn(Ue,{question:e,update:l,quiz_id:e.id});case"multiple":return wn(Ge,{question:e,update:l,quiz_id:e.id});case"fillblank":return wn(ct,{question:e,update:l,quiz_id:e.id});case"sort":return wn(bt,{question:e,update:l,quiz_id:e.id});case"match":return wn(Lt,{question:e,update:l,quiz_id:e.id});case"truefalse":return wn(Dt,{question:e,update:l,quiz_id:e.id});case"largetext":return wn($t,{question:e,update:l,quiz_id:e.id})}})({...t}),t.attempted?"":wn("div",{className:"quiz_check_answer button",onClick:e=>{(e=>{let t={...e};a(!1),t=tn(t,null,null,null,!0),t.attempted=!0,a(!0),n(t)})(t)}},window.wplms_course_data.translations.check_answer),t.attempted?wn(cn,{question:t}):"",t.attempted&&t.explanation.length?wn("div",{className:"explanation"},wn("strong",null,window.wplms_course_data.translations.question_explanation),wn("div",{dangerouslySetInnerHTML:{__html:t.explanation}})):"")),t.attempted&&window.wplms_course_data.question_retries?wn("div",{className:"quiz_check_answer button",onClick:e=>{(()=>{let e={...t};if(e.hasOwnProperty("original")){let t=e;e=t.original,e.original=t.original,n(e)}})()}},wn("span",{className:"vicon vicon-reload"}),window.wplms_course_data.translations.retry):""))):"":wn(r,null)};const{createElement:En,render:Sn,useState:qn,useEffect:Nn,Fragment:Cn}=wp.element,{dispatch:On,select:Mn}=wp.data;function zn(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Pn=e=>{const[t,n]=qn([]),[i,a]=qn(!1),[s,o]=qn(0);Nn(()=>{l()},[e.questions,s]);const l=()=>{a(!1);let t=`${window.wplms_course_data.api_url}/course/questions/?client_id=${window.wplms_course_data.client_id}`;e.hasOwnProperty("force")&&e.force&&(t+="?force"),fetch(t,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({questions:e.questions,page:s+1,per_page:window.wplms_course_data.practice_questions})}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{if(e.status){if(e.questions){let t=[];e.questions.map(e=>{let n=localStorage.getItem(e.id);!zn(n)&&zn(e.marked_answer)&&(!function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(n)?e.marked_answer=n:e.marked_answer=JSON.parse(n)),t.push(e)}),n(t)}a(!0)}else console.log(e)}).catch(e=>{a(!0),console.error("Uh oh, an error!",e),On("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})})};return En("div",{className:"practice_questions"},i?t.filter((e,t)=>t<(s+1)*window.wplms_course_data.practice_questions).map(e=>En(xn,{question:e,i:s*window.wplms_course_data.practice_questions+t.indexOf(e)+1})):En(r,null),e.questions.length>window.wplms_course_data.practice_questions?En("div",{className:"buttons has-addons"},s>0?En("span",{className:"button vicon vicon-angle-left",onClick:()=>{i&&o(s-1)}}):"",s<Math.floor(e.questions.length/window.wplms_course_data.practice_questions)?En("span",{className:"button vicon vicon-angle-right",onClick:()=>{i&&o(s+1)}}):""):"")};const{createElement:In,render:Ln,useState:Tn,useEffect:An,Fragment:Bn,useContext:Hn}=wp.element,{dispatch:Rn,select:Dn}=wp.data;var Fn=e=>{const[t,n]=Tn(null),[i,a]=Tn(e.curriculumItem),[r,s]=Tn(!1),[o,l]=Tn(!1),[c,u]=Tn(!1),[d,m]=Tn(!1);Hn(X);An(()=>{a({...e.curriculumItem})},[e.curriculumItem]),An(()=>{var e;if(document.querySelector(".wp-playlist.wp-video-playlist")&&(void 0!==(e=JSON.parse(document.querySelector(".wp-playlist-script").innerHTML))&&e&&e.hasOwnProperty("tracks")&&e.tracks.length)){document.querySelector(".wp-playlist video")&&document.querySelector(".wp-playlist video").remove(),(n=document.createElement("div")).classList.add("wplms-playlist");var t=document.createElement("video");n.appendChild(t),document.querySelector(".wp-playlist.wp-video-playlist").parentNode.appendChild(n),setTimeout(()=>{new Plyr(".wplms-playlist video").source={type:"video",sources:e.tracks};var t=document.createElement("div");t.classList.add("wplms_playlist");let n=document.createElement("div");n.classList.add("prevnextbuttonsdiv");let i=document.createElement("span");i.classList.add("wp-playlist-prev-button");let a=document.createElement("span");a.classList.add("wp-playlist-next-button"),n.appendChild(i),n.appendChild(a),document.querySelector(".wp-playlist.wp-video-playlist").parentNode.prepend(n),a.onclick=e=>{h(e,"forward","video")},i.onclick=e=>{h(e,"backward","video")},e.tracks.map((e,n)=>{var i=document.createElement("span");i.classList.add("track"),i.setAttribute("data-url",e.src),i.innerHTML=e.title,n<1&&i.classList.add("active"),i.onclick=t=>{t.preventDefault(),document.querySelector(".wplms_playlist .track")&&document.querySelectorAll(".wplms_playlist .track").forEach((e,t)=>{e.classList.remove("active")}),t.target.classList.add("active"),document.querySelector(".wplms-playlist video")&&document.querySelector(".wplms-playlist video").remove();var n=document.createElement("div");n.classList.add("wplms-playlist");var i=document.createElement("video");n.appendChild(i),document.querySelector(".wp-playlist.wp-video-playlist").parentNode.appendChild(n),setTimeout(()=>{new Plyr(".wplms-playlist video").source={type:"video",sources:[e]}},200)},t.appendChild(i)}),document.querySelector(".wp-playlist.wp-video-playlist").appendChild(t)},200)}if(document.querySelector(".wp-playlist.wp-audio-playlist")&&(void 0!==(e=JSON.parse(document.querySelector(".wp-playlist-script").innerHTML))&&e&&e.hasOwnProperty("tracks")&&e.tracks.length)){var n;document.querySelector(".wp-playlist audio")&&document.querySelector(".wp-playlist audio").remove(),document.querySelector(".wp-playlist-current-item")&&document.querySelector(".wp-playlist-current-item").remove(),(n=document.createElement("div")).classList.add("wplms-playlist");t=document.createElement("audio");n.appendChild(t),document.querySelector(".wp-playlist.wp-audio-playlist").parentNode.appendChild(n),setTimeout(()=>{new Plyr(".wplms-playlist audio").source={type:"audio",sources:e.tracks};var t=document.createElement("div");t.classList.add("wplms_playlist");let n=document.createElement("div");n.classList.add("prevnextbuttonsdiv");let i=document.createElement("span");i.classList.add("wp-playlist-prev-button");let a=document.createElement("span");a.classList.add("wp-playlist-next-button"),n.appendChild(i),n.appendChild(a),document.querySelector(".wp-playlist.wp-audio-playlist").parentNode.prepend(n),a.onclick=e=>{h(e,"forward","audio")},i.onclick=e=>{h(e,"backward","audio")},e.tracks.map((e,n)=>{var i=document.createElement("span");i.classList.add("track"),i.setAttribute("data-url",e.src),i.innerHTML=e.title,n<1&&i.classList.add("active"),i.onclick=t=>{t.preventDefault(),document.querySelector(".wplms_playlist .track")&&document.querySelectorAll(".wplms_playlist .track").forEach((e,t)=>{e.classList.remove("active")}),t.target.classList.add("active"),document.querySelector(".wplms-playlist")&&document.querySelector(".wplms-playlist").remove();var n=document.createElement("div");n.classList.add("wplms-playlist");var i=document.createElement("audio");n.appendChild(i),document.querySelector(".wp-playlist.wp-audio-playlist").parentNode.appendChild(n),setTimeout(()=>{let t=new Plyr(".wplms-playlist audio");t.source={type:"audio",sources:[e]},t.play()},200)},t.appendChild(i)}),document.querySelector(".wp-playlist.wp-audio-playlist").appendChild(t)},200)}},[i]);const h=(e,t,n)=>{if("forward"==t){for(let e=0;e<document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track").length;e++)if(document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track")[e].classList.contains("active")&&e<document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track").length-1){document.querySelector(".wplms_playlist .track")&&document.querySelectorAll(".wplms_playlist .track").forEach((e,t)=>{e.classList.remove("active")}),document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track")[e+1].classList.add("active"),document.querySelector(".wplms-playlist")&&document.querySelector(".wplms-playlist").remove();let t=document.createElement("div");t.classList.add("wplms-playlist");let i=document.createElement(n);t.appendChild(i),document.querySelector(".wp-playlist.wp-"+n+"-playlist").parentNode.appendChild(t),setTimeout(()=>{let t=new Plyr(".wplms-playlist "+n);t.source={type:n,sources:[{src:document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track")[e+1].getAttribute("data-url")}]},t.play()},200);break}}else for(let e=document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track").length-1;e>=0;e--)if(document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track")[e].classList.contains("active")&&0!=e){document.querySelector(".wplms_playlist .track")&&document.querySelectorAll(".wplms_playlist .track").forEach((e,t)=>{e.classList.remove("active")}),document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track")[e-1].classList.add("active"),document.querySelector(".wplms-playlist")&&document.querySelector(".wplms-playlist").remove();var i=document.createElement("div");i.classList.add("wplms-playlist");var a=document.createElement(n);i.appendChild(a),document.querySelector(".wp-playlist.wp-"+n+"-playlist").parentNode.appendChild(i),setTimeout(()=>{let t=new Plyr(".wplms-playlist "+n);t.source={type:n,sources:[{src:document.querySelectorAll(".wp-"+n+"-playlist .wplms_playlist .track")[e-1].getAttribute("data-url")}]},t.play()},200);break}};let _="";if(i.meta.hasOwnProperty("video")&&"object"==typeof i.meta.video&&"video"==i.meta.video.type){let e=i.meta.video.url.split(".");switch(e[e.length-1]){case"mov":_="video/mp4";break;default:_="video/"+e[e.length-1]}}if(i.meta.hasOwnProperty("audio")&&"object"==typeof i.meta.audio&&"audio"==i.meta.audio.type){let e=i.meta.audio.url.split(".");switch(e[e.length-1]){case"m4a":_="audio/mp4";break;case"oga":_="audio/ogg";break;default:_="audio/"+e[e.length-1]}}const w=async(t,n,a=null)=>{if(t){let o={};window.wplms_course_data.course.status.seek_lock&&(o.listeners={seek:e=>{var t=r.currentTime;if(((e,t)=>"object"!=typeof t||"input"!==t.type&&"change"!==t.type?Number(t):t.target.value/t.target.max*e.media.duration)(r,e)>t)return e.preventDefault(),!1}});const l=await localforage.getItem(n);l&&document.querySelector(".media_video_meta"+a+" source")&&document.querySelector(".media_video_meta"+a+" source").setAttribute("src",URL.createObjectURL(l));let c=new Plyr(t,o);c.once("loadeddata",()=>{let e=localStorage.getItem(n);e&&e<=c.duration&&(c.currentTime=e),s({plyr:c,url:n})}),null===a||i.status||c.once("ended",t=>{e.update({index:a,src:n,event:t},"videosended")})}};((e,t,n=[])=>{const i=_e(Date.now());pe(()=>{const n=setTimeout((function(){Date.now()-i.current>=t&&(e(),i.current=Date.now())}),t-(Date.now()-i.current));return()=>{clearTimeout(n)}},[t,...n])})(()=>{void 0!==r.player&&r.player.on("playing",()=>{localStorage.setItem(r.url,r.player.currentTime)})},500,[r,o]);const v=(e,t)=>{let n={...i};n.meta.hasOwnProperty("assignments")&&n.meta.assignments.length&&n.meta.assignments[t]&&(n.meta.assignments[t].show=e),a(n)},f=(t,n)=>{"complete"==n&&e.update({assignmentIndex:t.assignmentIndex},"completeUnitAssigmnent"),"retake"==n&&e.update({assignmentIndex:t.assignmentIndex},"retakeUnitAssigmnent")};window.scorm_page_type="unit",window.hasOwnProperty("scorm_wplms_data")||(window.scorm_wplms_data={}),window.scorm_wplms_data.module_id=i.id,window.scorm_wplms_data.type="unit";const g=e=>{e&&!t&&n(e)},y=(t,n)=>{e.update(n,"mediaended")};let b=[],k=[];if(i.meta.hasOwnProperty("video")&&"object"==typeof i.meta.video){if("youtube"==i.meta.video.type){let e=i.meta.video.url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&|?]+)/);e&&e.length&&(b=e[1])}"vimeo"==i.meta.video.type&&(k=i.meta.video.url.match(/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/))}return In("div",{className:"course_content_content"},e.hasOwnProperty("noLabels")&&e.noLabels?"":In(Bn,null,In("span",{className:"lesson_info"},In("span",null,window.wplms_course_data.reports.module.unit+" ",e.item_number+"/"+e.total_item_count),In("span",null," "),In(ce,{timestamp:i.duration,notimediff:1})),In("h2",{dangerouslySetInnerHTML:{__html:i.title}})),In("div",null,i.meta.hasOwnProperty("access")&&i.meta.access||!i.meta.hasOwnProperty("drip_time")?i.meta.hasOwnProperty("video")&&"object"==typeof i.meta.video&&!Array.isArray(i.meta.video)?"youtube"==i.meta.video.type?In("div",null,b&&b.length?In(Ne,{provider:"youtube",index:e.index,embed_id:b,url:i.meta.video.url,update:y}):""):"vimeo"==i.meta.video.type&&void 0!==k&&k&&void 0!==k[4]&&k[4]?In("div",null,In(Ne,{provider:"vimeo",index:e.index,embed_id:k[4],url:i.meta.video.url,update:y})):In("div",null,In(Ne,{provider:"local",index:e.index,src:i.meta.video.url,mime_type:_,url:i.meta.video.url,video:i.meta.video,update:y})):i.meta.hasOwnProperty("audio")&&"object"==typeof i.meta.audio&&!Array.isArray(i.meta.audio)&&i.meta.audio.url.length?In("div",null,In("div",null,In("audio",{className:"activity_meta audio",ref:e=>{w(e,i.meta.audio.url)}},In("source",{src:i.meta.audio.url,type:_})))):i.meta.hasOwnProperty("package")?In("div",{className:"unit_iframe_wrapper"},In("iframe",{src:i.meta.package.src,width:"100%",height:"100%",frameborder:"0",allowfullscreen:"allowfullscreen"})):In("div",{className:i.type+""+i.id}):In(p,{start:!0,duration:i.meta.drip_time,update:(t,n)=>{"expired"==n&&e.update({index:e.index},"loadunit")},quiz_id:e.index})),i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.hasOwnProperty("video")&&i.meta.video.length?In("div",{className:"unit_videos"},i.meta.video.map((e,t)=>In("div",{className:"video_wrapper"},In("video",{className:"activity_meta video media_video_meta"+t,ref:n=>w(n,e,t)},In("source",{src:e,type:"video/mp4"}))))):"",i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.hasOwnProperty("audio")&&i.meta.audio.length?In("div",{className:"unit_videos"},i.meta.audio.map((e,t)=>In("div",{className:"video_wrapper"},In("audio",{className:"activity_meta video media_video_meta"+t,ref:n=>w(n,e,t)},In("source",{src:e,type:"audio/mpeg"}))))):"",i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.hasOwnProperty("iframes")&&i.meta.iframes.length?In("div",{className:"unit_iframes"},i.meta.iframes.map((e,t)=>"object"==typeof e&&e.hasOwnProperty("value")?In("div",{className:"unit_iframe_wrapper "+e.shortcode},In("iframe",{src:e.value,width:"560",height:"315",frameborder:"0",allowfullscreen:"allowfullscreen"})):In("div",{className:"unit_iframe_wrapper"},In("iframe",{src:e,width:"560",height:"315",frameborder:"0",allowfullscreen:"allowfullscreen"})))):"",i.hasOwnProperty("unit_type")&&"elementor"===i.unit_type?(()=>{if(i.hasOwnProperty("meta")&&i.meta.hasOwnProperty("link")&&i.meta.link.length){let e=i.meta.link;return e.includes("?")?e+="&token="+Dn("vibebp").getToken():e+="?token="+Dn("vibebp").getToken(),In("div",{className:"wplms_iframe_wrapper"},In("iframe",{src:e,width:"100%"}))}return In("div",{dangerouslySetInnerHTML:{__html:i.content},ref:g})})():In("div",{dangerouslySetInnerHTML:{__html:i.content},ref:g}),i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.attachments&&i.meta.attachments.length?In("div",{className:"unit_attachments"},In("h3",null,window.wplms_course_data.translations.attachments),i.meta.attachments.map((e,t)=>{return In("div",{className:"attachment"},In("span",null,"application/pdf"==(n=e.type)?In("span",{className:"attachment_icon",dangerouslySetInnerHTML:{__html:window.wplms_course_data.course.attachment_types["application/pdf"]}}):"image/jpeg"==n?In("span",{className:"attachment_icon",dangerouslySetInnerHTML:{__html:window.wplms_course_data.course.attachment_types["image/jpeg"]}}):"video/mp4"==n?In("span",{className:"attachment_icon",dangerouslySetInnerHTML:{__html:window.wplms_course_data.course.attachment_types["video/mp4"]}}):"application/pdf"==n||"application/pdf"==n?"":In("span",{className:"attachment_icon",dangerouslySetInnerHTML:{__html:window.wplms_course_data.course.attachment_types.default}}),In("strong",{dangerouslySetInnerHTML:{__html:e.name}})),In("a",{href:e.link,download:e.link.substring(e.link.lastIndexOf("/")+1),target:"_blank",className:"vicon vicon-download"}));var n})):"",i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.attachments&&i.meta.assignments.length?In("div",{className:"unit_assignments"},In("h3",null,window.wplms_course_data.translations.assignments),i.meta.assignments.map((t,n)=>In("div",{className:"assignment"},In("div",{className:"assignment_heading"},In("span",null,t.title),In("div",{className:"assignment_meta"},t&&t.hasOwnProperty("show")&&t.show?In("a",{className:"vicon vicon-minus",onClick:()=>{v(!1,n)}}):In("a",{className:"vicon vicon-plus",onClick:()=>{v(!0,n)}}))),t.show?In("div",{className:"assignment_content_wrapper"},In(Z,{assignment:t,assignmentIndex:n,index:n,unitIndex:e.index,update:f})):""))):"",i.meta.hasOwnProperty("pratice_questions")&&i.meta.pratice_questions.length?In("div",{className:"pratice_questions"},In(Pn,{questions:i.meta.pratice_questions})):"")};const{createElement:jn,render:Xn,useState:Yn,useEffect:Un,Fragment:Jn}=wp.element,{dispatch:Wn,select:$n}=wp.data;var Vn=e=>{const[t,n]=Yn(!1),[i,a]=Yn(!1),[s,o]=Yn(!1);return Un(()=>{a(!1);let t={id:e.id,type:"unit",course:e.course};$n("vibebp")&&$n("vibebp").hasOwnProperty("getToken")&&$n("vibebp").getToken()&&(t.token=$n("vibebp").getToken()),fetch(`${window.wplms_course_data.api_url}/course/single-unit/${e.id}?client_id=${window.wplms_course_data.client_id}&force`,{method:"post",body:JSON.stringify(t)}).then(e=>e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}).then(e=>{e&&e.hasOwnProperty("meta")&&n(e),a(!0)}).catch(e=>{a(!0),console.error("Uh oh, an error!",e),Wn("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}),o(!0)},[e]),s?jn(Jn,null,jn("div",{className:"unit_popup_wrapper",onClick:e=>{document.querySelector(".unit_popup_wrapper")&&e.target===document.querySelector(".unit_popup_wrapper")&&o(!1)}},jn("div",{className:"unit_popup_content"},jn("span",{className:"vicon vicon-close",onClick:()=>{o(!1)}}),i?jn("div",{className:"unit_content"},t?jn(Fn,{curriculumItem:t,noLabels:!0}):""):jn(r,null)))):""};const{createElement:Kn,useState:Gn,useEffect:Qn,Fragment:Zn,render:ei}=wp.element;function ti(e,t){return"string"==typeof e.className&&(e.className&&e.className.split(" ").indexOf(t)>-1)}document.addEventListener("click",(function(e){if(ti(e.target,"curriculum_unit_popup")||ti(e.target.parentElement,"curriculum_unit_popup")){let t=e.target;if(ti(e.target.parentElement,"curriculum_unit_popup")&&(t=e.target.parentElement),e.preventDefault(),e.stopPropagation(),null==document.getElementById("course_unit_popup")){let e=document.createElement("div");e.setAttribute("id","course_unit_popup"),document.body.appendChild(e)}ei(Kn(Vn,{id:t.getAttribute("data-id"),course:t.getAttribute("data-course")}),document.getElementById("course_unit_popup"))}}),!1)}]);