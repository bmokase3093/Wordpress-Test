!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=(0,wp.element.createContext)({});function o(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=wp.element,p=(u.createElement,u.useState),d=u.useEffect,f=u.Fragment,w=(u.render,u.useRef),v=wp.data,b=(v.dispatch,v.select),_=function(e){var t=c(p(""),2),n=t[0],r=t[1];return d((function(){var t="",n="",o={};switch(e.type){case"friends":n="user",t=e.id.item_id;break;case"group":n="group",t=e.id.id,o={item_id:e.id.id};break;case"activity":n="user",t=e.id.secondary_item_id;break;case"user":n="user",t=e.id.user_id;break;case"shared":n="user",t=e.id.id,o={user_id:e.id.id};break;case"course":n="course",t=e.id.id,o={item_id:e.id.id};break;default:n=e.type,t=e.id.id}localforage.getItem(n+"_"+t).then((function(a){null!==a?r(JSON.parse(a)):fetch("".concat(window.vibebp.api.url,"/avatar?type=").concat(n,"&ids=").concat(JSON.stringify(o)),{method:"post",body:JSON.stringify({type:n,ids:o,token:b("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(o){if(o.name){var a=i(i({},o),{},{id:e.id.id});localforage.setItem(n+"_"+t,JSON.stringify(a)),r(a)}}))}))}),[e.id]),wp.element.createElement(f,null,e.not_show_name?wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}):wp.element.createElement("span",null,wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)))},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=w(Date.now());d((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(o(n)))};function y(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=wp.element,S=(z.createElement,z.useState),C=z.useEffect,A=(z.Fragment,z.render,z.useContext,z.useRef),P=wp.data,x=P.dispatch,I=P.select,D={},T=function(e){var t=j(S(!1),2),n=t[0],r=t[1],o=j(S({id:0,post_title:"",post_content:"",raw:"",meta:{host:"",start_date:"",duration:60,time_zone:"",password:window.vibezoom.settings.dafault_password,join_before_host:!1,host_video:!1,participant_video:!1,mute_upon_entry:!1,enforce_login:!1,auto_recording:!1,alternative_host_ids:[],multihostkey:"",show_recordings:!1},shared:{shared_type:Object.keys(window.vibezoom.shared_tabs)[0],shared_values:[]}}),2),a=o[0],i=o[1],l=j(S({}),2),c=l[0],s=l[1],m=j(S({}),2),u=m[0],p=m[1],d=j(S(""),2),f=d[0],w=d[1],v=j(S([]),2),b=v[0],h=v[1],O=j(S(!1),2),N=O[0],k=O[1],z=j(S(null),2),P=z[0],T=z[1],M=A(null);C((function(){var t=E(E({},a),e.meeting);t.meta=E(E({},a.meta),e.meeting.meta),i(t),U(t.meta.multihostkey)}),[e.meeting]),g((function(){if(h([]),f.length>2&&a.shared.shared_type){P&&P.abort();var e=new AbortController,t=P?{signal:e.signal}:{};T(e);var n={s:f,shared_type:a.shared.shared_type};fetch("".concat(window.vibezoom.api.url,"/search?nocache"),E(E({method:"post"},t),{},{body:JSON.stringify(E(E({},n),{},{token:I("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){e.status&&e.values&&Array.isArray(e.values)&&h(e.values)})).catch((function(e){"AbortError"!==e.name&&(T(null),console.error("Uh oh, an error!",e))}))}}),500,[f]),C((function(){D=a}),[a]),C((function(){var e=null;return M&&(e=setTimeout((function(){flatpickr(M.current,{altInput:!0,defaultDate:a.meta.start_date,enableTime:!0,onChange:function(e,t,n){var r=E({},D);r.meta.start_date=t,i(r)}})}),200)),function(){e&&clearTimeout(e)}}),[M]);var L=function(e){return!(e<1e5||e>99999999)},U=function(e){k(!0),fetch("".concat(window.vibezoom.api.url,"/user/get_new_meeting_pre?nocache"),{method:"post",body:JSON.stringify({token:I("vibebp").getToken(),key:e})}).then((function(e){return e.json()})).then((function(e){k(!1),p(e)}))};return C((function(){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_zoom_editor",content:e.hasOwnProperty("meeting")&&e.meeting.post_content?e.meeting.post_content:"",raw:e.hasOwnProperty("meeting")&&e.meeting.raw?e.meeting.raw:"",components:"editor",updater:"vibe_zoom"}});document.dispatchEvent(t),document.addEventListener("vibe_editor_content_update_vibe_zoom",(function(e){s({post_content:e.detail.raw_html,raw:e.detail.editor_content})}))}),[]),wp.element.createElement("div",{className:"new_zoom_meeting"},wp.element.createElement("div",{className:"new_meeting_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back})),wp.element.createElement("div",{className:"new_meeting_content vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field meeting_title"},wp.element.createElement("label",null,window.vibezoom.translations.meeting_title),wp.element.createElement("input",{type:"text",value:a.post_title,onChange:function(e){i(E(E({},a),{},{post_title:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field password"},wp.element.createElement("label",null,window.vibezoom.translations.password),wp.element.createElement("input",{className:L(a.meta.password)?"":"not_valid",type:"number",value:a.meta.password,onChange:function(e){var t=E({},a);t.meta.password=e.target.value,i(t)}})),wp.element.createElement("div",{className:"vibebp_form_field meeting_content"},wp.element.createElement("label",null,window.vibezoom.translations.meeting_content),wp.element.createElement("div",{className:"vibe_zoom_editor"},wp.element.createElement("textarea",{onChange:function(e){i(E(E({},a),{},{post_content:e.target.value})),s(E(E({},c),{},{post_content:e.target.value}))},value:a.post_content}))),wp.element.createElement("div",{className:"zoom_meeting_timings"},wp.element.createElement("div",{className:"vibebp_form_field meeting_start_time"},wp.element.createElement("label",null,window.vibezoom.translations.meeting_start_time),wp.element.createElement("input",{type:"text",ref:M,value:a.meta.start_date})),wp.element.createElement("div",{className:"vibebp_form_field meeting_start_time"},wp.element.createElement("label",null,window.vibezoom.translations.meeting_duration_in_minutes),wp.element.createElement("input",{type:"number",value:a.meta.duration,onChange:function(e){var t=E({},a);t.meta.duration=e.target.value,i(t)}})),u.hasOwnProperty("time_zones")&&u.time_zones?wp.element.createElement("div",{className:"vibebp_form_field time_zone"},wp.element.createElement("label",null,window.vibezoom.translations.time_zone),wp.element.createElement("select",{value:a.meta.time_zone,onChange:function(e){var t=E({},a);t.meta.time_zone=e.target.value,i(t)}},wp.element.createElement("option",{value:""},window.vibezoom.translations.select_time_zone),Object.keys(u.time_zones).map((function(e){return wp.element.createElement("option",{value:e},u.time_zones[e])})))):""),wp.element.createElement("div",{className:"zoom_meeting_controls"},wp.element.createElement("div",{className:"vibebp_form_field join_before_host"},wp.element.createElement("p",null,window.vibezoom.translations.join_before_host),wp.element.createElement("div",{className:"switch"},a.meta.join_before_host?wp.element.createElement("input",{type:"checkbox",id:"join_before_host",checked:!0,onClick:function(){var e=E({},a);e.meta.join_before_host=!e.meta.join_before_host,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"join_before_host",onClick:function(){var e=E({},a);e.meta.join_before_host=!e.meta.join_before_host,i(e)}}),wp.element.createElement("label",{for:"join_before_host",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field host_video"},wp.element.createElement("p",null,window.vibezoom.translations.host_video),wp.element.createElement("div",{className:"switch"},a.meta.host_video?wp.element.createElement("input",{type:"checkbox",id:"host_video",checked:!0,onClick:function(){var e=E({},a);e.meta.host_video=!e.meta.host_video,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"host_video",onClick:function(){var e=E({},a);e.meta.host_video=!e.meta.host_video,i(e)}}),wp.element.createElement("label",{for:"host_video",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field participant_video"},wp.element.createElement("p",null,window.vibezoom.translations.participant_video),wp.element.createElement("div",{className:"switch"},a.meta.participant_video?wp.element.createElement("input",{type:"checkbox",id:"participant_video",checked:!0,onClick:function(){var e=E({},a);e.meta.participant_video=!e.meta.participant_video,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"participant_video",onClick:function(){var e=E({},a);e.meta.participant_video=!e.meta.participant_video,i(e)}}),wp.element.createElement("label",{for:"participant_video",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field mute_upon_entry"},wp.element.createElement("p",null,window.vibezoom.translations.mute_upon_entry),wp.element.createElement("div",{className:"switch"},a.meta.mute_upon_entry?wp.element.createElement("input",{type:"checkbox",id:"mute_upon_entry",checked:!0,onClick:function(){var e=E({},a);e.meta.mute_upon_entry=!e.meta.mute_upon_entry,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"mute_upon_entry",onClick:function(){var e=E({},a);e.meta.mute_upon_entry=!e.meta.mute_upon_entry,i(e)}}),wp.element.createElement("label",{for:"mute_upon_entry",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field enforce_login"},wp.element.createElement("p",null,window.vibezoom.translations.enforce_login),wp.element.createElement("div",{className:"switch"},a.meta.enforce_login?wp.element.createElement("input",{type:"checkbox",id:"enforce_login",checked:!0,onClick:function(){var e=E({},a);e.meta.enforce_login=!e.meta.enforce_login,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"enforce_login",onClick:function(){var e=E({},a);e.meta.enforce_login=!e.meta.enforce_login,i(e)}}),wp.element.createElement("label",{for:"enforce_login",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field auto_recording"},wp.element.createElement("p",null,window.vibezoom.translations.auto_recording),wp.element.createElement("div",{className:"switch"},a.meta.auto_recording?wp.element.createElement("input",{type:"checkbox",id:"auto_recording",checked:!0,onClick:function(){var e=E({},a);e.meta.auto_recording=!e.meta.auto_recording,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"auto_recording",onClick:function(){var e=E({},a);e.meta.auto_recording=!e.meta.auto_recording,i(e)}}),wp.element.createElement("label",{for:"auto_recording",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field show_recordings"},wp.element.createElement("p",null,window.vibezoom.translations.show_recordings_to_user),wp.element.createElement("div",{className:"switch"},a.meta.show_recordings?wp.element.createElement("input",{type:"checkbox",id:"show_recordings",checked:!0,onClick:function(){var e=E({},a);e.meta.show_recordings=!e.meta.show_recordings,i(e)}}):wp.element.createElement("input",{type:"checkbox",id:"show_recordings",onClick:function(){var e=E({},a);e.meta.show_recordings=!e.meta.show_recordings,i(e)}}),wp.element.createElement("label",{for:"show_recordings",className:"slider"})))),wp.element.createElement("div",{className:"zoom_meeting_sharing"},a.shared?wp.element.createElement("div",{className:"shared"},wp.element.createElement("div",{className:"vibebp_form_field select_sharing_type"},wp.element.createElement("label",null,window.vibezoom.translations.select_sharing_type),wp.element.createElement("select",{value:a.shared.shared_type,onChange:function(e){var t=E({},a);t.shared.shared_type=e.target.value,t.shared.shared_values=[],i(t)}},wp.element.createElement("option",{value:""},window.vibezoom.translations.select_sharing_type),Object.keys(window.vibezoom.shared_types).map((function(e){return wp.element.createElement("option",{value:e},window.vibezoom.shared_types[e])})))),a.shared.shared_type?wp.element.createElement("div",null,a.shared.shared_values&&Array.isArray(a.shared.shared_values)?wp.element.createElement("div",{className:"vibebp_form_field shared_with"},wp.element.createElement("label",null,window.vibezoom.translations.shared_with),wp.element.createElement("div",{className:"shared_values"},wp.element.createElement("div",{className:"_all"},a.shared.shared_values.map((function(e,t){return wp.element.createElement("div",{className:"vibebp_meeting_members",onClick:function(){var e=E({},a);e.shared.shared_values.splice(t,1),i(e)}},wp.element.createElement(_,{type:a.shared.shared_type,id:{id:parseInt(e)}}))}))))):"",wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:f,onChange:function(e){w(e.target.value)},placeholder:window.vibezoom.translations.search_text})),Array.isArray(b)&&b.length?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"vsearch_results"},wp.element.createElement("div",{className:"_all"},b.map((function(e,t){return wp.element.createElement("div",{className:"vibebp_meeting_members",onClick:function(){var n=E({},a);if(-1==n.shared.shared_values.indexOf(e.id)){n.shared.shared_values.push(e.id);var r=y(b);r.splice(t,1),h(r)}i(n)}},wp.element.createElement("span",null,e.label))}))))):""):""):""),wp.element.createElement("div",{className:"zoom_create_form_end"},u.hasOwnProperty("multihosts")&&u.multihosts&&!a.id?wp.element.createElement("div",{className:"vibebp_form_field multihostkey"},wp.element.createElement("label",null,window.vibezoom.translations.select_multihost_credential),wp.element.createElement("select",{value:a.meta.multihostkey,onChange:function(e){var t=E({},a);t.meta.multihostkey=e.target.value,i(t),U(e.target.value)}},u.multihosts.map((function(e){return wp.element.createElement("option",{value:e.key},e.title)})))):"",u.hasOwnProperty("hosts")&&u.hosts&&!a.id?wp.element.createElement("div",{className:"vibebp_form_field host"},wp.element.createElement("label",null,window.vibezoom.translations.select_host),wp.element.createElement("select",{value:a.meta.host,onChange:function(e){var t=E({},a);t.meta.host=e.target.value,i(t)}},wp.element.createElement("option",{value:""},window.vibezoom.translations.select_host_user),Object.keys(u.hosts).map((function(e){return wp.element.createElement("option",{value:e},u.hosts[e])})))):"",N?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{className:"vibebp_form_field"},a.meta&&a.meta.host&&a.meta.password&&L(a.meta.password)?wp.element.createElement("a",{className:n?"button is-primary is-loading":"button is-primary",onClick:function(){r(!0);var t=E(E({},a),{},{post_content:c.post_content,raw:c.raw}),n="?post&args=".concat(encodeURIComponent(JSON.stringify(E({},a))));fetch("".concat(window.vibezoom.api.url,"/user/meetings/new").concat(n),{method:"post",body:JSON.stringify(E(E({},t),{},{token:I("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(!1),t.status&&e.created(t.meeting),t.hasOwnProperty("message")&&x("vibebp").addNotification({text:t.message})}))}},window.vibezoom.translations.submit):""))))};var M=wp.element;M.useRef,M.useEffect;function L(e,t){return new Promise((function(n,r){var o="",a="";if("js"==t?(o="text/javascript",a="script"):"css"==t&&(o="text/css",a="style"),o||r("type not defined"),document.getElementById(e))n(!0);else{var i=document.createElement(a);i.setAttribute("id",e),i.setAttribute("type",o),i.setAttribute("src",e),void 0!==i&&(i.addEventListener&&i.addEventListener("load",(function(){!function(e){console.log("loadFunc",e)}(e),n(!0)}),!1),document.getElementsByTagName("head")[0].appendChild(i))}}))}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=wp.element,Z=R.useState,F=R.useEffect,$=R.Fragment,q=(R.useContext,wp.data),B=q.dispatch,W=q.select,V=function(e){var t=U(Z(!1),2),n=t[0],r=t[1],o=U(Z(!1),2),a=o[0],i=o[1],l=U(Z(e.meeting),2),c=l[0],s=l[1],m=U(Z(W("vibebp").getUser()),2),u=m[0];m[1];F((function(){s(e.meeting)}),[e.meeting]),F((function(){}),[]);var p=function(e){if(c.meeting_details){i(e);var t="?args=".concat(encodeURIComponent(JSON.stringify({id:c.id})));fetch("".concat(window.vibezoom.api.url,"/user/meetings/record_join_activity").concat(t),{method:"post",body:JSON.stringify({token:W("vibebp").getToken(),id:c.id})}).then((function(e){return e.json()})).then((function(t){i(!1),t.hasOwnProperty("message")&&B("vibebp").addNotification({text:t.message}),t.status&&c.meeting_details&&(1==e?d(c.meeting_details):c.meeting_details.join_url&&window.open(c.meeting_details.join_url,"_blank"))}))}},d=function(e){["https://source.zoom.us/1.9.5/css/bootstrap.css","https://source.zoom.us/1.9.5/css/react-select.css"].map((function(e){L(e,"css")}));var t=[];["https://source.zoom.us/1.9.5/lib/vendor/react.min.js","https://source.zoom.us/1.9.5/lib/vendor/react-dom.min.js","https://source.zoom.us/1.9.5/lib/vendor/redux.min.js","https://source.zoom.us/1.9.5/lib/vendor/redux-thunk.min.js","https://source.zoom.us/1.9.5/lib/vendor/lodash.min.js","https://source.zoom.us/zoom-meeting-1.9.5.min.js"].map((function(e){t.push(L(e,"js"))})),Promise.all(t).then((function(t){ZoomMtg.setZoomJSLib("https://source.zoom.us/1.9.5/lib","/av"),ZoomMtg.preLoadWasm(),ZoomMtg.prepareJssdk(),ZoomMtg.init({leaveUrl:window.location.href,isSupportAV:!0,success:function(){var t="";if(window.vibezoom.settings.websdk_language)t=window.vibezoom.settings.websdk_language;else{var n=["de-DE","es-ES","en-US","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW"],r=window.navigator.language,o=n.findIndex((function(e){return e.toLowerCase()==r.toLowerCase()}));o>-1&&(t=n[o])}t&&(ZoomMtg.i18n.load(t),ZoomMtg.i18n.reload(t),ZoomMtg.reRender({lang:t})),ZoomMtg.join({signature:e.signature,apiKey:e.api_key,meetingNumber:e.meeting_id,userName:u.displayname,userEmail:u.email,passWord:e.password,error:function(e){console.log(e)},success:function(e){console.log(e);var t=document.getElementById("wpadminbar");t&&(t.style.display="none")}})}}),window.addEventListener("unload",(function(){ZoomMtg.leaveMeeting({})}))}))};return wp.element.createElement("div",{className:"join_vibezoom"},c.meeting_details?wp.element.createElement($,null,wp.element.createElement($,null,c.meeting_details.meeting_id?wp.element.createElement($,null,wp.element.createElement("div",{className:"join_meeting_details"},e.hasOwnProperty("show_timing")?wp.element.createElement("div",null,wp.element.createElement("ul",{className:"bbb_meeting_details"},wp.element.createElement("li",null,wp.element.createElement("strong",null,window.vibezoom.translations.starts),wp.element.createElement("span",null,new Date(c.meeting_details.start).toLocaleString())),wp.element.createElement("li",null,wp.element.createElement("strong",null,window.vibezoom.translations.ends),wp.element.createElement("span",null,new Date(c.meeting_details.end).toLocaleString())))):""),c.meeting_details.password&&c.meeting_details.join_url?wp.element.createElement("div",{className:"join_meeting_buttons"},n?wp.element.createElement("div",{className:"vibe_zoom_iframe_container"},wp.element.createElement("div",{class:"vibe_zoom_join_url"},wp.element.createElement("span",null,window.vibezoom.translations.join_url),wp.element.createElement("a",{href:"#",onClick:function(){var e=document.createElement("textarea");e.innerText=c.meeting_details.join_url,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}},c.meeting_details.join_url)),wp.element.createElement("div",{class:"vibe_zoom_join_url"},wp.element.createElement("span",null,window.vibezoom.translations.password),wp.element.createElement("a",{href:"#",onClick:function(){var e=document.createElement("textarea");e.innerText=c.meeting_details.passWord,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}},c.meeting_details.password)),wp.element.createElement("div",null,wp.element.createElement("a",{className:1==a?"button is-primary open_in_same_tab is-loading":"button is-primary open_in_same_tab",onClick:function(){p(1)}},window.vibezoom.translations.open_meeting),wp.element.createElement("a",{className:2==a?"button is-primary open_in_new_tab is-loading":"button is-primary open_in_new_tab",onClick:function(){p(2)}},window.vibezoom.translations.open_meeting_in_new_tab))):wp.element.createElement("div",null,W("vibebp").getUser().id!=c.post_author?wp.element.createElement("a",{className:"button is-primary",onClick:function(){r(!n)}},window.vibezoom.translations.join_meeting):wp.element.createElement("a",{className:"button is-primary",onClick:function(){r(!n)}},window.vibezoom.translations.start_meeting))):""):"")):"")};function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=wp.element,Q=G.useState,X=G.useEffect,Y=(G.Fragment,wp.data),ee=(Y.dispatch,Y.select),te=function(e){var t=H(Q(e.id),2),n=t[0],r=(t[1],H(Q([]),2)),o=r[0],a=r[1],i=H(Q(!1),2),l=i[0],c=i[1];return X((function(){!function(){c(!0);var e="?nocache&args=".concat(encodeURIComponent(JSON.stringify({id:n})));fetch("".concat(window.vibezoom.api.url,"/user/meetings/recordings").concat(e),{method:"post",body:JSON.stringify({token:ee("vibebp").getToken(),id:n})}).then((function(e){return e.json()})).then((function(e){c(!1),e.status&&e.data.hasOwnProperty("recording_files")&&Array.isArray(e.data.recording_files)&&e.data.recording_files.length&&a(e.data.recording_files)}))}()}),[]),wp.element.createElement("div",{className:"zoom_meeting_recordings"},Array.isArray(o)&&o.length?o.map((function(e){return wp.element.createElement("div",{className:"meeting_recording"},wp.element.createElement("div",{className:"meeting_recording_header"},wp.element.createElement("span",null,window.vibezoom.translations.starts+" : "+new Date(e.recording_start).toLocaleString()),wp.element.createElement("span",null,window.vibezoom.translations.ends+" : "+new Date(e.recording_end).toLocaleString())),wp.element.createElement("div",{className:"meeting_recording_body"},wp.element.createElement("a",{className:"link",href:e.play_url,target:"_blank"},window.vibezoom.translations.view_recording)))})):wp.element.createElement("div",{className:"vbp_message"},window.vibezoom.translations.no_recordings),l?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=wp.element,ae=oe.useState,ie=oe.useEffect,le=oe.Fragment,ce=oe.useContext,se=wp.data,me=se.dispatch,ue=se.select,pe=function(e){var t=ce(r),n=ue("vibebp").getUser(),o=ne(ae(e.meeting),2),a=o[0],i=o[1];ie((function(){i(e.meeting)}),[e.meeting]),ie((function(){document.dispatchEvent(new Event("VibeBP_Editor_Content"))}),[]);return wp.element.createElement(le,null,wp.element.createElement("div",{className:"vibebp_full_meeting_wrapper"},wp.element.createElement("div",{className:"vibebp_meetings_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back}),wp.element.createElement("span",null,wp.element.createElement("span",{className:"meeting_date"},a.post_date),a.post_author===n.id?wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){t.update(a,"edit_meeting_id")}}),wp.element.createElement("span",{className:"vicon vicon-trash",onClick:function(){var t="?post&args=".concat(encodeURIComponent(JSON.stringify({id:a.id})));fetch("".concat(window.vibezoom.api.url,"/user/meetings/trash").concat(t),{method:"post",body:JSON.stringify({token:ue("vibebp").getToken(),meeting_id:a.id})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("message")&&me("vibebp").addNotification({text:t.message}),t.status&&(e.update("remove",a),e.back())}))}})):"")),wp.element.createElement("h3",{className:"post_title"},a.post_title),wp.element.createElement("div",{className:"vibebp_meeting_content",dangerouslySetInnerHTML:{__html:a.post_content}}),a.meeting_details?wp.element.createElement(V,{meeting:a}):"",a.post_author==n.id||a.meta.hasOwnProperty("show_recordings")&&a.meta.show_recordings?wp.element.createElement(te,{id:a.id}):""))};function de(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye=wp.element,he=ye.useState,Ee=ye.useEffect,Oe=ye.Fragment,je=(ye.render,ye.useContext),Ne=wp.data.select,ke=function(e){var t=je(r),n=be(he({scope:Object.keys(window.vibezoom.shared_tabs)[0],type:e.type,paged:1,s:"",orderby:"date",order:"DESC"}),2),o=n[0],a=n[1],i=be(he(we({},o)),2),l=(i[0],i[1],be(he(!1),2)),c=l[0],s=l[1],m=be(he(!1),2),u=m[0],p=m[1],d=be(he(t.meetings),2),f=d[0],w=d[1],v=be(he(!1),2),b=v[0],y=v[1],h=be(he(null),2),E=h[0],O=h[1];Ee((function(){w(t.meetings)}),[t.meetings]),Ee((function(){a(we(we({},o),{},{type:e.type,s:"",paged:1}))}),[e.type]);var j=function(){a(we(we({},o),{},{s:""}))};Ee((function(){return document.addEventListener("vibebp_component_reload",j),function(){document.removeEventListener("vibebp_component_reload",j)}})),g((function(){var e=we({},o),n=Ne("vibebp").getId();n&&(e=we(we({},e),{},{post__in:n})),E&&E.abort();var r=new AbortController,a=E?{signal:r.signal}:{};O(r),"mine"===e.type&&delete e.scope;var i=e.s.length?"?nocache":"?args=".concat(encodeURIComponent(JSON.stringify(we(we({},e),{},{s:""})))),l=1==e.paged?[]:de(f);N(l),s(!0),fetch("".concat(window.vibezoom.api.url,"/user/meetings").concat(i," "),we(we({method:"post"},a),{},{body:JSON.stringify(we(we({},e),{},{token:Ne("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){if(s(!1),e.status){l=1==o.paged?[]:de(f);var r=[].concat(de(l),de(e.meetings));if(p(r.length<parseInt(e.total)),N(r),n&&r.findIndex((function(e){return e.id==n}))>-1){var a=r[r.findIndex((function(e){return e.id==n}))];t.update(a,"show_meeting_id")}}})).catch((function(e){s(!1),"AbortError"===e.name||(O(null),console.error("Uh oh, an error!",e))}))}),500,[o]);var N=function(e){w(e),t.update(e,"set")},k=de(f);return o.s.length&&(k=f.filter((function(e){return e.post_title.toLowerCase().indexOf(o.s.toLowerCase())>-1}))),wp.element.createElement("div",{className:"vibebp_meetings_wrapper"},wp.element.createElement(Oe,null,wp.element.createElement("div",{className:"vibebp_main_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:o.s,onChange:function(e){a(we(we({},o),{},{s:e.target.value,paged:1}))},placeholder:window.vibezoom.translations.search_text})),"joined"==e.type?wp.element.createElement("div",{class:"buttons has-addons"},Object.keys(window.vibezoom.shared_tabs).map((function(e){return wp.element.createElement("button",{className:o.scope==e?"button is-success is-selected":"button",onClick:function(t){a(we(we({},o),{},{s:"",scope:e,paged:1}))}},window.vibezoom.shared_tabs[e])}))):"",wp.element.createElement("div",null,wp.element.createElement("span",{className:"show_filters",onClick:function(){return y(!b)}},wp.element.createElement("span",{className:b?"vicon vicon-close":"vicon vicon-menu-alt"},window.vibebp.translations.filter)),b?wp.element.createElement(Oe,null,wp.element.createElement("div",{className:"order_sorter"},wp.element.createElement("select",{value:o.orderby,onChange:function(e){a(we(we({},o),{},{s:"",orderby:e.target.value,paged:1}))}},Object.keys(window.vibezoom.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibezoom.sorters[e])}))),wp.element.createElement("span",null,wp.element.createElement("span",{className:"ASC"==o.order?"vicon vicon-angle-up active":"vicon vicon-angle-up",onClick:function(){a(we(we({},o),{},{s:"",order:"ASC"}))}}),wp.element.createElement("span",{className:"DESC"==o.order?"vicon vicon-angle-down active":"vicon vicon-angle-down",onClick:function(){a(we(we({},o),{},{s:"",order:"DESC"}))}})))):"")),k&&k.length?wp.element.createElement(Oe,null,wp.element.createElement("div",{className:"vibebp_zoom_meetings"},k.map((function(e){var n=Date.now(),r=(e.meeting_details.start-n)/1e3,o="";return o=n>=e.meeting_details.start&&n<=e.meeting_details.end?"running":n<e.meeting_details.start?"upcoming_meeting":"meeting_over",wp.element.createElement("div",{className:"vibebp_zoom_meeting",onClick:function(){t.update(e,"show_meeting_id")}},wp.element.createElement("div",null,wp.element.createElement("span",{className:o},"running"==o?window.vibezoom.translations.meeting_running:"meeting_over"==o?window.vibezoom.translations.meeting_over:r>86400?Math.floor(r/86400)+window.vibezoom.translations.days:r>3600?Math.floor(r/3600)+window.vibezoom.translations.hours:r>60?Math.floor(r/60)+window.vibezoom.translations.minutes:Math.floor(r)+window.vibezoom.translations.seconds),wp.element.createElement("h3",null,e.post_title),e.meeting_details?wp.element.createElement("div",{className:"meeting_details"},e.meeting_details.start?wp.element.createElement("span",null,wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-calendar"}),wp.element.createElement("span",null,new Date(e.meeting_details.start).toLocaleString()))):"",e.meeting_details.end?wp.element.createElement("span",null,wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-calendar"}),wp.element.createElement("span",null,new Date(e.meeting_details.end).toLocaleString()))):""):""),wp.element.createElement("div",{className:"vibebp_meeting_members"},wp.element.createElement(_,{type:"user",id:{user_id:e.post_author},not_show_name:!0})))}))),u?wp.element.createElement("a",{className:"link",onClick:function(){a(we(we({},o),{},{paged:o.paged+1}))}},window.vibezoom.translations.load_more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibezoom.translations.no_zooms),c?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):""))};function ze(e){return function(e){if(Array.isArray(e))return Ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var De=wp.element,Te=De.useState,Me=De.useEffect,Le=wp.data,Ue=Le.dispatch,Je=Le.select,Re=function(e){var t=Pe(Te({}),2),n=(t[0],t[1],Je("vibebp").getUser()),o=Pe(Te([]),2),a=o[0],i=o[1],l=Pe(Te([]),2),c=l[0],s=l[1],m=Pe(Te(!1),2),u=m[0],p=m[1],d=Pe(Te(!0),2),f=(d[0],d[1],Pe(Te([]),2)),w=f[0],v=f[1],b=Pe(Te(!1),2),_=b[0],g=b[1],y=Pe(Te(!1),2),h=y[0],E=y[1],O=window.vibezoom.settings.editor_slug,j=n.caps.hasOwnProperty(window.vibezoom.settings.new_vibezoom_cap);Me((function(){var e=Je("vibebp").getMenu().filter((function(e){return"zoom_meeting"===e.parent})).filter((function(e){return!!j||-1==O.indexOf(e.slug)}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar");var t=Je("vibebp").getAction();"view"==Je("vibebp").getAction()&&(t=Object.keys(window.vibezoom.shared_tabs)[0]),p(t),i(e)}),[]);return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibezoom.label),j?wp.element.createElement("a",{className:"button is-primary new_mail",onClick:function(){g(!0)}},window.vibezoom.translations.create_zoom):"",a.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:n,onClick:function(n){var r=Ce({},c);r.filter=e.css_id,r.page=1,c.css_id!==r.filter&&s(r),p(e.css_id);var o=ze(a),l=o.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));o[l].class.splice(o[l].class.indexOf("current-menu-item"),1),o[t].class.push("current-menu-item"),i(o)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"vibe_zoom_context_wrapper"},wp.element.createElement(r.Provider,{value:{meetings:w,update:function(e,t){var n=ze(w),r=-1;switch(t){case"add":n.push(e),v(n);break;case"update":(r=n.findIndex((function(t){return t.id==e.id})))>=0&&(n.splice(r,1,e),v(n));break;case"set":v(e);break;case"show_meeting_id":(r=n.findIndex((function(t){return parseInt(t.id)==parseInt(e.id)})))>=0?(g(!1),E(n[r])):(g(!1),E(e));break;case"edit_meeting_id":(r=n.findIndex((function(t){return parseInt(t.id)==parseInt(e.id)})))>=0&&(E(!1),g(n[r]))}}}},h?wp.element.createElement(pe,{meeting:h,back:function(){E(!1),Ue("vibebp").setId(!1)}}):_?wp.element.createElement(T,{meeting:_,back:function(){g(!1)},created:function(e){g(!1)}}):"my_meetings"===u?wp.element.createElement(ke,{type:"joined"}):"manage_meetings"===u?wp.element.createElement(ke,{type:"mine"}):wp.element.createElement(ke,{type:"joined"})))))};function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=wp.element,qe=($e.createElement,$e.render),Be=($e.useState,$e.useEffect,$e.Fragment);$e.useContext;document.addEventListener("component_loaded",(function(e){"zoom_meeting"===e.detail.component&&setTimeout((function(){qe(wp.element.createElement(Re,{field:e.detail}),document.querySelector("#zoom_meeting_component"))}),200)}),!1),document.addEventListener("unit_loaded",(function(e){if(e.detail.hasOwnProperty("coursestatus")){if(document.querySelectorAll(".vibe_zoom_unit"))for(var t=document.querySelectorAll(".vibe_zoom_unit"),n=t.length-1;n>=0;n--)t[n].remove();var r=e.detail.coursestatus;if(r.hasOwnProperty("courseitems")&&Array.isArray(r.courseitems)&&r.courseitems.length&&r.hasOwnProperty("current_unit_key")){var o=r.courseitems[r.current_unit_key];if(o.hasOwnProperty("id")&&"unit"==o.type&&o.hasOwnProperty("meta")&&o.meta.hasOwnProperty("unit_type")&&"wplms_zoom"==o.meta.unit_type&&o.meta.hasOwnProperty("zoom")&&o.meta.zoom){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.meta.zoom);setTimeout((function(){var e=document.querySelector(".unit"+o.id);if(e){var t=document.createElement("div");t.setAttribute("id","unit_zoom_"+o.id),t.classList.add("vibe_zoom_unit"),e.appendChild(t)}var n=document.getElementById("unit_zoom_"+o.id);n&&qe(wp.element.createElement(Be,null,wp.element.createElement(V,{meeting:a,show_timing:!0}),a.meta.hasOwnProperty("show_recordings")&&a.meta.show_recordings?wp.element.createElement(te,{id:a.id}):""),n)}),200)}}}}),!1)}]);